{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA,MAAM,gCAAU,IAAI,CAAA,GAAA,cAAO,AAAD;AAE1B,IAAI,sCAAgB,CAAC;AAErB,MAAM,0CACJ,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,oBAAoB,EAAE;AACxD,QAAQ,GAAG,CAAC;AACZ,MAAM,qCAAe,SAAS,aAAa,CAAC;AAE5C,SAAS,qCAAe,IAAI,EAAE;IAC5B,cAAc,IAAI,CAAC;IACnB,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;IACrD;AACF;AAEA,SAAS,wCAAkB;IACzB,IAAI,CAAC,oCAAc;IAEnB,mCAAa,SAAS,GAAG;IAEzB,IAAI,oCAAc,MAAM,KAAK,GAC3B,mCAAa,SAAS,GAAG,CAAC;;;;;;;;;;;;;MAaxB,CAAC;SACE;QACL,mCAAa,SAAS,GAAG,YACtB,GAAG,CAAC,CAAA,OAAQ;YACX,OAAO,CAAC;;gDAEgC,EAAE,KAAK,UAAU,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC;;;oBAGlE,EAAE,KAAK,KAAK,CAAC;mBACd,EAAE,KAAK,QAAQ,CAAC;;;;;;;;;mDASgB,EAAE,KAAK,WAAW,CAAC;;mBAEnD,EAAE,KAAK,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;QA2BzB,CAAC;QACH,GACC,IAAI,CAAC;QACV,SAAS,gBAAgB,CAAC,gBAAgB,OAAO,CAAC,CAAA,IAAK;YACnD,EAAE,gBAAgB,CAAC,SAAS;QAC9B;IACF,CAAC;AACH;AAEC,CAAA,UAAY;IACX,MAAM,QAAQ,MAAM,8BAAQ,eAAe;IAC3C,MAAM,aAAa,wCAAkB,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE;IAClD,sCAAgB,MAAM,MAAM,CAAC,CAAC,KAAK,IAAM;QACvC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAA,OAAQ;YACtB,IAAI,WAAW,QAAQ,CAAC,KAAK,GAAG,GAC9B,IAAI,IAAI,CAAC;QAEb;QACA,OAAO;IACT,GAAG,EAAE;IACL,QAAQ,GAAG,CAAC;IAEZ,MAAM,UAAU;QACd,YAAY,oCAAc,MAAM;QAChC,cAAc;QACd,cAAc;QACd,MAAM;QACN,aAAa,KAAK;QAClB,oBAAoB;QACpB,mBAAmB;QACnB,UAAU;YACR,MAAM;YACN,aACE;YACF,YACE;YAGF,oBACE;YAGF,YACE;QAGJ;IACF;IAEA,IAAI,oCAAc,MAAM,KAAK,GAC3B,SAAS,aAAa,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;SAE1D,SAAS,aAAa,CAAC,mBAAmB,KAAK,CAAC,OAAO,GAAG;IAG5D,MAAM,YAAY,SAAS,cAAc,CAAC;IAC1C,YAAY,IAAI,WAAW,WAAW;IACtC,UAAU,cAAc;IACxB,kBAAkB,UAAU,cAAc;IAC1C,UAAU,EAAE,CAAC,aAAa,CAAC,QAAE,KAAI,EAAE,GAAK,kBAAkB;IAE1D;AACF,CAAA;;ADjJA","sources":["src/shopping-list.js","src/js/for-each-partial/store.js"],"sourcesContent":["import './js/for-each-partial/store';\n// import './js/for-each-partial/pagination';\nimport './js/for-each-partial/header';\nimport './js/for-each-partial/support';\nimport './js/api/book.service';\nimport './js/for-each-partial/mobile-menu';\n// import './js/firebase/firebase';\nimport './js/firebase/auth';\nimport './js/for-each-partial/registration-modal';\nimport './js/for-each-partial/validation-registration-form';\n","import { BookAPI } from '../api/book.service';\nconst bookApi = new BookAPI();\n\nlet selectedBooks = {};\n\nconst shoppingListArray =\n  JSON.parse(localStorage.getItem('shoppingList')) || [];\nconsole.log(shoppingListArray);\nconst shoppingList = document.querySelector('.shopping-list');\n\nfunction addToFavorites(book) {\n  favoriteBooks.push(book);\n  localStorage.setItem('favoriteBooks', JSON.stringify(favoriteBooks));\n  renderFavorites();\n}\n\nfunction renderFavorites() {\n  if (!shoppingList) return;\n\n  shoppingList.innerHTML = '';\n\n  if (selectedBooks.length === 0) {\n    shoppingList.innerHTML = `\n      <p class=\"some-book\">\n        This page is empty, add some books<br />and proceed to order.\n      </p>\n      <div class=\"stack-of-books\">\n        <img\n            src=\"https://lh3.googleusercontent.com/pw/AJFCJaXF-_bnsOB3uXSYccYIy6OIbasPGhK58TIG0KTbIRDMPOMP1TtEGd2v8e9EsOOUcZtpOjn5ToZTgfcrfJbF-r0KEa0DReOlQZhvZF8xlygQIOy7rBEg9YFDmqIH1RQ9sjRUPPvATZYh0PGnOM4RpkEm=w323-h241-s-no?authuser=0\"\n            alt=\"stack of books\"\n            width=\"265\"\n            height=\"198\"\n          />\n\n     </div>\n      `;\n  } else {\n    shoppingList.innerHTML = booksOnPage\n      .map(book => {\n        return `\n          <li class=\"shopping-list-book\">\n            <img class=\"shopping-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" width=\"100\" height=\"142\" />\n            <div class=\"shopping-book-info\">\n              <div class=\"shopping-book-title\">\n                <h3>${book.title}</h3>\n                <p>${book.category}</p>\n              </div>\n              <a href=\"#\">\n                <svg class=\"book__add-cart-icon\" width=\"28\" height=\"28\">\n                  <use href=\"./images/blocks.svg#icon-blocks1\"></use>\n                </svg>\n              </a>\n            </div>\n            <div class=\"shopping-book-box\">\n              <p class=\"shopping-book-description\">${book.description}</p>\n              <div class=\"shopping-book-author\">\n                <p>${book.author}</p>\n                <ul class=\"shopping-book-retailers\">\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"amazon_logo-icon\" width=\"32\" height=\"14\">\n                        <use href=\"./images/blocks.svg#icon-Amazon_logo\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-book-opened\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-book-opened\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-books-cl\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-books-cl\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </li>\n        `;\n      })\n      .join('');\n  document.querySelectorAll('.remove_book').forEach(b => {\n      b.addEventListener('click', removeBookFromFavorite);\n    });\n  }\n}\n\n(async () => {\n  const books = await bookApi.getTopBooksList();\n  const selectedId = shoppingListArray.map(b => b.id);\n  selectedBooks = books.reduce((acc, b) => {\n    b.books.forEach(book => {\n      if (selectedId.includes(book._id)) {\n        acc.push(book);\n      }\n    });\n    return acc;\n  }, []);\n  console.log(selectedBooks);\n\n  const options = {\n    totalItems: selectedBooks.length,\n    itemsPerPage: booksPerPage,\n    visiblePages: 10,\n    page: 1,\n    centerAlign: false,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  if (selectedBooks.length === 0) {\n    document.querySelector('.tui-pagination').style.display = 'none';\n  } else {\n    document.querySelector('.tui-pagination').style.display = 'block';\n  }\n\n  const container = document.getElementById('pagination');\n  paginator = new Pagination(container, options);\n  paginator.getCurrentPage();\n  updateBooksOnPage(paginator.getCurrentPage());\n  paginator.on('afterMove', ({ page }) => updateBooksOnPage(page));\n\n  renderFavorites();\n})();\n"],"names":[],"version":3,"file":"shopping-list.35ecfb92.js.map"}