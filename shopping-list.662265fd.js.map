{"mappings":"gfACA,MAAMA,EAAU,IAAI,EADpBC,EAAA,SACoBC,SAEpB,IAAIC,EAAgB,CAAC,EAErB,MAAMC,EACJC,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GACtDC,QAAQC,IAAIN,GACZ,MAAMO,EAAeC,SAASC,cAAc,kBAQ5C,SAASC,IACFH,IAELA,EAAaI,UAAY,GAEI,IAAzBZ,EAAca,OAChBL,EAAaI,UAAY,yXAezBJ,EAAaI,UAAYZ,EACtBc,KAAIC,GACI,gGAEmCA,EAAKC,oBAAoBD,EAAKE,0JAG1DF,EAAKE,kCACNF,EAAKG,oXAS2BH,EAAKI,yFAErCJ,EAAKK,6mCA6BnBC,KAAK,IAEZ,CAEC,WACC,MAAMC,QAAczB,EAAQ0B,kBACtBC,EAAavB,EAAkBa,KAAIW,GAAKA,EAAEC,KAChD1B,EAAgBsB,EAAMK,QAAO,CAACC,EAAKH,KACjCA,EAAEH,MAAMO,SAAQd,IACVS,EAAWM,SAASf,EAAKgB,MAC3BH,EAAII,KAAKjB,EAAA,IAGNa,IACN,IAEHjB,GACF,EAbC,G","sources":["src/js/for-each-partial/store.js"],"sourcesContent":["import { BookAPI } from '../api/book.service';\nconst bookApi = new BookAPI();\n\nlet selectedBooks = {};\n\nconst shoppingListArray =\n  JSON.parse(localStorage.getItem('shoppingList')) || [];\nconsole.log(shoppingListArray);\nconst shoppingList = document.querySelector('.shopping-list');\n\nfunction addToFavorites(book) {\n  favoriteBooks.push(book);\n  localStorage.setItem('favoriteBooks', JSON.stringify(favoriteBooks));\n  renderFavorites();\n}\n\nfunction renderFavorites() {\n  if (!shoppingList) return;\n\n  shoppingList.innerHTML = '';\n\n  if (selectedBooks.length === 0) {\n    shoppingList.innerHTML = `\n      <p class=\"some-book\">\n        This page is empty, add some books<br />and proceed to order.\n      </p>\n      <div class=\"stack-of-books\">\n        <div class=\"stack-of-books\">\n          <img\n            src=\"./images/books-list-00100.png\"\n            alt=\"stack of books\"\n            width=\"265\"\n            height=\"198\"\n          />\n        </div>\n      `;\n  } else {\n    shoppingList.innerHTML = selectedBooks\n      .map(book => {\n        return `\n          <li class=\"shopping-list-book\">\n            <img class=\"shopping-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" width=\"100\" height=\"142\" />\n            <div class=\"shopping-book-info\">\n              <div class=\"shopping-book-title\">\n                <h3>${book.title}</h3>\n                <p>${book.category}</p>\n              </div>\n              <a href=\"#\">\n                <svg class=\"book__add-cart-icon\" width=\"28\" height=\"28\">\n                  <use href=\"./images/blocks.svg#icon-blocks1\"></use>\n                </svg>\n              </a>\n            </div>\n            <div class=\"shopping-book-box\">\n              <p class=\"shopping-book-description\">${book.description}</p>\n              <div class=\"shopping-book-author\">\n                <p>${book.author}</p>\n                <ul class=\"shopping-book-retailers\">\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"amazon_logo-icon\" width=\"32\" height=\"14\">\n                        <use href=\"./images/blocks.svg#icon-Amazon_logo\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-book-opened\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-book-opened\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-books-cl\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-books-cl\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </li>\n        `;\n      })\n      .join('');\n  }\n}\n\n(async () => {\n  const books = await bookApi.getTopBooksList();\n  const selectedId = shoppingListArray.map(b => b.id);\n  selectedBooks = books.reduce((acc, b) => {\n    b.books.forEach(book => {\n      if (selectedId.includes(book._id)) {\n        acc.push(book);\n      }\n    });\n    return acc;\n  }, []);\n  // console.log(selectedBooks);\n  renderFavorites();\n})();\n"],"names":["$892cf1b4390fc6d4$var$bookApi","parcelRequire","BookAPI","$892cf1b4390fc6d4$var$selectedBooks","$892cf1b4390fc6d4$var$shoppingListArray","JSON","parse","localStorage","getItem","console","log","$892cf1b4390fc6d4$var$shoppingList","document","querySelector","$892cf1b4390fc6d4$var$renderFavorites","innerHTML","length","map","book","book_image","title","category","description","author","join","books","getTopBooksList","selectedId","b","id","reduce","acc","forEach","includes","_id","push"],"version":3,"file":"shopping-list.662265fd.js.map"}