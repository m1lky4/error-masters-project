{"mappings":"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","sources":["src/shopping-list.js","src/js/for-each-partial/store.js"],"sourcesContent":["import './js/for-each-partial/store';\n\nimport './js/for-each-partial/header';\n// import './js/for-each-partial/support';\nimport './js/api/book.service';\nimport './js/for-each-partial/mobile-menu';\n// import './js/firebase/firebase';\nimport './js/for-each-partial/registration-modal';\nimport './js/for-each-partial/validation-registration-form';\nimport './js/for-each-partial/shopping-skeleton';\n","import { BookAPI } from '../api/book.service';\nconst bookApi = new BookAPI();\n\nlet selectedBooks = {};\n\nconst shoppingListArray =\n  JSON.parse(localStorage.getItem('shoppingList')) || [];\nconsole.log(shoppingListArray);\nconst shoppingList = document.querySelector('.shopping-list');\nconst container = document.getElementById('pagination');\nlet options;\nlet paginator;\n\nlet booksPerPage = 3;\n\nlet booksOnPage = [];\n\nfunction addToFavorites(book) {\n  favoriteBooks.push(book);\n  localStorage.setItem('favoriteBooks', JSON.stringify(favoriteBooks));\n  renderFavorites();\n}\n\nfunction renderFavorites() {\n  if (!shoppingList) return;\n\n  shoppingList.innerHTML = '';\n\n  if (selectedBooks.length === 0) {\n    shoppingList.innerHTML = `\n      <div class=\"some-book-centr\">\n      <p class=\"some-book\">\n        This page is empty, add some books<br />and proceed to order.\n      </p>\n      <div class=\"stack-of-books\">\n        <img\n            src=\"https://lh3.googleusercontent.com/pw/AJFCJaXF-_bnsOB3uXSYccYIy6OIbasPGhK58TIG0KTbIRDMPOMP1TtEGd2v8e9EsOOUcZtpOjn5ToZTgfcrfJbF-r0KEa0DReOlQZhvZF8xlygQIOy7rBEg9YFDmqIH1RQ9sjRUPPvATZYh0PGnOM4RpkEm=w323-h241-s-no?authuser=0\"\n            alt=\"stack of books\"\n            width=\"265\"\n            height=\"198\"\n          />\n      </div>\n      `;\n  } else {\n    shoppingList.innerHTML = booksOnPage\n      .map(book => {\n        return `\n          <li class=\"shopping-list-book\">\n            <img class=\"shopping-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" width=\"100\" height=\"142\" />\n            <div class=\"shopping-book-info\">\n              <div class=\"shopping-book-title\">\n                <h3>${book.title}</h3>\n                <p>${book.category}</p>\n              </div>\n              \n<span class=\"remove_book\" data-id=\"${book._id}\">\n<svg class=\"trash-svg\" width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\">\n<path d=\"M7.25 1.75H12.75M1.75 4.5H18.25M16.4167 4.5L15.7738 14.1427C15.6774 15.5894 15.6291 16.3128 15.3167 16.8613C15.0416 17.3441 14.6266 17.7323 14.1265 17.9747C13.5585 18.25 12.8335 18.25 11.3836 18.25H8.61643C7.1665 18.25 6.44153 18.25 5.87348 17.9747C5.37336 17.7323 4.95841 17.3441 4.68332 16.8613C4.37085 16.3128 4.32263 15.5894 4.22618 14.1427L3.58333 4.5M8.16667 8.625V13.2083M11.8333 8.625V13.2083\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n</span>\n              \n            </div>\n            <div class=\"shopping-book-box\">\n              <p class=\"shopping-book-description\">${book.description}</p>\n              <div class=\"shopping-book-author\">\n                <p>${book.author}</p>\n                <ul class=\"shopping-book-retailers\">\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"amazon_logo-icon\" width=\"32\" height=\"14\">\n                        <use href=\"./images/blocks.svg#icon-Amazon_logo\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-book-opened\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-book-opened\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                  <li class=\"books-retailers-icon\">\n                    <a href=\"#\">\n                      <svg class=\"icon-books-cl\" width=\"20\" height=\"20\">\n                        <use href=\"./images/blocks.svg#icon-books-cl\"></use>\n                      </svg>\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </li>\n        `;\n      })\n      .join('');\n    document.querySelectorAll('.remove_book').forEach(b => {\n      b.addEventListener('click', removeBookFromFavorite);\n    });\n  }\n}\n\nfunction removeBookFromFavorite(e) {\n  const id = e.target.getAttribute('data-id');\n  console.log(id);\n  // const updatedBooks = shoppingListArray.filter(b => b.id !== id);\n  // console.log(updatedBooks);\n  const updatedBooks = shoppingListArray.map(book => {\n    if (book.id === id) {\n      shoppingListArray.splice(id, 1);\n      localStorage.setItem('shoppingList', JSON.stringify(shoppingListArray));\n    }\n    console.log(shoppingListArray);\n    options.totalItems = JSON.parse(\n      localStorage.getItem('shoppingList')\n    ).length;\n    paginator = new Pagination(container, options);\n    if (options.totalItems <= 3) {\n      document.querySelector('.tui-pagination').style.display = 'none';\n    } else {\n      document.querySelector('.tui-pagination').style.display = 'block';\n    }\n  });\n  // localStorage.setItem('shoppingList', JSON.stringify(updatedBooks));\n  selectedBooks = selectedBooks.filter(b => b._id !== id);\n  updateBooksOnPage(paginator.getCurrentPage());\n}\n\n(async () => {\n  const books = await bookApi.getTopBooksList();\n  const selectedId = shoppingListArray.map(b => b.id);\n  selectedBooks = books.reduce((acc, b) => {\n    b.books.forEach(book => {\n      if (selectedId.includes(book._id)) {\n        acc.push(book);\n      }\n    });\n    return acc;\n  }, []);\n  console.log(selectedBooks);\n\n  options = {\n    totalItems: selectedBooks.length,\n    itemsPerPage: booksPerPage,\n    visiblePages: 10,\n    page: 1,\n    centerAlign: false,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  if (selectedBooks.length <= 3) {\n    document.querySelector('.tui-pagination').style.display = 'none';\n  } else {\n    document.querySelector('.tui-pagination').style.display = 'block';\n  }\n  paginator = new Pagination(container, options);\n  paginator.getCurrentPage();\n  updateBooksOnPage(paginator.getCurrentPage());\n  paginator.on('afterMove', ({ page }) => updateBooksOnPage(page));\n\n  renderFavorites();\n})();\n"],"names":[],"version":3,"file":"shopping-list.7f1136e1.js.map"}