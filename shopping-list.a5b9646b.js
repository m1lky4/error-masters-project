!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var r={},a={},o=t.parcelRequire64ec;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire64ec=o),o.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}})),o.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),o.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),o.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),o.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),o.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==r.default(t)&&"function"!=typeof t?n.default(e):t};var n=i(o("ds8z5")),r=i(o("l5bVx"));function i(e){return e&&e.__esModule?e:{default:e}}})),o.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),o.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),o.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),o.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=o("8NIkP"))&&n.__esModule?n:{default:n}})),o.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}})),o.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return r.default(e)};var n,r=(n=o("8NIkP"))&&n.__esModule?n:{default:n}})),o.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),o.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),o.register("ge8co",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){return a.apply(null,arguments)};var n,r=(n=o("gD1JV"))&&n.__esModule?n:{default:n};function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return(a=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r.default(a,n.prototype),a}).apply(null,arguments)}})),o.register("cZGw3",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}})),o.register("2mz0K",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r.default(e)););return e};var n,r=(n=o("fVNic"))&&n.__esModule?n:{default:n}}));var u={};function s(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}};var c={},l=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(c);try{regeneratorRuntime=l}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var h={};function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,n){t&&d(e.prototype,t);n&&d(e,n);return e};var v=o("l5bVx");function p(e,t){return function(){return e.apply(t,arguments)}}var y,m=Object.prototype.toString,g=Object.getPrototypeOf,k=(y=Object.create(null),function(e){var t=m.call(e);return y[t]||(y[t]=t.slice(8,-1).toLowerCase())}),w=function(e){return e=e.toLowerCase(),function(t){return k(t)===e}},b=function(t){return function(n){return(void 0===n?"undefined":e(v)(n))===t}},_=Array.isArray,x=b("undefined");var I=w("ArrayBuffer");var E=b("string"),T=b("function"),S=b("number"),A=function(e){return null!==e&&"object"==typeof e},C=function(e){if("object"!==k(e))return!1;var t=g(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},R=w("Date"),N=w("File"),O=w("Blob"),D=w("FileList"),P=w("URLSearchParams");function L(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!=e)if("object"!=typeof e&&(e=[e]),_(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var u,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)u=s[n],t.call(null,e[u],u,e)}}function M(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t,F=function(e){return!x(e)&&e!==U};var V,B,j=(V="undefined"!=typeof Uint8Array&&g(Uint8Array),function(e){return V&&e instanceof V}),q=w("HTMLFormElement"),z=(B=Object.prototype.hasOwnProperty,function(e,t){return B.call(e,t)}),G=w("RegExp"),K=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};L(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},H="abcdefghijklmnopqrstuvwxyz",W="0123456789",Q={DIGIT:W,ALPHA:H,ALPHA_DIGIT:H+H.toUpperCase()+W};var J=w("AsyncFunction"),X={isArray:_,isArrayBuffer:I,isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&T(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||T(e.append)&&("formdata"===(t=k(e))||"object"===t&&T(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&I(e.buffer)},isString:E,isNumber:S,isBoolean:function(e){return!0===e||!1===e},isObject:A,isPlainObject:C,isUndefined:x,isDate:R,isFile:N,isBlob:O,isRegExp:G,isFunction:T,isStream:function(e){return A(e)&&T(e.pipe)},isURLSearchParams:P,isTypedArray:j,isFileList:D,forEach:L,merge:function e(){for(var t=(F(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&M(n,i)||i;C(n[a])&&C(r)?n[a]=e(n[a],r):C(r)?n[a]=e({},r):_(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&L(arguments[i],r);return n},extend:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys;return L(t,(function(t,r){n&&T(t)?e[r]=p(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&g(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:k,kindOfTest:w,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(_(e))return e;var t=e.length;if(!S(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:q,hasOwnProperty:z,hasOwnProp:z,reduceDescriptors:K,freezeMethods:function(e){K(e,(function(t,n){if(T(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];T(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return _(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:M,global:U,isContextDefined:F,ALPHABET:Q,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&T(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if(A(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var i=_(e)?[]:{};return L(e,(function(e,t){var a=n(e,r+1);!x(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:J,isThenable:function(e){return e&&(A(e)||T(e))&&T(e.then)&&T(e.catch)}};function Y(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}X.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $=Y.prototype,Z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Z[e]={value:e}})),Object.defineProperties(Y,Z),Object.defineProperty($,"isAxiosError",{value:!0}),Y.from=function(e,t,n,r,i,a){var o=Object.create($);return X.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Y.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ee=Y,te=o("ds8z5"),ne={};Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie.default(e,t)};var re,ie=(re=o("gD1JV"))&&re.__esModule?re:{default:re};v=o("l5bVx");var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=function(e){var t=ce.default();return function(){var n,r=le.default(e);if(t){var i=le.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fe.default(this,n)}};var oe,ue,se,ce=he(o("aTHs7")),le=he(o("fVNic")),fe=he(o("jmhxu"));function he(e){return e&&e.__esModule?e:{default:e}}ue=function(e){var t,n,r=be(e),i=r[0],a=r[1],o=new me(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),u=0,s=a>0?i-4:i;for(n=0;n<s;n+=4)t=ye[e.charCodeAt(n)]<<18|ye[e.charCodeAt(n+1)]<<12|ye[e.charCodeAt(n+2)]<<6|ye[e.charCodeAt(n+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;2===a&&(t=ye[e.charCodeAt(n)]<<2|ye[e.charCodeAt(n+1)]>>4,o[u++]=255&t);1===a&&(t=ye[e.charCodeAt(n)]<<10|ye[e.charCodeAt(n+1)]<<4|ye[e.charCodeAt(n+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t);return o},se=function(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,u=n-r;o<u;o+=a)i.push(_e(e,o,o+a>u?u:o+a));1===r?(t=e[n-1],i.push(pe[t>>2]+pe[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(pe[t>>10]+pe[t>>4&63]+pe[t<<2&63]+"="));return i.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var de,ve,pe=[],ye=[],me="undefined"!=typeof Uint8Array?Uint8Array:Array,ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ke=0,we=ge.length;ke<we;++ke)pe[ke]=ge[ke],ye[ge.charCodeAt(ke)]=ke;function be(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function _e(e,t,n){for(var r,i,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(pe[(i=r)>>18&63]+pe[i>>12&63]+pe[i>>6&63]+pe[63&i]);return a.join("")}ye["-".charCodeAt(0)]=62,ye["_".charCodeAt(0)]=63,de=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===s)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},ve=function(e,t,n,r,i,a){var o,u,s,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,v=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(t*s-1)*Math.pow(2,i),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&u,d+=v,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;e[n+d]=255&o,d+=v,o/=256,c-=8);e[n+d-v]|=128*p};var xe="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;oe=Te;var Ie=2147483647;function Ee(e){if(e>Ie)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,Te.prototype),t}function Te(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return Ce(e)}return Se(e,t,n)}function Se(t,n,r){if("string"==typeof t)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Te.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|De(e,t),r=Ee(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(t,n);if(ArrayBuffer.isView(t))return function(e){if(dt(e,Uint8Array)){var t=new Uint8Array(e);return Ne(t.buffer,t.byteOffset,t.byteLength)}return Re(e)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(v)(t)));if(dt(t,ArrayBuffer)||t&&dt(t.buffer,ArrayBuffer))return Ne(t,n,r);if("undefined"!=typeof SharedArrayBuffer&&(dt(t,SharedArrayBuffer)||t&&dt(t.buffer,SharedArrayBuffer)))return Ne(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return Te.from(i,n,r);var a=function(e){if(Te.isBuffer(e)){var t=0|Oe(e.length),n=Ee(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||vt(e.length)?Ee(0):Re(e);if("Buffer"===e.type&&Array.isArray(e.data))return Re(e.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Te.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(v)(t)))}function Ae(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Ce(e){return Ae(e),Ee(e<0?0:0|Oe(e))}function Re(e){for(var t=e.length<0?0:0|Oe(e.length),n=Ee(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function Ne(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Te.prototype),r}function Oe(e){if(e>=Ie)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ie.toString(16)+" bytes");return 0|e}function De(t,n){if(Te.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||dt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===t?"undefined":e(v)(t)));var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return lt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ft(t).length;default:if(a)return i?-1:lt(t).length;n=(""+n).toLowerCase(),a=!0}}function Pe(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Qe(this,t,n);case"utf8":case"utf-8":return Ge(this,t,n);case"ascii":return He(this,t,n);case"latin1":case"binary":return We(this,t,n);case"base64":return ze(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Je(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Le(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Me(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),vt(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Te.from(t,r)),Te.isBuffer(t))return 0===t.length?-1:Ue(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ue(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Ue(e,t,n,r,i){var a,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,h=0;h<s;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function Fe(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(vt(u))return a;e[n+a]=u}return a}function Ve(e,t,n,r){return ht(lt(t,e.length-n),e,n,r)}function Be(e,t,n,r){return ht(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function je(e,t,n,r){return ht(ft(t),e,n,r)}function qe(e,t,n,r){return ht(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function ze(e,t,n){return 0===t&&n===e.length?se(e):se(e.slice(t,n))}function Ge(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,u=a>239?4:a>223?3:a>191?2:1;if(i+u<=n){var s=void 0,c=void 0,l=void 0,f=void 0;switch(u){case 1:a<128&&(o=a);break;case 2:128==(192&(s=e[i+1]))&&(f=(31&a)<<6|63&s)>127&&(o=f);break;case 3:s=e[i+1],c=e[i+2],128==(192&s)&&128==(192&c)&&(f=(15&a)<<12|(63&s)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:s=e[i+1],c=e[i+2],l=e[i+3],128==(192&s)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&s)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return function(e){var t=e.length;if(t<=Ke)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Ke));return n}(r)}Te.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Te.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Te.prototype,"parent",{enumerable:!0,get:function(){if(Te.isBuffer(this))return this.buffer}}),Object.defineProperty(Te.prototype,"offset",{enumerable:!0,get:function(){if(Te.isBuffer(this))return this.byteOffset}}),Te.poolSize=8192,Te.from=function(e,t,n){return Se(e,t,n)},Object.setPrototypeOf(Te.prototype,Uint8Array.prototype),Object.setPrototypeOf(Te,Uint8Array),Te.alloc=function(e,t,n){return function(e,t,n){return Ae(e),e<=0?Ee(e):void 0!==t?"string"==typeof n?Ee(e).fill(t,n):Ee(e).fill(t):Ee(e)}(e,t,n)},Te.allocUnsafe=function(e){return Ce(e)},Te.allocUnsafeSlow=function(e){return Ce(e)},Te.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Te.prototype},Te.compare=function(e,t){if(dt(e,Uint8Array)&&(e=Te.from(e,e.offset,e.byteLength)),dt(t,Uint8Array)&&(t=Te.from(t,t.offset,t.byteLength)),!Te.isBuffer(e)||!Te.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Te.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Te.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Te.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Te.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(dt(a,Uint8Array))i+a.length>r.length?(Te.isBuffer(a)||(a=Te.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!Te.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},Te.byteLength=De,Te.prototype._isBuffer=!0,Te.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Le(this,t,t+1);return this},Te.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Le(this,t,t+3),Le(this,t+1,t+2);return this},Te.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Le(this,t,t+7),Le(this,t+1,t+6),Le(this,t+2,t+5),Le(this,t+3,t+4);return this},Te.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Ge(this,0,e):Pe.apply(this,arguments)},Te.prototype.toLocaleString=Te.prototype.toString,Te.prototype.equals=function(e){if(!Te.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Te.compare(this,e)},Te.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},xe&&(Te.prototype[xe]=Te.prototype.inspect),Te.prototype.compare=function(t,n,r,i,a){if(dt(t,Uint8Array)&&(t=Te.from(t,t.offset,t.byteLength)),!Te.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===t?"undefined":e(v)(t)));if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(this===t)return 0;for(var o=(a>>>=0)-(i>>>=0),u=(r>>>=0)-(n>>>=0),s=Math.min(o,u),c=this.slice(i,a),l=t.slice(n,r),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],u=l[f];break}return o<u?-1:u<o?1:0},Te.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Te.prototype.indexOf=function(e,t,n){return Me(this,e,t,n,!0)},Te.prototype.lastIndexOf=function(e,t,n){return Me(this,e,t,n,!1)},Te.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return Fe(this,e,t,n);case"utf8":case"utf-8":return Ve(this,e,t,n);case"ascii":case"latin1":case"binary":return Be(this,e,t,n);case"base64":return je(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},Te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ke=4096;function He(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function We(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Qe(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=pt[e[a]];return i}function Je(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function Xe(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ye(e,t,n,r,i,a){if(!Te.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $e(e,t,n,r,i){ot(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function Ze(e,t,n,r,i){ot(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function et(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function tt(e,t,n,r,i){return t=+t,n>>>=0,i||et(e,0,n,4),ve(e,t,n,r,23,4),n+4}function nt(e,t,n,r,i){return t=+t,n>>>=0,i||et(e,0,n,8),ve(e,t,n,r,52,8),n+8}Te.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,Te.prototype),r},Te.prototype.readUintLE=Te.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Xe(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},Te.prototype.readUintBE=Te.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Xe(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Te.prototype.readUint8=Te.prototype.readUInt8=function(e,t){return e>>>=0,t||Xe(e,1,this.length),this[e]},Te.prototype.readUint16LE=Te.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Xe(e,2,this.length),this[e]|this[e+1]<<8},Te.prototype.readUint16BE=Te.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Xe(e,2,this.length),this[e]<<8|this[e+1]},Te.prototype.readUint32LE=Te.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Te.prototype.readUint32BE=Te.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Te.prototype.readBigUInt64LE=yt((function(e){ut(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||st(e,this.length-8);var r=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),i=this[++e]+256*this[++e]+65536*this[++e]+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),Te.prototype.readBigUInt64BE=yt((function(e){ut(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||st(e,this.length-8);var r=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),Te.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Xe(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Te.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Xe(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Te.prototype.readInt8=function(e,t){return e>>>=0,t||Xe(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Te.prototype.readInt16LE=function(e,t){e>>>=0,t||Xe(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Te.prototype.readInt16BE=function(e,t){e>>>=0,t||Xe(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Te.prototype.readInt32LE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Te.prototype.readInt32BE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Te.prototype.readBigInt64LE=yt((function(e){ut(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||st(e,this.length-8);var r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))})),Te.prototype.readBigInt64BE=yt((function(e){ut(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||st(e,this.length-8);var r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n)})),Te.prototype.readFloatLE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),de(this,e,!0,23,4)},Te.prototype.readFloatBE=function(e,t){return e>>>=0,t||Xe(e,4,this.length),de(this,e,!1,23,4)},Te.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Xe(e,8,this.length),de(this,e,!0,52,8)},Te.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Xe(e,8,this.length),de(this,e,!1,52,8)},Te.prototype.writeUintLE=Te.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ye(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},Te.prototype.writeUintBE=Te.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ye(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},Te.prototype.writeUint8=Te.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,1,255,0),this[t]=255&e,t+1},Te.prototype.writeUint16LE=Te.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Te.prototype.writeUint16BE=Te.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Te.prototype.writeUint32LE=Te.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Te.prototype.writeUint32BE=Te.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Te.prototype.writeBigUInt64LE=yt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return $e(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Te.prototype.writeBigUInt64BE=yt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ze(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Te.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ye(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},Te.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ye(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},Te.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Te.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Te.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Te.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Te.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ye(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Te.prototype.writeBigInt64LE=yt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return $e(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Te.prototype.writeBigInt64BE=yt((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ze(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Te.prototype.writeFloatLE=function(e,t,n){return tt(this,e,t,!0,n)},Te.prototype.writeFloatBE=function(e,t,n){return tt(this,e,t,!1,n)},Te.prototype.writeDoubleLE=function(e,t,n){return nt(this,e,t,!0,n)},Te.prototype.writeDoubleBE=function(e,t,n){return nt(this,e,t,!1,n)},Te.prototype.copy=function(e,t,n,r){if(!Te.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Te.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Te.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=Te.isBuffer(e)?e:Te.from(e,r),u=o.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var rt={};function it(t,n,r){rt[t]=function(r){e(ne)(a,r);var i=e(ae)(a);function a(){var r;return e(f)(this,a),r=i.call(this),Object.defineProperty(e(te)(r),"message",{value:n.apply(e(te)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return e(h)(a,[{key:"code",get:function(){return t},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),a}(r)}function at(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function ot(t,n,r,i,a,o){if(t>r||t<n){var u,s="bigint"===(void 0===n?"undefined":e(v)(n))?"n":"";throw u=o>3?0===n||n===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(n).concat(s," and <= ").concat(r).concat(s),new rt.ERR_OUT_OF_RANGE("value",u,t)}!function(e,t,n){ut(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||st(t,e.length-(n+1))}(i,a,o)}function ut(e,t){if("number"!=typeof e)throw new rt.ERR_INVALID_ARG_TYPE(t,"number",e)}function st(e,t,n){if(Math.floor(e)!==e)throw ut(e,n),new rt.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new rt.ERR_BUFFER_OUT_OF_BOUNDS;throw new rt.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}it("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),it("ERR_INVALID_ARG_TYPE",(function(t,n){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(void 0===n?"undefined":e(v)(n))}),TypeError),it("ERR_OUT_OF_RANGE",(function(t,n,r){var i='The value of "'.concat(t,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=at(String(r)):"bigint"===(void 0===r?"undefined":e(v)(r))&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=at(a)),a+="n"),i+=" It must be ".concat(n,". Received ").concat(a)}),RangeError);var ct=/[^+/0-9A-Za-z-_]/g;function lt(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function ft(e){return ue(function(e){if((e=(e=e.split("=")[0]).trim().replace(ct,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ht(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function dt(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function vt(e){return e!=e}var pt=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function yt(e){return"undefined"==typeof BigInt?mt:e}function mt(){throw new Error("BigInt not supported")}var gt=oe;function kt(e){return X.isPlainObject(e)||X.isArray(e)}function wt(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function bt(e,t,n){return e?e.concat(t).map((function(e,t){return e=wt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var _t=X.toFlatObject(X,{},null,(function(e){return/^is[A-Z]/.test(e)}));var xt=function(e,t,n){if(!X.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!X.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!=typeof Blob&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(X.isDate(e))return e.toISOString();if(!u&&X.isBlob(e))throw new ee("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(e)||X.isTypedArray(e)?u&&"function"==typeof Blob?new Blob([e]):gt.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"==typeof e)if(X.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(X.isArray(e)&&function(e){return X.isArray(e)&&!e.some(kt)}(e)||(X.isFileList(e)||X.endsWith(n,"[]"))&&(u=X.toArray(e)))return n=wt(n),u.forEach((function(e,r){!X.isUndefined(e)&&null!==e&&t.append(!0===o?bt([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!kt(e)||(t.append(bt(i,n,a),s(e)),!1)}var l=[],f=Object.assign(_t,{defaultVisitor:c,convertValue:s,isVisitable:kt});if(!X.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!X.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),X.forEach(n,(function(n,a){!0===(!(X.isUndefined(n)||null===n)&&i.call(t,n,X.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function It(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Et(e,t){this._pairs=[],e&&xt(e,this,t)}var Tt=Et.prototype;Tt.append=function(e,t){this._pairs.push([e,t])},Tt.toString=function(e){var t=e?function(t){return e.call(this,t,It)}:It;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var St=Et;function At(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ct(e,t,n){if(!t)return e;var r,i=n&&n.encode||At,a=n&&n.serialize;if(r=a?a(t,n):X.isURLSearchParams(t)?t.toString():new St(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Rt,Nt=function(){function t(){e(f)(this,t),this.handlers=[]}return e(h)(t,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){X.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),t}(),Ot={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:St,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(Rt=navigator.product)&&"NativeScript"!==Rt&&"NS"!==Rt)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Pt(e,t){return xt(e,new Dt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Dt.isNode&&X.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}var Lt=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&X.isArray(r)?r.length:a,u?(X.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&X.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&X.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(X.isFormData(e)&&X.isFunction(e.entries)){var n={};return X.forEachEntry(e,(function(e,r){t(function(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},Mt={"Content-Type":void 0};var Ut={transitional:Ot,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=X.isObject(e);if(a&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i&&i?JSON.stringify(Lt(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Pt(e,this.formSerializer).toString();if((n=X.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return xt(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(X.isString(e))try{return(t||JSON.parse)(e),X.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Ut.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&X.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw ee.from(e,ee.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};X.forEach(["delete","get","head"],(function(e){Ut.headers[e]={}})),X.forEach(["post","put","patch"],(function(e){Ut.headers[e]=X.merge(Mt)}));var Ft=Ut,Vt={};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=function(e,t){return Bt.default(e)||jt.default(e,t)||zt.default(e,t)||qt.default()};var Bt=Gt(o("8slrw")),jt=Gt(o("7AJDX")),qt=Gt(o("ifqQW")),zt=Gt(o("auk6i"));function Gt(e){return e&&e.__esModule?e:{default:e}}var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=function(e){return Ht.default(e)||Wt.default(e)||Jt.default(e)||Qt.default()};var Ht=Xt(o("kMC0W")),Wt=Xt(o("7AJDX")),Qt=Xt(o("8CtQK")),Jt=Xt(o("auk6i"));function Xt(e){return e&&e.__esModule?e:{default:e}}var Yt=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$t=function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Yt[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i},Zt=Symbol("internals");function en(e){return e&&String(e).trim().toLowerCase()}function tn(e){return!1===e||null==e?e:X.isArray(e)?e.map(tn):String(e)}function nn(e,t,n,r,i){return X.isFunction(r)?r.call(this,t,n):(i&&(t=n),X.isString(t)?X.isString(r)?-1!==t.indexOf(r):X.isRegExp(r)?r.test(t):void 0:void 0)}var rn=Symbol.iterator,an=Symbol.toStringTag,on=function(){function t(n){e(f)(this,t),n&&this.set(n)}return e(h)(t,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=en(t);if(!i)throw new Error("header name must be a non-empty string");var a=X.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=tn(e))}var a=function(e,t){return X.forEach(e,(function(e,n){return i(e,n,t)}))};return X.isPlainObject(e)||e instanceof this.constructor?a(e,t):X.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a($t(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=en(e)){var n=X.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(X.isFunction(t))return t.call(this,r,n);if(X.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=en(e)){var n=X.findKey(this,e);return!(!n||void 0===this[n]||t&&!nn(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=en(e)){var i=X.findKey(n,e);!i||t&&!nn(0,n[i],i,t)||(delete n[i],r=!0)}}return X.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!nn(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return X.forEach(this,(function(r,i){var a=X.findKey(n,i);if(a)return t[a]=tn(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=tn(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;return(i=this.constructor).concat.apply(i,[this].concat(e(Kt)(n)))}},{key:"toJSON",value:function(e){var t=Object.create(null);return X.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&X.isArray(n)?n.join(", "):n)})),t}},{key:rn,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var n=e(Vt)(t,2);return n[0]+": "+n[1]})).join("\n")}},{key:an,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new this(e);return n.forEach((function(e){return i.set(e)})),i}},{key:"accessor",value:function(e){var t=(this[Zt]=this[Zt]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=en(e);t[r]||(!function(e,t){var n=X.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return X.isArray(e)?e.forEach(r):r(e),this}}]),t}();on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.freezeMethods(on.prototype),X.freezeMethods(on);var un=on;function sn(e,t){var n=this||Ft,r=t||n,i=un.from(r.headers),a=r.data;return X.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function cn(e){return!(!e||!e.__CANCEL__)}function ln(e,t,n){ee.call(this,null==e?"canceled":e,ee.ERR_CANCELED,t,n),this.name="CanceledError"}X.inherits(ln,ee,{__CANCEL__:!0});var fn=ln;function hn(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ee("Request failed with status code "+n.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var dn=Dt.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),X.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),X.isString(r)&&o.push("path="+r),X.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function vn(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function pn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?vn(e,t):t}var yn=Dt.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=X.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var mn=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function gn(e,t){var n=0,r=mn(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var kn={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=un.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}X.isFormData(i)&&(Dt.isStandardBrowserEnv||Dt.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=pn(e.baseURL,e.url);function h(){if(s){var r=un.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());hn((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),Ct(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new ee("Request aborted",ee.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new ee("Network Error",ee.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Ot;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ee(t,r.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,e,s)),s=null},Dt.isStandardBrowserEnv){var d=(e.withCredentials||yn(f))&&e.xsrfCookieName&&dn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&X.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),X.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",gn(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",gn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new fn(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var v,p=(v=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&v[1]||"";p&&-1===Dt.protocols.indexOf(p)?n(new ee("Unsupported protocol "+p+":",ee.ERR_BAD_REQUEST,e)):s.send(i||null)}))}};X.forEach(kn,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var wn={getAdapter:function(e){for(var t,n,r=(e=X.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=X.isString(t)?kn[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new ee("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(X.hasOwnProp(kn,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!X.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:kn};function bn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fn(null,e)}function _n(e){return bn(e),e.headers=un.from(e.headers),e.data=sn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wn.getAdapter(e.adapter||Ft.adapter)(e).then((function(t){return bn(e),t.data=sn.call(e,e.transformResponse,t),t.headers=un.from(t.headers),t}),(function(t){return cn(t)||(bn(e),t&&t.response&&(t.response.data=sn.call(e,e.transformResponse,t.response),t.response.headers=un.from(t.response.headers))),Promise.reject(t)}))}var xn=function(e){return e instanceof un?e.toJSON():e};function In(e,t){t=t||{};var n={};function r(e,t,n){return X.isPlainObject(e)&&X.isPlainObject(t)?X.merge.call({caseless:n},e,t):X.isPlainObject(t)?X.merge({},t):X.isArray(t)?t.slice():t}function i(e,t,n){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!X.isUndefined(t))return r(void 0,t)}function o(e,t){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(xn(e),xn(t),!0)}};return X.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);X.isUndefined(o)&&a!==u||(n[r]=o)})),n}v=o("l5bVx");var En="1.4.0",Tn={};["object","boolean","number","function","string","symbol"].forEach((function(t,n){Tn[t]=function(r){return(void 0===r?"undefined":e(v)(r))===t||"a"+(n<1?"n ":" ")+t}}));var Sn={};Tn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new ee(r(i," has been removed"+(t?" in "+t:"")),ee.ERR_DEPRECATED);return t&&!Sn[i]&&(Sn[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var An={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new ee("option "+a+" must be "+s,ee.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ee("Unknown option "+a,ee.ERR_BAD_OPTION)}},validators:Tn},Cn=An.validators,Rn=function(){function t(n){e(f)(this,t),this.defaults=n,this.interceptors={request:new Nt,response:new Nt}}return e(h)(t,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n,r=(t=In(this.defaults,t)).transitional,i=t.paramsSerializer,a=t.headers;void 0!==r&&An.assertOptions(r,{silentJSONParsing:Cn.transitional(Cn.boolean),forcedJSONParsing:Cn.transitional(Cn.boolean),clarifyTimeoutError:Cn.transitional(Cn.boolean)},!1),null!=i&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:An.assertOptions(i,{encode:Cn.function,serialize:Cn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=a&&X.merge(a.common,a[t.method]))&&X.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=un.concat(n,a);var o=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,f=0;if(!u){var h=[_n.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),l=h.length,s=Promise.resolve(t);f<l;)s=s.then(h[f++],h[f++]);return s}l=o.length;var d=t;for(f=0;f<l;){var v=o[f++],p=o[f++];try{d=v(d)}catch(e){p.call(this,e);break}}try{s=_n.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,l=c.length;f<l;)s=s.then(c[f++],c[f++]);return s}},{key:"getUri",value:function(e){return Ct(pn((e=In(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),t}();X.forEach(["delete","get","head","options"],(function(e){Rn.prototype[e]=function(t,n){return this.request(In(n||{},{method:e,url:t,data:(n||{}).data}))}})),X.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(In(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Rn.prototype[e]=t(),Rn.prototype[e+"Form"]=t(!0)}));var Nn=Rn,On=function(){function t(n){if(e(f)(this,t),"function"!=typeof n)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},n((function(e,t,n){i.reason||(i.reason=new fn(e,t,n),r(i.reason))}))}return e(h)(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Dn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dn).forEach((function(t){var n=e(Vt)(t,2),r=n[0],i=n[1];Dn[i]=r}));var Pn=Dn;var Ln=function e(t){var n=new Nn(t),r=p(Nn.prototype.request,n);return X.extend(r,Nn.prototype,n,{allOwnKeys:!0}),X.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(In(t,n))},r}(Ft);Ln.Axios=Nn,Ln.CanceledError=fn,Ln.CancelToken=On,Ln.isCancel=cn,Ln.VERSION=En,Ln.toFormData=xt,Ln.AxiosError=ee,Ln.Cancel=Ln.CanceledError,Ln.all=function(e){return Promise.all(e)},Ln.spread=function(e){return function(t){return e.apply(null,t)}},Ln.isAxiosError=function(e){return X.isObject(e)&&!0===e.isAxiosError},Ln.mergeConfig=In,Ln.AxiosHeaders=un,Ln.formToJSON=function(e){return Lt(X.isHTMLForm(e)?new FormData(e):e)},Ln.HttpStatusCode=Pn,Ln.default=Ln;var Mn=Ln;Mn.Axios,Mn.AxiosError,Mn.CanceledError,Mn.isCancel,Mn.CancelToken,Mn.VERSION,Mn.all,Mn.Cancel,Mn.isAxiosError,Mn.spread,Mn.toFormData,Mn.AxiosHeaders,Mn.HttpStatusCode,Mn.formToJSON,Mn.mergeConfig;Mn.defaults.baseURL="https://books-backend.p.goit.global/books";var Un=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"getBooksCategoryList",value:function(){return e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mn.get("/category-list");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))()}},{key:"getTopBooksList",value:function(){return e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mn.get("/top-books");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))()}},{key:"getBooksWithSelectedCategory",value:function(t){return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mn.get("/category?category=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),n,null,[[0,7]])})))()}},{key:"getBookByID",value:function(t){return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mn.get("/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),n,null,[[0,7]])})))()}}]),t}();function Fn(e){return e.map((function(e){return'<li class="book-item" data-id=\''.concat(e._id,'\'>\n      <div class="scale-images mask mask-one mask-one-frame">\n        <img\n          class="book-images mask-img"\n          src="').concat(e.book_image,'"\n          alt="').concat(e.title,'"\n        />\n        <p class="quick-view">quick view</p>\n        </div>\n        <h3 class="book-full-name">').concat(e.title,'</h3>\n        <p class="book-author">').concat(e.author,"</p>\n      </li>")})).join("")}function Vn(e){var t=e.split(" "),n=t.length-1;return t.map((function(e,t){return n===t?'<span class="violet">'.concat(e,"</span>"):e})).join(" ")}var Bn=new Un,jn=document.querySelector(".list-categories"),qn=document.querySelector(".category-markup-list"),zn=document.querySelector(".title-category-markup");function Gn(){return(Gn=e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.getBooksCategoryList();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",console.log("Error"));case 5:jn.insertAdjacentHTML("beforeend",Hn(n));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Kn(){return(Kn=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("LI"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return r=n.target.textContent,e.next=5,Bn.getBooksWithSelectedCategory(r);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",console.log("Error"));case 8:qn.innerHTML=Fn(i),zn.innerHTML=Vn(r),jn.querySelector(".active")&&jn.querySelector(".active").classList.remove("active"),n.target.classList.add("active");case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Hn(e){return e.map((function(e){return'<li class="categories-item">'.concat(e.list_name,"</li>")})).join("")}!function(){Gn.apply(this,arguments)}(),jn.addEventListener("click",(function(e){return Kn.apply(this,arguments)}));var Wn=new Un,Qn=document.querySelector(".modal"),Jn=document.querySelector(".backdrop"),Xn=(document.querySelector("button[data-modal-open-btn]"),document.querySelector("button[data-modal-close-btn]")),Yn=document.querySelector(".modal-img"),$n=document.querySelector(".modal-text"),Zn=document.querySelector(".modal-shop-list");function er(){Jn.classList.remove("is-hidden"),Qn.classList.remove("is-hidden"),Jn.addEventListener("click",nr),Xn.addEventListener("click",tr),document.addEventListener("keydown",rr)}function tr(){Jn.classList.add("is-hidden"),Qn.classList.add("is-hidden"),Jn.removeEventListener("click",tr),Xn.removeEventListener("click",tr),document.removeEventListener("keydown",rr)}function nr(e){e.target===Jn&&tr()}function rr(e){"Escape"===e.key&&tr()}function ir(e){(console.log(e.target.closest("li")),e.target.closest("li").classList.contains("book-item"))&&function(e){ar.apply(this,arguments)}(e.target.closest("li").getAttribute("data-id"))}function ar(){return(ar=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wn.getBookByID(n);case 3:r=e.sent,console.log(r),r?(Yn.innerHTML='<img src="'.concat(r.book_image,'" alt="').concat(r.title,'" class="modal-book-img"/>'),$n.innerHTML='\n        <h3 class="modal-book-title">'.concat(r.title,'</h3>\n        <p class="modal-book-author"> ').concat(r.author,'</p>\n        <p class="modal-book-desc">').concat(r.description,"</p>\n      "),(i=Zn.getElementsByTagName("li"))[0].querySelector("a").href=r.buy_links[0].url,i[1].querySelector("a").href=r.buy_links[1].url,i[2].querySelector("a").href=r.buy_links[4].url,er()):console.error("File not found."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error in getting data:",e.t0);case 11:case"end":return e.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}var or=document.getElementById("support-slider"),ur=document.getElementById("support-slider-up"),sr=document.getElementById("support-list-id");function cr(e,t){return e.map((function(e){var n=e.list_name,r=e.books;return'\n        <li class="category-markup-item">\n            <p class="category-markup-subtitle">\n              '.concat(n,'\n            </p>\n            <ul class="books-list-markup">\n            ').concat(Fn(r.slice(0,t)),'\n            </ul>\n            <button class="category-markup-button" type="submit">\n              <span>See more</span>\n            </button>\n          </li>\n        ')})).join("")}or.addEventListener("click",(function(){sr.children[8].scrollIntoView({behavior:"smooth"}),or.style.display="none",ur.style.display="flex"})),ur.addEventListener("click",(function(){sr.children[0].scrollIntoView({behavior:"smooth"}),or.style.display="flex",ur.style.display="none"}));v=o("l5bVx");var lr,fr,hr=/^\s+|\s+$/g,dr=/^[-+]0x[0-9a-f]+$/i,vr=/^0b[01]+$/i,pr=/^0o[0-7]+$/i,yr=parseInt,mr="object"==typeof t&&t&&t.Object===Object&&t,gr="object"==typeof self&&self&&self.Object===Object&&self,kr=mr||gr||Function("return this")(),wr=Object.prototype.toString,br=Math.max,_r=Math.min,xr=function(){return kr.Date.now()};function Ir(t){var n=void 0===t?"undefined":e(v)(t);return!!t&&("object"==n||"function"==n)}function Er(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(v)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==wr.call(t)}(t))return NaN;if(Ir(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Ir(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(hr,"");var r=vr.test(t);return r||pr.test(t)?yr(t.slice(2),r?2:8):dr.test(t)?NaN:+t}lr=function(e,t,n){var r,i,a,o,u,s,c=0,l=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function v(e){return c=e,u=setTimeout(y,t),l?d(e):o}function p(e){var n=e-s;return void 0===s||n>=t||n<0||f&&e-c>=a}function y(){var e=xr();if(p(e))return m(e);u=setTimeout(y,function(e){var n=t-(e-s);return f?_r(n,a-(e-c)):n}(e))}function m(e){return u=void 0,h&&r?d(e):(r=i=void 0,o)}function g(){var e=xr(),n=p(e);if(r=arguments,i=this,s=e,n){if(void 0===u)return v(s);if(f)return u=setTimeout(y,t),d(s)}return void 0===u&&(u=setTimeout(y,t)),o}return t=Er(t)||0,Ir(n)&&(l=!!n.leading,a=(f="maxWait"in n)?br(Er(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==u&&clearTimeout(u),c=0,r=s=i=u=void 0},g.flush=function(){return void 0===u?o:m(xr())},g};var Tr,Sr=new Un;function Ar(e,t){var n=cr(e,t),r=document.querySelector(".category-markup-list");r.innerHTML=n,r.addEventListener("click",ir)}document.querySelector(".category-markup-list").innerHTML='\n        <ul class="skeleton">\n          '.concat(Array.from({length:15},(function(){return'\n        <div class="col-sm-6 col-md-3">\n    <div class="movie--isloading">\n      <div class="loading-image"></div>\n      <div class="loading-content">\n        <div class="loading-text-container">\n          <div class="loading-main-text"></div>\n          <div class="loading-sub-text"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n        '})).join(""),"\n        </ul>\n    "),window.addEventListener("resize",e(lr)((function(e){e.target.innerWidth<767?Ar(fr,1):e.target.innerWidth>=767&&e.target.innerWidth<=1199?Ar(fr,3):e.target.innerWidth>=1200&&Ar(fr,5)}),300)),window.addEventListener("load",(Tr=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr.getTopBooksList();case 2:if(fr=e.sent){e.next=5;break}return e.abrupt("return",console.log("Error"));case 5:window.innerWidth<767?Ar(fr,1):window.innerWidth>=767&&window.innerWidth<=1199?Ar(fr,3):window.innerWidth>=1200&&Ar(fr,5);case 6:case"end":return e.stop()}}),t)}))),function(e){return Tr.apply(this,arguments)}));var Cr=o("hKHmD"),Rr=(te=o("ds8z5"),{});Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.default=function(e){return Mr(e)};var Nr=Lr(o("ge8co")),Or=Lr(o("cZGw3")),Dr=Lr(o("fVNic")),Pr=Lr(o("gD1JV"));function Lr(e){return e&&e.__esModule?e:{default:e}}function Mr(e){var t="function"==typeof Map?new Map:void 0;return Mr=function(e){if(null===e||!Or.default(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Nr.default(e,arguments,Dr.default(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pr.default(n,e)},Mr(e)}var Ur,Fr,Vr,Br=Ur={};function jr(){throw new Error("setTimeout has not been defined")}function qr(){throw new Error("clearTimeout has not been defined")}function zr(e){if(Fr===setTimeout)return setTimeout(e,0);if((Fr===jr||!Fr)&&setTimeout)return Fr=setTimeout,setTimeout(e,0);try{return Fr(e,0)}catch(t){try{return Fr.call(null,e,0)}catch(t){return Fr.call(this,e,0)}}}!function(){try{Fr="function"==typeof setTimeout?setTimeout:jr}catch(e){Fr=jr}try{Vr="function"==typeof clearTimeout?clearTimeout:qr}catch(e){Vr=qr}}();var Gr,Kr=[],Hr=!1,Wr=-1;function Qr(){Hr&&Gr&&(Hr=!1,Gr.length?Kr=Gr.concat(Kr):Wr=-1,Kr.length&&Jr())}function Jr(){if(!Hr){var e=zr(Qr);Hr=!0;for(var t=Kr.length;t;){for(Gr=Kr,Kr=[];++Wr<t;)Gr&&Gr[Wr].run();Wr=-1,t=Kr.length}Gr=null,Hr=!1,function(e){if(Vr===clearTimeout)return clearTimeout(e);if((Vr===qr||!Vr)&&clearTimeout)return Vr=clearTimeout,clearTimeout(e);try{Vr(e)}catch(t){try{return Vr.call(null,e)}catch(t){return Vr.call(this,e)}}}(e)}}function Xr(e,t){this.fun=e,this.array=t}function Yr(){}Br.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Kr.push(new Xr(e,t)),1!==Kr.length||Hr||zr(Jr)},Xr.prototype.run=function(){this.fun.apply(null,this.array)},Br.title="browser",Br.browser=!0,Br.env={},Br.argv=[],Br.version="",Br.versions={},Br.on=Yr,Br.addListener=Yr,Br.once=Yr,Br.off=Yr,Br.removeListener=Yr,Br.removeAllListeners=Yr,Br.emit=Yr,Br.prependListener=Yr,Br.prependOnceListener=Yr,Br.listeners=function(e){return[]},Br.binding=function(e){throw new Error("process.binding is not supported")},Br.cwd=function(){return"/"},Br.chdir=function(e){throw new Error("process.chdir is not supported")},Br.umask=function(){return 0};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $r=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Zr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($r(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ei;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ei=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="DecodeBase64StringError",t}return r}(e(Rr)(Error)),ti=function(e){return function(e){var t=$r(e);return Zr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ni=function(e){try{return Zr.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ri(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ii=function(){
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ai=function(){try{return ii()||function(){if(void 0!==Ur&&void 0!==Ur.env);}()||function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&ni(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},oi=function(){var e;return null===(e=ai())||void 0===e?void 0:e.config},ui=function(e){var t;return null===(t=ai())||void 0===t?void 0:t["_".concat(e)]},si=function(){"use strict";function t(){var n=this;e(f)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return e(h)(t,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ci(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ti(JSON.stringify({alg:"none",type:"JWT"})),ti(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fi(){var e,n=null===(e=ai())||void 0===e?void 0:e.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function hi(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function di(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vi(){var e=li();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function pi(){try{return"object"==typeof indexedDB}catch(e){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yi=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this,i)).code=t,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf(e(te)(o),r.prototype),Error.captureStackTrace&&Error.captureStackTrace(e(te)(o),mi.prototype.create),o}return r}(e(Rr)(Error)),mi=function(){"use strict";function t(n,r,i){e(f)(this,t),this.service=n,this.serviceName=r,this.errors=i}return e(h)(t,[{key:"create",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0]||{},a="".concat(this.service,"/").concat(e),o=this.errors[e],u=o?gi(o,i):"Error",s="".concat(this.serviceName,": ").concat(u," (").concat(a,")."),c=new yi(a,s,i);return c}}]),t}();function gi(e,t){return e.replace(ki,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ki=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bi(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _i(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t),i=!0,a=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;if(!r.includes(c))return!1;var l=e[c],f=t[c];if(xi(l)&&xi(f)){if(!_i(l,f))return!1}else if(l!==f)return!1}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}var h=!0,d=!1,v=void 0;try{for(var p,y=r[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var m=p.value;if(!n.includes(m))return!1}}catch(e){d=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}return!0}function xi(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ii(t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=function(t,r){var i=e(Vt)(r.value,2),a=i[0],o=i[1];Array.isArray(o)?o.forEach((function(e){n.push(encodeURIComponent(a)+"="+encodeURIComponent(e))})):n.push(encodeURIComponent(a)+"="+encodeURIComponent(o))},s=Object.entries(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u(0,o)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n.length?"&"+n.join("&"):""}function Ei(t){var n={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=e(Vt)(t.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}})),n}function Ti(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(e,t){var n=new Ai(e,t);return n.subscribe.bind(n)}var Ai=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then((function(){n(i)})).catch((function(e){i.error(e)}))}return e(h)(t,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(u in e&&"function"==typeof e[u])return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ci),void 0===r.error&&(r.error=Ci),void 0===r.complete&&(r.complete=Ci);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),t}();function Ci(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ri(e){return e&&e._delegate?e._delegate:e}var Ni=function(){"use strict";function t(n,r,i){e(f)(this,t),this.name=n,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e(h)(t,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),t}(),Oi="[DEFAULT]",Di=function(){"use strict";function t(n,r){e(f)(this,t),this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e(h)(t,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new si;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch(e){}var n=!0,r=!1,i=void 0;try{for(var a,o=this.instancesDeferred.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=e(Vt)(a.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(e){}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.from(t.instances.values()),n.next=3,Promise.all(e(Kt)(r.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))).concat(e(Kt)(r.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return n.stop()}}),n)})))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:r}),o=!0,u=!1,s=void 0;try{for(var c,l=this.instancesDeferred.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=e(Vt)(c.value,2),h=f[0],d=f[1],v=this.normalizeInstanceIdentifier(h);i===v&&d.resolve(a)}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;try{s(e,t)}catch(e){}}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Oi?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi;return this.component?this.component.multipleInstances?e:Oi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pi=function(){"use strict";function t(n){e(f)(this,t),this.name=n,this.providers=new Map}return e(h)(t,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Di(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}(),Li={};n(Li,"_DEFAULT_ENTRY_NAME",(function(){return ma})),n(Li,"_apps",(function(){return ka})),n(Li,"_components",(function(){return wa})),n(Li,"_addComponent",(function(){return ba})),n(Li,"_addOrOverwriteComponent",(function(){return _a})),n(Li,"_registerComponent",(function(){return xa})),n(Li,"_getProvider",(function(){return Ia})),n(Li,"_removeServiceInstance",(function(){return Ea})),n(Li,"_clearComponents",(function(){return Ta})),n(Li,"SDK_VERSION",(function(){return Ra})),n(Li,"initializeApp",(function(){return Na})),n(Li,"getApp",(function(){return Oa})),n(Li,"getApps",(function(){return Da})),n(Li,"deleteApp",(function(){return Pa})),n(Li,"registerVersion",(function(){return Ma})),n(Li,"onLog",(function(){return Ua})),n(Li,"setLogLevel",(function(){return Fa})),n(Li,"FirebaseError",(function(){return yi}));Cr=o("hKHmD"),Cr=o("hKHmD");var Mi,Ui,Fi=[];(Ui=Mi||(Mi={}))[Ui.DEBUG=0]="DEBUG",Ui[Ui.VERBOSE=1]="VERBOSE",Ui[Ui.INFO=2]="INFO",Ui[Ui.WARN=3]="WARN",Ui[Ui.ERROR=4]="ERROR",Ui[Ui.SILENT=5]="SILENT";var Vi,Bi={debug:Mi.DEBUG,verbose:Mi.VERBOSE,info:Mi.INFO,warn:Mi.WARN,error:Mi.ERROR,silent:Mi.SILENT},ji=Mi.INFO,qi=(Vi={},e(Cr)(Vi,Mi.DEBUG,"log"),e(Cr)(Vi,Mi.VERBOSE,"log"),e(Cr)(Vi,Mi.INFO,"info"),e(Cr)(Vi,Mi.WARN,"warn"),e(Cr)(Vi,Mi.ERROR,"error"),Vi),zi=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o;if(!(n<t.logLevel)){var u=(new Date).toISOString(),s=qi[n];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(n,")"));(o=console)[s].apply(o,["[".concat(u,"]  ").concat(t.name,":")].concat(e(Kt)(i)))}},Gi=function(){"use strict";function t(n){e(f)(this,t),this.name=n,this._logLevel=ji,this._logHandler=zi,this._userLogHandler=null,Fi.push(this)}return e(h)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Mi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?Bi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mi.DEBUG].concat(e(Kt)(n))),this._logHandler.apply(this,[this,Mi.DEBUG].concat(e(Kt)(n)))}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mi.VERBOSE].concat(e(Kt)(n))),this._logHandler.apply(this,[this,Mi.VERBOSE].concat(e(Kt)(n)))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mi.INFO].concat(e(Kt)(n))),this._logHandler.apply(this,[this,Mi.INFO].concat(e(Kt)(n)))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mi.WARN].concat(e(Kt)(n))),this._logHandler.apply(this,[this,Mi.WARN].concat(e(Kt)(n)))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mi.ERROR].concat(e(Kt)(n))),this._logHandler.apply(this,[this,Mi.ERROR].concat(e(Kt)(n)))}}]),t}();function Ki(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=Fi[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value,s=null;t&&t.level&&(s=Bi[t.level]),u.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=s?s:t.logLevel)&&e({level:Mi[n].toLowerCase(),message:o,args:i,type:t.name})}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wi.default(e,t,n[t])}))}return e};var Wi=function(e){return e&&e.__esModule?e:{default:e}}(o("hKHmD"));var Qi,Ji;var Xi=new WeakMap,Yi=new WeakMap,$i=new WeakMap,Zi=new WeakMap,ea=new WeakMap;var ta={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ia(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function na(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ji||(Ji=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(aa(this),n),ia(Xi.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ia(t.apply(aa(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,u=(o=t).call.apply(o,[aa(this),n].concat(e(Kt)(i)));return $i.set(u,n.sort?n.sort():[n]),ia(u)}}function ra(e){return"function"==typeof e?na(e):(e instanceof IDBTransaction&&function(e){if(!Yi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Yi.set(e,t)}}(e),t=e,(Qi||(Qi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,ta):e);var t}function ia(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(ia(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&Xi.set(e,t)})).catch((function(){})),ea.set(n,t),n;var t,n;if(Zi.has(e))return Zi.get(e);var r=ra(e);return r!==e&&(Zi.set(e,r),ea.set(r,e)),r}var aa=function(e){return ea.get(e)};function oa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ia(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ia(u.result),e.oldVersion,e.newVersion,ia(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}var ua=["get","getKey","getAll","getAllKeys","count"],sa=["put","add","delete","clear"],ca=new Map;function la(t,n){if(t instanceof IDBDatabase&&!(n in t)&&"string"==typeof n){if(ca.get(n))return ca.get(n);var r=n.replace(/FromIndex$/,""),i=n!==r,a=sa.includes(r);if(r in(i?IDBIndex:IDBObjectStore).prototype&&(a||ua.includes(r))){var o=function(){var t=e(u)(e(c).mark((function t(n){var o,u,s,l,f,h,d=arguments;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=d.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=d[s];return f=this.transaction(n,a?"readwrite":"readonly"),h=f.store,i&&(h=h.index(u.shift())),t.next=7,Promise.all([(l=h)[r].apply(l,e(Kt)(u)),a&&f.done]);case 7:return t.abrupt("return",t.sent[0]);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();return ca.set(n,o),o}}}ta=function(t){return e(Hi)({},t,{get:function(e,n,r){return la(e,n)||t.get(e,n,r)},has:function(e,n){return!!la(e,n)||t.has(e,n)}})}(ta);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fa=function(){"use strict";function t(n){e(f)(this,t),this.container=n}return e(h)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),t}();var ha,da,va="@firebase/app",pa="0.9.10",ya=new Gi("@firebase/app"),ma="[DEFAULT]",ga=(ha={},e(Cr)(ha,va,"fire-core"),e(Cr)(ha,"@firebase/app-compat","fire-core-compat"),e(Cr)(ha,"@firebase/analytics","fire-analytics"),e(Cr)(ha,"@firebase/analytics-compat","fire-analytics-compat"),e(Cr)(ha,"@firebase/app-check","fire-app-check"),e(Cr)(ha,"@firebase/app-check-compat","fire-app-check-compat"),e(Cr)(ha,"@firebase/auth","fire-auth"),e(Cr)(ha,"@firebase/auth-compat","fire-auth-compat"),e(Cr)(ha,"@firebase/database","fire-rtdb"),e(Cr)(ha,"@firebase/database-compat","fire-rtdb-compat"),e(Cr)(ha,"@firebase/functions","fire-fn"),e(Cr)(ha,"@firebase/functions-compat","fire-fn-compat"),e(Cr)(ha,"@firebase/installations","fire-iid"),e(Cr)(ha,"@firebase/installations-compat","fire-iid-compat"),e(Cr)(ha,"@firebase/messaging","fire-fcm"),e(Cr)(ha,"@firebase/messaging-compat","fire-fcm-compat"),e(Cr)(ha,"@firebase/performance","fire-perf"),e(Cr)(ha,"@firebase/performance-compat","fire-perf-compat"),e(Cr)(ha,"@firebase/remote-config","fire-rc"),e(Cr)(ha,"@firebase/remote-config-compat","fire-rc-compat"),e(Cr)(ha,"@firebase/storage","fire-gcs"),e(Cr)(ha,"@firebase/storage-compat","fire-gcs-compat"),e(Cr)(ha,"@firebase/firestore","fire-fst"),e(Cr)(ha,"@firebase/firestore-compat","fire-fst-compat"),e(Cr)(ha,"fire-js","fire-js"),e(Cr)(ha,"firebase","fire-js-all"),ha),ka=new Map,wa=new Map;function ba(e,t){try{e.container.addComponent(t)}catch(n){ya.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _a(e,t){e.container.addOrOverwriteComponent(t)}function xa(e){var t=e.name;if(wa.has(t))return ya.debug("There were multiple attempts to register component ".concat(t,".")),!1;wa.set(t,e);var n=!0,r=!1,i=void 0;try{for(var a,o=ka.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){ba(a.value,e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}function Ia(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ma;Ia(e,t).clearInstance(n)}function Ta(){wa.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sa=(da={},e(Cr)(da,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),e(Cr)(da,"bad-app-name","Illegal App name: '{$appName}"),e(Cr)(da,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),e(Cr)(da,"app-deleted","Firebase App named '{$appName}' already deleted"),e(Cr)(da,"no-options","Need to provide options, when not being deployed to hosting via source."),e(Cr)(da,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),e(Cr)(da,"invalid-log-argument","First argument to `onLog` must be null or a function."),e(Cr)(da,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),e(Cr)(da,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),e(Cr)(da,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),e(Cr)(da,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),da),Aa=new mi("app","Firebase",Sa),Ca=function(){"use strict";function t(n,r,i){var a=this;e(f)(this,t),this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ni("app",(function(){return a}),"PUBLIC"))}return e(h)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}]),t}(),Ra="9.22.0";function Na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!=typeof t){var r=t;t={name:r}}var i=Object.assign({name:ma,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw Aa.create("bad-app-name",{appName:String(a)});if(n||(n=oi()),!n)throw Aa.create("no-options");var o=ka.get(a);if(o){if(_i(n,o.options)&&_i(i,o.config))return o;throw Aa.create("duplicate-app",{appName:a})}var u=new Pi(a),s=!0,c=!1,l=void 0;try{for(var f,h=wa.values()[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;u.addComponent(d)}}catch(e){c=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw l}}var v=new Ca(n,i,u);return ka.set(a,v),v}function Oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=ka.get(e);if(!t&&e===ma&&oi())return Na();if(!t)throw Aa.create("no-app",{appName:e});return t}function Da(){return Array.from(ka.values())}function Pa(e){return La.apply(this,arguments)}function La(){return(La=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,!ka.has(r)){e.next=6;break}return ka.delete(r),e.next=5,Promise.all(n.container.getProviders().map((function(e){return e.delete()})));case 5:n.isDeleted=!0;case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ma(e,t,n){var r,i=null!==(r=ga[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ya.warn(u.join(" "))}xa(new Ni("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ua(e,t){if(null!==e&&"function"!=typeof e)throw Aa.create("invalid-log-argument");Ki(e,t)}function Fa(e){var t;t=e,Fi.forEach((function(e){e.setLogLevel(t)}))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Va="firebase-heartbeat-store",Ba=null;function ja(){return Ba||(Ba=oa("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Va)}}).catch((function(e){throw Aa.create("idb-open",{originalErrorMessage:e.message})}))),Ba}function qa(e){return za.apply(this,arguments)}function za(){return(za=e(u)(e(c).mark((function t(n){var r,i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ja();case 3:return r=e.sent,e.next=6,r.transaction(Va).objectStore(Va).get(Ha(n));case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof yi?ya.warn(e.t0.message):(a=Aa.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ya.warn(a.message));case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function Ga(e,t){return Ka.apply(this,arguments)}function Ka(){return(Ka=e(u)(e(c).mark((function t(n,r){var i,a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ja();case 3:return i=e.sent,a=i.transaction(Va,"readwrite"),o=a.objectStore(Va),e.next=8,o.put(r,Ha(n));case 8:return e.next=10,a.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof yi?ya.warn(e.t0.message):(u=Aa.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ya.warn(u.message));case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function Ha(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wa=function(){"use strict";function t(n){var r=this;e(f)(this,t),this.container=n,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new Ya(i),this._heartbeatsCachePromise=this._storage.read().then((function(e){return r._heartbeatsCache=e,e}))}return e(h)(t,[{key:"triggerHeartbeat",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=Qa(),null!==t._heartbeatsCache){e.next=7;break}return e.next=6,t._heartbeatsCachePromise;case 6:t._heartbeatsCache=e.sent;case 7:if(t._heartbeatsCache.lastSentHeartbeatDate!==a&&!t._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=11;break}return e.abrupt("return");case 11:t._heartbeatsCache.heartbeats.push({date:a,agent:i});case 12:return t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",t._storage.overwrite(t._heartbeatsCache));case 14:case"end":return e.stop()}}),n)})))()}},{key:"getHeartbeatsHeader",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t._heartbeatsCache){e.next=3;break}return e.next=3,t._heartbeatsCachePromise;case 3:if(null!==t._heartbeatsCache&&0!==t._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(r=Qa(),i=Ja(t._heartbeatsCache.heartbeats),a=i.heartbeatsToSend,o=i.unsentEntries,u=ti(JSON.stringify({version:2,heartbeats:a})),t._heartbeatsCache.lastSentHeartbeatDate=r,!(o.length>0)){e.next=15;break}return t._heartbeatsCache.heartbeats=o,e.next=13,t._storage.overwrite(t._heartbeatsCache);case 13:e.next=16;break;case 15:t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),n)})))()}}]),t}();function Qa(){return(new Date).toISOString().substring(0,10)}function Ja(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=[],r=e.slice(),i=!0,a=!1,o=void 0;try{for(var u,s=function(e,i){var a=i.value,o=n.find((function(e){return e.agent===a.agent}));if(o){if(o.dates.push(a.date),$a(n)>t)return o.dates.pop(),"break"}else if(n.push({agent:a.agent,dates:[a.date]}),$a(n)>t)return n.pop(),"break";r=r.slice(1)},c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=s(c,u);if("break"===l)break}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{heartbeatsToSend:n,unsentEntries:r}}var Xa,Ya=function(){"use strict";function t(n){e(f)(this,t),this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e(h)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){return e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pi()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),t)})))()}},{key:"read",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,qa(t.app);case 9:return r=e.sent,e.abrupt("return",r||{heartbeats:[]});case 11:case"end":return e.stop()}}),n)})))()}},{key:"overwrite",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n._canUseIndexedDBPromise;case 3:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.read();case 10:return a=e.sent,e.abrupt("return",Ga(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 12:case"end":return e.stop()}}),r)})))()}},{key:"add",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,n._canUseIndexedDBPromise;case 3:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,n.read();case 10:return a=r.sent,r.abrupt("return",Ga(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:e(Kt)(a.heartbeats).concat(e(Kt)(t.heartbeats))}));case 12:case"end":return r.stop()}}),r)})))()}}]),t}();function $a(e){return ti(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa="",xa(new Ni("platform-logger",(function(e){return new fa(e)}),"PRIVATE")),xa(new Ni("heartbeat",(function(e){return new Wa(e)}),"PRIVATE")),Ma(va,pa,Xa),Ma(va,pa,"esm2017"),Ma("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Za,eo=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this._delegate=n,this.firebase=r,ba(n,new Ni("app-compat",(function(){return i}),"PUBLIC")),this.container=n.container}return e(h)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Pa(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ma;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ma;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ba(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){_a(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),t}(),to=(Za={},e(Cr)(Za,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),e(Cr)(Za,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Za),no=new mi("app-compat","Firebase",to);var ro=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Li.initializeApp(r,i);if(wi(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:Li.registerVersion,setLogLevel:Li.setLogLevel,onLog:Li.onLog,apps:null,SDK_VERSION:Li.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(Li._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!=typeof e[a])throw no.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&ri(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,i).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Li}};function r(e){if(e=e||Li._DEFAULT_ENTRY_NAME,!wi(t,e))throw no.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(eo);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){ri(t,e)},createSubscribe:Si,ErrorFactory:mi,deepExtend:ri}),t}(),io=new Gi("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){io.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ao=self.firebase.SDK_VERSION;ao&&ao.indexOf("LITE")>=0&&io.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var oo=ro;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Ma("@firebase/app-compat","0.2.10",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
oo.registerVersion("firebase","9.22.0","app-compat");var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.default=function(e,t,n){return co(e,t,n)};var so=function(e){return e&&e.__esModule?e:{default:e}}(o("2mz0K"));function co(e,t,n){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=so.default(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}})(e,t,n)}var lo=o("fVNic"),fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.default=function(e){return ho.default(e)||vo.default(e)||yo.default(e,i)||po.default()};var ho=mo(o("8slrw")),vo=mo(o("7AJDX")),po=mo(o("ifqQW")),yo=mo(o("auk6i"));function mo(e){return e&&e.__esModule?e:{default:e}}te=o("ds8z5"),Cr=o("hKHmD"),lo=o("fVNic");function go(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ko="facebook.com",wo="github.com",bo="google.com",_o="password",xo="twitter.com",Io="EMAIL_SIGNIN",Eo="PASSWORD_RESET",To="RECOVER_EMAIL",So="REVERT_SECOND_FACTOR_ADDITION",Ao="VERIFY_AND_CHANGE_EMAIL",Co="VERIFY_EMAIL";function Ro(){return e(Cr)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var No=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){var t;return t={},e(Cr)(t,"admin-restricted-operation","This operation is restricted to administrators only."),e(Cr)(t,"argument-error",""),e(Cr)(t,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),e(Cr)(t,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),e(Cr)(t,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),e(Cr)(t,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),e(Cr)(t,"cordova-not-ready","Cordova framework is not ready."),e(Cr)(t,"cors-unsupported","This browser is not supported."),e(Cr)(t,"credential-already-in-use","This credential is already associated with a different user account."),e(Cr)(t,"custom-token-mismatch","The custom token corresponds to a different audience."),e(Cr)(t,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),e(Cr)(t,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),e(Cr)(t,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),e(Cr)(t,"email-change-needs-verification","Multi-factor users must always have a verified email."),e(Cr)(t,"email-already-in-use","The email address is already in use by another account."),e(Cr)(t,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),e(Cr)(t,"expired-action-code","The action code has expired."),e(Cr)(t,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),e(Cr)(t,"internal-error","An internal AuthError has occurred."),e(Cr)(t,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),e(Cr)(t,"invalid-app-id","The mobile app identifier is not registed for the current project."),e(Cr)(t,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),e(Cr)(t,"invalid-auth-event","An internal AuthError has occurred."),e(Cr)(t,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),e(Cr)(t,"invalid-continue-uri","The continue URL provided in the request is invalid."),e(Cr)(t,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),e(Cr)(t,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),e(Cr)(t,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),e(Cr)(t,"invalid-email","The email address is badly formatted."),e(Cr)(t,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),e(Cr)(t,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),e(Cr)(t,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),e(Cr)(t,"invalid-credential","The supplied auth credential is malformed or has expired."),e(Cr)(t,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),e(Cr)(t,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),e(Cr)(t,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),e(Cr)(t,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),e(Cr)(t,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),e(Cr)(t,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),e(Cr)(t,"wrong-password","The password is invalid or the user does not have a password."),e(Cr)(t,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),e(Cr)(t,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),e(Cr)(t,"invalid-provider-id","The specified provider ID is invalid."),e(Cr)(t,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),e(Cr)(t,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),e(Cr)(t,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),e(Cr)(t,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),e(Cr)(t,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),e(Cr)(t,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),e(Cr)(t,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),e(Cr)(t,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),e(Cr)(t,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),e(Cr)(t,"missing-continue-uri","A continue URL must be provided in the request."),e(Cr)(t,"missing-iframe-start","An internal AuthError has occurred."),e(Cr)(t,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),e(Cr)(t,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),e(Cr)(t,"missing-password","A non-empty password must be provided"),e(Cr)(t,"missing-multi-factor-info","No second factor identifier is provided."),e(Cr)(t,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),e(Cr)(t,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),e(Cr)(t,"missing-verification-id","The phone auth credential was created with an empty verification ID."),e(Cr)(t,"app-deleted","This instance of FirebaseApp has been deleted."),e(Cr)(t,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),e(Cr)(t,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),e(Cr)(t,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),e(Cr)(t,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),e(Cr)(t,"no-auth-event","An internal AuthError has occurred."),e(Cr)(t,"no-such-provider","User was not linked to an account with the given provider."),e(Cr)(t,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),e(Cr)(t,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),e(Cr)(t,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),e(Cr)(t,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),e(Cr)(t,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),e(Cr)(t,"provider-already-linked","User can only be linked to one identity for the given provider."),e(Cr)(t,"quota-exceeded","The project's quota for this operation has been exceeded."),e(Cr)(t,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),e(Cr)(t,"redirect-operation-pending","A redirect sign-in operation is already pending."),e(Cr)(t,"rejected-credential","The request contains malformed or mismatching credentials."),e(Cr)(t,"second-factor-already-in-use","The second factor is already enrolled on this account."),e(Cr)(t,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),e(Cr)(t,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),e(Cr)(t,"timeout","The operation has timed out."),e(Cr)(t,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),e(Cr)(t,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),e(Cr)(t,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),e(Cr)(t,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),e(Cr)(t,"unsupported-persistence-type","The current environment does not support the specified persistence type."),e(Cr)(t,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),e(Cr)(t,"unverified-email","The operation requires a verified email."),e(Cr)(t,"user-cancelled","The user did not grant your application the permissions it requested."),e(Cr)(t,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),e(Cr)(t,"user-disabled","The user account has been disabled by an administrator."),e(Cr)(t,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),e(Cr)(t,"user-signed-out",""),e(Cr)(t,"weak-password","The password must be 6 characters long or more."),e(Cr)(t,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),e(Cr)(t,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e(Cr)(t,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),e(Cr)(t,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),e(Cr)(t,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),e(Cr)(t,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),e(Cr)(t,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),e(Cr)(t,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),e(Cr)(t,"invalid-req-type","Invalid request parameters."),e(Cr)(t,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),t},Oo=Ro,Do=new mi("auth","Firebase",Ro()),Po=new Gi("@firebase/auth");function Lo(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;Po.logLevel<=Mi.WARN&&(a=Po).warn.apply(a,["Auth (".concat(Ra,"): ").concat(t)].concat(e(Kt)(r)))}function Mo(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;Po.logLevel<=Mi.ERROR&&(a=Po).error.apply(a,["Auth (".concat(Ra,"): ").concat(t)].concat(e(Kt)(r)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw jo.apply(void 0,[t].concat(e(Kt)(r)))}function Fo(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return jo.apply(void 0,[t].concat(e(Kt)(r)))}function Vo(t,n,r){var i=Object.assign(Object.assign({},Oo()),e(Cr)({},n,r));return new mi("auth","Firebase",i).create(n,{appName:t.name})}function Bo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Uo(e,"argument-error"),Vo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jo(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;if("string"!=typeof t){var o,u=r[0],s=e(Kt)(r.slice(1));return s[0]&&(s[0].appName=t.name),(o=t._errorFactory).create.apply(o,[u].concat(e(Kt)(s)))}return(a=Do).create.apply(a,[t].concat(e(Kt)(r)))}function qo(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(!t)throw jo.apply(void 0,[n].concat(e(Kt)(i)))}function zo(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Mo(t),new Error(t)}function Go(e,t){e||zo(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ho(){return"http:"===Wo()||"https:"===Wo()}function Wo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qo=function(){"use strict";function t(n,r){e(f)(this,t),this.shortDelay=n,this.longDelay=r,Go(r>n,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(li())||di()}return e(h)(t,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ho()||hi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e,t){Go(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xo,Yo=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),t}(),$o=(Xo={},e(Cr)(Xo,"CREDENTIAL_MISMATCH","custom-token-mismatch"),e(Cr)(Xo,"MISSING_CUSTOM_TOKEN","internal-error"),e(Cr)(Xo,"INVALID_IDENTIFIER","invalid-email"),e(Cr)(Xo,"MISSING_CONTINUE_URI","internal-error"),e(Cr)(Xo,"INVALID_PASSWORD","wrong-password"),e(Cr)(Xo,"MISSING_PASSWORD","missing-password"),e(Cr)(Xo,"EMAIL_EXISTS","email-already-in-use"),e(Cr)(Xo,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),e(Cr)(Xo,"INVALID_IDP_RESPONSE","invalid-credential"),e(Cr)(Xo,"INVALID_PENDING_TOKEN","invalid-credential"),e(Cr)(Xo,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),e(Cr)(Xo,"MISSING_REQ_TYPE","internal-error"),e(Cr)(Xo,"EMAIL_NOT_FOUND","user-not-found"),e(Cr)(Xo,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),e(Cr)(Xo,"EXPIRED_OOB_CODE","expired-action-code"),e(Cr)(Xo,"INVALID_OOB_CODE","invalid-action-code"),e(Cr)(Xo,"MISSING_OOB_CODE","internal-error"),e(Cr)(Xo,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),e(Cr)(Xo,"INVALID_ID_TOKEN","invalid-user-token"),e(Cr)(Xo,"TOKEN_EXPIRED","user-token-expired"),e(Cr)(Xo,"USER_NOT_FOUND","user-token-expired"),e(Cr)(Xo,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),e(Cr)(Xo,"INVALID_CODE","invalid-verification-code"),e(Cr)(Xo,"INVALID_SESSION_INFO","invalid-verification-id"),e(Cr)(Xo,"INVALID_TEMPORARY_PROOF","invalid-credential"),e(Cr)(Xo,"MISSING_SESSION_INFO","missing-verification-id"),e(Cr)(Xo,"SESSION_EXPIRED","code-expired"),e(Cr)(Xo,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),e(Cr)(Xo,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),e(Cr)(Xo,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),e(Cr)(Xo,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),e(Cr)(Xo,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),e(Cr)(Xo,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),e(Cr)(Xo,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),e(Cr)(Xo,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),e(Cr)(Xo,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),e(Cr)(Xo,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),e(Cr)(Xo,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),e(Cr)(Xo,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),e(Cr)(Xo,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),e(Cr)(Xo,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),e(Cr)(Xo,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),e(Cr)(Xo,"MISSING_CLIENT_TYPE","missing-client-type"),e(Cr)(Xo,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),e(Cr)(Xo,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),e(Cr)(Xo,"INVALID_REQ_TYPE","invalid-req-type"),Xo),Zo=new Qo(3e4,6e4);function eu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function tu(e,t,n,r){return nu.apply(this,arguments)}function nu(){return nu=e(u)(e(c).mark((function t(n,r,i,a){var o,s=arguments;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},t.abrupt("return",ru(n,o,e(u)(e(c).mark((function t(){var o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},u={},a&&("GET"===r?u=a:o={body:JSON.stringify(a)}),s=Ii(Object.assign({key:n.config.apiKey},u)).slice(1),e.next=6,n._getAdditionalHeaders();case 6:return(l=e.sent)["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),e.abrupt("return",Yo.fetch()(uu(n,n.config.apiHost,i,s),Object.assign({method:r,headers:l,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t)}))),nu.apply(this,arguments)}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return(iu=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l,f,h,d,v;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},$o),r),t.prev=2,o=new su(n),t.next=6,Promise.race([i(),o.promise]);case 6:return u=t.sent,o.clearNetworkTimeout(),t.next=10,u.json();case 10:if(!("needConfirmation"in(s=t.sent))){t.next=13;break}throw cu(n,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){t.next=17;break}return t.abrupt("return",s);case 17:if(l=u.ok?s.errorMessage:s.error.message,f=e(Vt)(l.split(" : "),2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){t.next=23;break}throw cu(n,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){t.next=27;break}throw cu(n,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){t.next=29;break}throw cu(n,"user-disabled",s);case 29:if(v=a[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){t.next=34;break}throw Vo(n,v,d);case 34:Uo(n,v);case 35:t.next=42;break;case 37:if(t.prev=37,t.t0=t.catch(2),!(t.t0 instanceof yi)){t.next=41;break}throw t.t0;case 41:Uo(n,"network-request-failed",{message:String(t.t0)});case 42:case"end":return t.stop()}}),t,null,[[2,37]])})))).apply(this,arguments)}function au(e,t,n,r){return ou.apply(this,arguments)}function ou(){return ou=e(u)(e(c).mark((function t(n,r,i,a){var o,u,s=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,tu(n,r,i,a,o);case 3:return"mfaPendingCredential"in(u=e.sent)&&Uo(n,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),t)}))),ou.apply(this,arguments)}function uu(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Jo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var su=function(){"use strict";function t(n){var r=this;e(f)(this,t),this.auth=n,this.timer=null,this.promise=new Promise((function(e,t){var n=r;r.timer=setTimeout((function(){return t(Fo(n.auth,"network-request-failed"))}),Zo.get())}))}return e(h)(t,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),t}();function cu(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fo(e,t,r);return i.customData._tokenResponse=n,i}function lu(e,t){return fu.apply(this,arguments)}function fu(){return(fu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return(du=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function vu(e,t){return pu.apply(this,arguments)}function pu(){return(pu=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return mu=e(u)(e(c).mark((function t(n){var r,i,a,o,u,s,l=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],i=Ri(n),e.next=4,i.getIdToken(r);case 4:return a=e.sent,qo((o=ku(a))&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error"),u="object"==typeof o.firebase?o.firebase:void 0,s=null==u?void 0:u.sign_in_provider,e.abrupt("return",{claims:o,token:a,authTime:yu(gu(o.auth_time)),issuedAtTime:yu(gu(o.iat)),expirationTime:yu(gu(o.exp)),signInProvider:s||null,signInSecondFactor:(null==u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),t)}))),mu.apply(this,arguments)}function gu(e){return 1e3*Number(e)}function ku(t){var n=e(Vt)(t.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Mo("JWT malformed, contained fewer than 3 sections"),null;try{var o=ni(i);return o?JSON.parse(o):(Mo("Failed to decode base64 JWT payload"),null)}catch(e){return Mo("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function wu(e,t){return bu.apply(this,arguments)}function bu(){return bu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>2&&void 0!==i[2]&&i[2])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof yi&&_u(e.t0))){e.next=15;break}if(n.auth.currentUser!==n){e.next=15;break}return e.next=15,n.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),t,null,[[3,9]])}))),bu.apply(this,arguments)}function _u(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xu=function(){"use strict";function t(n){e(f)(this,t),this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return e(h)(t,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t),r=this;this.timerId=setTimeout(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.iteration();case 2:case"end":return e.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&t.schedule(!0),e.abrupt("return");case 9:t.schedule();case 10:case"end":return e.stop()}}),n,null,[[0,5]])})))()}}]),t}(),Iu=function(){"use strict";function t(n,r){e(f)(this,t),this.createdAt=n,this.lastLoginAt=r,this._initializeTime()}return e(h)(t,[{key:"_initializeTime",value:function(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(e){return Tu.apply(this,arguments)}function Tu(){return(Tu=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n){var r,i,a,o,u,s,l,f,h,d,v;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.auth,e.next=4,n.getIdToken();case 4:return a=e.sent,e.next=7,wu(n,vu(i,{idToken:a}));case 7:qo(null==(o=e.sent)?void 0:o.users.length,i,"internal-error"),u=o.users[0],n._notifyReloadListener(u),s=(null===(r=u.providerUserInfo)||void 0===r?void 0:r.length)?Cu(u.providerUserInfo):[],l=Au(n.providerData,s),f=n.isAnonymous,h=!(n.email&&u.passwordHash||(null==l?void 0:l.length)),d=!!f&&h,v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:l,metadata:new Iu(u.createdAt,u.lastLoginAt),isAnonymous:d},Object.assign(n,v);case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Su(){return(Su=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ri(n),e.next=3,Eu(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Au(t,n){var r=t.filter((function(e){return!n.some((function(t){return t.providerId===e.providerId}))}));return e(Kt)(r).concat(e(Kt)(n))}function Cu(e){return e.map((function(e){var t=e.providerId,n=go(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ru(e,t){return Nu.apply(this,arguments)}function Nu(){return(Nu=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ru(n,{},e(u)(e(c).mark((function t(){var i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ii({grant_type:"refresh_token",refresh_token:r}).slice(1),a=n.config,o=a.tokenApiHost,u=a.apiKey,s=uu(n,o,"/v1/token","key=".concat(u)),e.next=5,n._getAdditionalHeaders();case 5:return(l=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Yo.fetch()(s,{method:"POST",headers:l,body:i}));case 8:case"end":return e.stop()}}),t)}))));case 2:return i=t.sent,t.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ou=function(){"use strict";function t(){e(f)(this,t),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return e(h)(t,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qo(e.idToken,"internal-error"),qo(void 0!==e.idToken,"internal-error"),qo(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,qo(n=ku(t),"internal-error"),qo(void 0!==n.exp,"internal-error"),qo(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qo(!r.accessToken||r.refreshToken,t,"user-token-expired"),n||!r.accessToken||r.isExpired){e.next=3;break}return e.abrupt("return",r.accessToken);case 3:if(!r.refreshToken){e.next=7;break}return e.next=6,r.refresh(t,r.refreshToken);case 6:return e.abrupt("return",r.accessToken);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),i)})))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){var a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(t,n);case 2:a=e.sent,o=a.accessToken,u=a.refreshToken,s=a.expiresIn,r.updateTokensAndExpiration(o,u,Number(s));case 7:case"end":return e.stop()}}),i)})))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new t,this.toJSON())}},{key:"_performRefresh",value:function(){return zo("not implemented")}}],[{key:"fromJSON",value:function(e,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new t;return r&&(qo("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(qo("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),a&&(qo("number"==typeof a,"internal-error",{appName:e}),o.expirationTime=a),o}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(e,t){qo("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Pu=function(){"use strict";function t(n){e(f)(this,t);var r=n.uid,i=n.auth,a=n.stsTokenManager,o=go(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?e(Kt)(o.providerData):[],this.metadata=new Iu(o.createdAt||void 0,o.lastLoginAt||void 0)}return e(h)(t,[{key:"getIdToken",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wu(n,n.stsTokenManager.getToken(n.auth,t));case 2:if(qo(i=e.sent,n.auth,"internal-error"),n.accessToken===i){e.next=9;break}return n.accessToken=i,e.next=8,n.auth._persistUserIfCurrent(n);case 8:n.auth._notifyListenersIfCurrent(n);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),r)})))()}},{key:"getIdTokenResult",value:function(e){return function(e){return mu.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Su.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(e){var n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){qo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(u)(e(c).mark((function i(){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,t.idToken&&t.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(t),a=!0),!n){e.next=5;break}return e.next=5,Eu(r);case 5:return e.next=7,r.auth._persistUserIfCurrent(r);case 7:a&&r.auth._notifyListenersIfCurrent(r);case 8:case"end":return e.stop()}}),i)})))()}},{key:"delete",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdToken();case 2:return r=e.sent,e.next=5,wu(t,lu(t.auth,{idToken:r}));case 5:return t.stsTokenManager.clearRefreshToken(),e.abrupt("return",t.auth.signOut());case 7:case"end":return e.stop()}}),n)})))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(e,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,v=null!==(o=n.photoURL)&&void 0!==o?o:void 0,p=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;qo(k&&x,e,"internal-error");var I=Ou.fromJSON(this.name,x);qo("string"==typeof k,e,"internal-error"),Du(f,e.name),Du(h,e.name),qo("boolean"==typeof w,e,"internal-error"),qo("boolean"==typeof b,e,"internal-error"),Du(d,e.name),Du(v,e.name),Du(p,e.name),Du(y,e.name),Du(m,e.name),Du(g,e.name);var E=new t({uid:k,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(u)(e(c).mark((function a(){var o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new Ou).updateFromServerResponse(r),u=new t({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),e.next=5,Eu(u);case 5:return e.abrupt("return",u);case 6:case"end":return e.stop()}}),a)})))()}}]),t}(),Lu=new Map;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e){Go(e instanceof Function,"Expected a class definition");var t=Lu.get(e);return t?(Go(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lu.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uu=function(){"use strict";function t(){e(f)(this,t),this.type="NONE",this.storage={}}return e(h)(t,[{key:"_isAvailable",value:function(){return e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),t)})))()}},{key:"_set",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.storage[t]=n;case 1:case"end":return e.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.storage[t],e.abrupt("return",void 0===i?null:i);case 2:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete n.storage[t];case 1:case"end":return e.stop()}}),r)})))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}();Uu.type="NONE";var Fu=Uu;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Bu=function(){"use strict";function t(n,r,i){e(f)(this,t),this.persistence=n,this.auth=r,this.userKey=i;var a=this.auth,o=a.config,u=a.name;this.fullUserKey=Vu(this.userKey,o.apiKey,u),this.fullPersistenceKey=Vu("persistence",o.apiKey,u),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return e(h)(t,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.persistence._get(t.fullUserKey);case 2:return r=e.sent,e.abrupt("return",r?Pu._fromJSON(t.auth,r):null);case 4:case"end":return e.stop()}}),n)})))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.getCurrentUser();case 4:return i=e.sent,e.next=7,n.removeCurrentUser();case 7:if(n.persistence=t,!i){e.next=10;break}return e.abrupt("return",n.setCurrentUser(i));case 10:case"end":return e.stop()}}),r)})))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return e(u)(e(c).mark((function a(){var o,s,l,f,h,d,v,p,y,m,g,k,w;return e(c).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.length){a.next=2;break}return a.abrupt("return",new t(Mu(Fu),n,i));case 2:return a.next=4,Promise.all(r.map(function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:o=a.sent.filter((function(e){return e})),s=o[0]||Mu(Fu),l=Vu(i,n.config.apiKey,n.name),f=null,h=!0,d=!1,v=void 0,a.prev=9,p=r[Symbol.iterator]();case 11:if(h=(y=p.next()).done){a.next=29;break}return m=y.value,a.prev=13,a.next=16,m._get(l);case 16:if(!(g=a.sent)){a.next=22;break}return k=Pu._fromJSON(n,g),m!==s&&(f=k),s=m,a.abrupt("break",29);case 22:a.next=26;break;case 24:a.prev=24,a.t0=a.catch(13);case 26:h=!0,a.next=11;break;case 29:a.next=35;break;case 31:a.prev=31,a.t1=a.catch(9),d=!0,v=a.t1;case 35:a.prev=35,a.prev=36,h||null==p.return||p.return();case 38:if(a.prev=38,!d){a.next=41;break}throw v;case 41:return a.finish(38);case 42:return a.finish(35);case 43:if(w=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&w.length){a.next=46;break}return a.abrupt("return",new t(s,n,i));case 46:if(s=w[0],!f){a.next=50;break}return a.next=50,s._set(l,f.toJSON());case 50:return a.next=52,Promise.all(r.map(function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===s){e.next=8;break}return e.prev=1,e.next=4,n._remove(l);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()));case 52:return a.abrupt("return",new t(s,n,i));case 53:case"end":return a.stop()}}),a,null,[[9,31,35,43],[13,24],[36,,38,42]])})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ku(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wu(t))return"Blackberry";if(Qu(t))return"Webos";if(zu(t))return"Safari";if((t.includes("chrome/")||Gu(t))&&!t.includes("edge/"))return"Chrome";if(Hu(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/firefox\//i.test(e)}function zu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/crios\//i.test(e)}function Ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/iemobile/i.test(e)}function Hu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/android/i.test(e)}function Wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/blackberry/i.test(e)}function Qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/webos/i.test(e)}function Ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Yu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return Ju(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function $u(){return vi()&&10===document.documentMode}function Zu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return Ju(e)||Hu(e)||Qu(e)||Wu(e)||/windows phone/i.test(e)||Ku(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function es(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ju(li());break;case"Worker":t="".concat(ju(li()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ra,"/").concat(r)}function ts(e){return ns.apply(this,arguments)}function ns(){return(ns=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tu(n,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return(is=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"GET","/v2/recaptchaConfig",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(e){return void 0!==e&&void 0!==e.getResponse}function os(e){return void 0!==e&&void 0!==e.enterprise}var us=function t(n){"use strict";if(e(f)(this,t),this.siteKey="",this.emailPasswordEnabled=!1,void 0===n.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=n.recaptchaKey.split("/")[3],this.emailPasswordEnabled=n.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(e){return new Promise((function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=Fo("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)}))}function cs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ls="https://www.google.com/recaptcha/enterprise.js?render=",fs="NO_RECAPTCHA",hs=function(){"use strict";function t(n){e(f)(this,t),this.type="recaptcha-enterprise",this.auth=ms(n)}return e(h)(t,[{key:"verify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(u)(e(c).mark((function i(){var a,o,s;return e(c).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=function(e){return o.apply(this,arguments)},o=function(){return o=e(u)(e(c).mark((function t(r){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=5;break}if(null!=r.tenantId||null==r._agentRecaptchaConfig){t.next=3;break}return t.abrupt("return",r._agentRecaptchaConfig.siteKey);case 3:if(null==r.tenantId||void 0===r._tenantRecaptchaConfigs[r.tenantId]){t.next=5;break}return t.abrupt("return",r._tenantRecaptchaConfigs[r.tenantId].siteKey);case 5:return t.abrupt("return",new Promise(function(){var t=e(u)(e(c).mark((function t(n,i){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rs(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var t=new us(e);return null==r.tenantId?r._agentRecaptchaConfig=t:r._tenantRecaptchaConfigs[r.tenantId]=t,n(t.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){i(e)}));case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)},s=function(e,n,r){var i=window.grecaptcha;os(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n(fs)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i.abrupt("return",new Promise((function(e,t){a(r.auth).then((function(r){if(!n&&os(window.grecaptcha))s(r,e,t);else{if("undefined"==typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));ss(ls+r).then((function(){s(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 7:case"end":return i.stop()}}),i)})))()}}]),t}();function ds(e,t,n){return vs.apply(this,arguments)}function vs(){return vs=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],o=new hs(n),e.prev=3,e.next=6,o.verify(i);case 6:u=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),e.next=13,o.verify(i,!0);case 13:u=e.sent;case 14:return s=Object.assign({},r),a?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 19:case"end":return e.stop()}}),t,null,[[3,9]])}))),vs.apply(this,arguments)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps=function(){"use strict";function t(n){e(f)(this,t),this.auth=n,this.queue=[]}return e(h)(t,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o,u,s,l,f,h,d,v,p,y,m;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:i=[],e.prev=3,a=!0,o=!1,u=void 0,e.prev=5,s=n.queue[Symbol.iterator]();case 7:if(a=(l=s.next()).done){e.next=15;break}return f=l.value,e.next=11,f(t);case 11:f.onAbort&&i.push(f.onAbort);case 12:a=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),o=!0,u=e.t0;case 21:e.prev=21,e.prev=22,a||null==s.return||s.return();case 24:if(e.prev=24,!o){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=52;break;case 31:for(e.prev=31,e.t1=e.catch(3),i.reverse(),h=!0,d=!1,v=void 0,e.prev=35,p=i[Symbol.iterator]();!(h=(y=p.next()).done);h=!0){m=y.value;try{m()}catch(e){}}e.next=43;break;case 39:e.prev=39,e.t2=e.catch(35),d=!0,v=e.t2;case 43:e.prev=43,e.prev=44,h||null==p.return||p.return();case 46:if(e.prev=46,!d){e.next=49;break}throw v;case 49:return e.finish(46);case 50:return e.finish(43);case 51:throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 52:case"end":return e.stop()}}),r,null,[[3,31],[5,17,21,29],[22,,24,28],[35,39,43,51],[44,,46,50]])})))()}}]),t}(),ys=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.app=n,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gs(this),this.idTokenSubscription=new gs(this),this.beforeStateQueue=new ps(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Do,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=a.sdkClientVersion}return e(h)(t,[{key:"_initializeWithPersistence",value:function(t,n){n&&(this._popupRedirectResolver=Mu(n));var r=this;return this._initializationPromise=this.queue(e(u)(e(c).mark((function i(){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r._deleted){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Bu.create(r,t);case 5:if(r.persistenceManager=e.sent,!r._deleted){e.next=8;break}return e.abrupt("return");case 8:if(!(null===(a=r._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){e.next=16;break}return e.prev=9,e.next=12,r._popupRedirectResolver._initialize(r);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.next=18,r.initializeCurrentUser(n);case 18:if(r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted){e.next=21;break}return e.abrupt("return");case 21:r._isInitialized=!0;case 22:case"end":return e.stop()}}),i,null,[[9,14]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.assertedPersistence.getCurrentUser();case 4:if(r=e.sent,t.currentUser||r){e.next=7;break}return e.abrupt("return");case 7:if(!t.currentUser||!r||t.currentUser.uid!==r.uid){e.next=12;break}return t._currentUser._assign(r),e.next=11,t.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,t._updateCurrentUser(r,!0);case 14:case"end":return e.stop()}}),n)})))()}},{key:"initializeCurrentUser",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.assertedPersistence.getCurrentUser();case 3:if(a=e.sent,o=a,u=!1,!t||!n.config.authDomain){e.next=15;break}return e.next=9,n.getOrInitRedirectPersistenceManager();case 9:return s=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,l=null==o?void 0:o._redirectEventId,e.next=13,n.tryRedirectSignIn(t);case 13:f=e.sent,s&&s!==l||!(null==f?void 0:f.user)||(o=f.user,u=!0);case 15:if(o){e.next=17;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 17:if(o._redirectEventId){e.next=33;break}if(!u){e.next=28;break}return e.prev=19,e.next=22,n.beforeStateQueue.runMiddleware(o);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(19),o=a,n._popupRedirectResolver._overrideRedirectResult(n,(function(){return Promise.reject(e.t0)}));case 28:if(!o){e.next=32;break}return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 32:return e.abrupt("return",n.directlySetCurrentUser(null));case 33:return qo(n._popupRedirectResolver,n,"argument-error"),e.next=36,n.getOrInitRedirectPersistenceManager();case 36:if(!n.redirectUser||n.redirectUser._redirectEventId!==o._redirectEventId){e.next=38;break}return e.abrupt("return",n.directlySetCurrentUser(o));case 38:return e.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 39:case"end":return e.stop()}}),r,null,[[19,24]])})))()}},{key:"tryRedirectSignIn",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,n._popupRedirectResolver._completeRedirectFn(n,t,!0);case 4:i=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,n._setRedirectUser(null);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),r,null,[[1,7]])})))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=9;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 9:return e.abrupt("return",n.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),r,null,[[0,5]])})))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._deleted=!0;case 1:case"end":return e.stop()}}),n)})))()}},{key:"updateCurrentUser",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t?Ri(t):null)&&qo(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),e.abrupt("return",n._updateCurrentUser(i&&i._clone(n)));case 3:case"end":return e.stop()}}),r)})))()}},{key:"_updateCurrentUser",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r._deleted){i.next=2;break}return i.abrupt("return");case 2:if(t&&qo(r.tenantId===t.tenantId,r,"tenant-id-mismatch"),n){i.next=6;break}return i.next=6,r.beforeStateQueue.runMiddleware(t);case 6:return i.abrupt("return",r.queue(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),n)})))));case 7:case"end":return i.stop()}}),i)})))()}},{key:"signOut",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeStateQueue.runMiddleware(null);case 2:if(!t.redirectPersistenceManager&&!t._popupRedirectResolver){e.next=5;break}return e.next=5,t._setRedirectUser(null);case 5:return e.abrupt("return",t._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),n)})))()}},{key:"setPersistence",value:function(t){var n=this;return this.queue(e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.assertedPersistence.setPersistence(Mu(t));case 2:case"end":return e.stop()}}),r)}))))}},{key:"initializeRecaptchaConfig",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:r=e.sent,i=new us(r),null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.emailPasswordEnabled&&new hs(t).verify();case 6:case"end":return e.stop()}}),n)})))()}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new mi("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getOrInitRedirectPersistenceManager(n);case 2:return a=e.sent,e.abrupt("return",null===t?a.removeCurrentUser():a.setCurrentUser(t));case 4:case"end":return e.stop()}}),i)})))()}},{key:"getOrInitRedirectPersistenceManager",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.redirectPersistenceManager){e.next=9;break}return qo(i=t&&Mu(t)||n._popupRedirectResolver,n,"argument-error"),e.next=5,Bu.create(n,[Mu(i._redirectPersistence)],"redirectUser");case 5:return n.redirectPersistenceManager=e.sent,e.next=8,n.redirectPersistenceManager.getCurrentUser();case 8:n.redirectUser=e.sent;case 9:return e.abrupt("return",n.redirectPersistenceManager);case 10:case"end":return e.stop()}}),r)})))()}},{key:"_redirectUserForId",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._isInitialized){r.next=4;break}return r.next=4,n.queue(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)}))));case 4:if((null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)!==t){r.next=6;break}return r.abrupt("return",n._currentUser);case 6:if((null===(a=n.redirectUser)||void 0===a?void 0:a._redirectEventId)!==t){r.next=8;break}return r.abrupt("return",n.redirectUser);case 8:return r.abrupt("return",null);case 9:case"end":return r.stop()}}),r)})))()}},{key:"_persistUserIfCurrent",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t!==n.currentUser){r.next=2;break}return r.abrupt("return",n.queue(e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),r)})))));case 2:case"end":return r.stop()}}),r)})))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return qo(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentUser&&n.currentUser!==t&&n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh(),n.currentUser=t,!t){e.next=8;break}return e.next=6,n.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,n.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),r)})))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qo(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=es(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o;return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e(Cr)({},"X-Client-Version",t.clientVersion),t.app.options.appId&&(i["X-Firebase-gmpid"]=t.app.options.appId),n.next=5,null===(r=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getHeartbeatsHeader();case 5:return(a=n.sent)&&(i["X-Firebase-Client"]=a),n.next=9,t._getAppCheckToken();case 9:return(o=n.sent)&&(i["X-Firebase-AppCheck"]=o),n.abrupt("return",i);case 12:case"end":return n.stop()}}),n)})))()}},{key:"_getAppCheckToken",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,null===(r=t.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getToken();case 3:return(null==(i=e.sent)?void 0:i.error)&&Lo("Error while retrieving App Check token: ".concat(i.error)),e.abrupt("return",null==i?void 0:i.token);case 6:case"end":return e.stop()}}),n)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(e){return Ri(e)}var gs=function(){"use strict";function t(n){var r=this;e(f)(this,t),this.auth=n,this.observer=null,this.addObserver=Si((function(e){return r.observer=e}))}return e(h)(t,[{key:"next",get:function(){return qo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,n,r){var i=ms(t);qo(i._canInitEmulator,i,"emulator-config-failed"),qo(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=ws(n),u=function(t){var n=ws(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:bs(i.substr(o.length+1))}}var u=e(Vt)(i.split(":"),2);return{host:u[0],port:bs(u[1])}}(n),s=u.host,c=u.port,l=null===c?"":":".concat(c);i.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function ws(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bs(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var _s=function(){"use strict";function t(n,r){e(f)(this,t),this.providerId=n,this.signInMethod=r}return e(h)(t,[{key:"toJSON",value:function(){return zo("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return zo("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return zo("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return zo("not implemented")}}]),t}();function xs(e,t){return Is.apply(this,arguments)}function Is(){return(Is=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:resetPassword",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Es(e,t){return Ts.apply(this,arguments)}function Ts(){return(Ts=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ss(e,t){return As.apply(this,arguments)}function As(){return(As=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:update",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Cs(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithPassword",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ns(e,t){return Os.apply(this,arguments)}function Os(){return(Os=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:sendOobCode",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ds(e,t){return Ps.apply(this,arguments)}function Ps(){return(Ps=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(n,r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return(Ms=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(n,r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Us(e,t){return Fs.apply(this,arguments)}function Fs(){return(Fs=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(n,r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Vs(e,t){return Bs.apply(this,arguments)}function Bs(){return(Bs=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(n,r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function js(e,t){return qs.apply(this,arguments)}function qs(){return(qs=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithEmailLink",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zs(e,t){return Gs.apply(this,arguments)}function Gs(){return(Gs=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithEmailLink",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e(f)(this,r),(o=n.call(this,"password",a))._email=t,o._password=i,o._tenantId=u,o}return e(h)(r,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o;return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?4:"emailLink"===r.t0?13:14;break;case 4:if(a={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"},!(null===(i=t._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){r.next=12;break}return r.next=8,ds(t,a,"signInWithPassword");case 8:return o=r.sent,r.abrupt("return",Cs(t,o));case 12:return r.abrupt("return",Cs(t,a).catch(function(){var n=e(u)(e(c).mark((function n(r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auth/missing-recaptcha-token"!==r.code){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,ds(t,a,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Cs(t,i));case 8:return e.abrupt("return",Promise.reject(r));case 9:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 13:return r.abrupt("return",js(t,{email:n._email,oobCode:n._password}));case 14:Uo(t,"internal-error");case 15:case"end":return r.stop()}}),r)})))()}},{key:"_linkToIdToken",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Es(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password}));case 4:return e.abrupt("return",zs(t,{idToken:n,email:r._email,oobCode:r._password}));case 5:Uo(t,"internal-error");case 6:case"end":return e.stop()}}),i)})))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new r(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),r}(_s);function Hs(e,t){return Ws.apply(this,arguments)}function Ws(){return(Ws=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithIdp",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).pendingToken=null,t}return e(h)(r,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Hs(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Hs(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Hs(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ii(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Uo("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,i=t.signInMethod,a=go(t,["providerId","signInMethod"]);if(!n||!i)return null;var o=new r(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),r}(_s);function Js(e,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:sendVerificationCode",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ys(){return(Ys=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithPhoneNumber",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $s(){return($s=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,au(n,"POST","/v1/accounts:signInWithPhoneNumber",eu(n,r));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw cu(n,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var Zs=e(Cr)({},"USER_NOT_FOUND","user-not-found");function ec(){return(ec=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.assign(Object.assign({},r),{operation:"REAUTH"}),e.abrupt("return",au(n,"POST","/v1/accounts:signInWithPhoneNumber",eu(n,i),Zs));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this,"phone","phone")).params=t,i}return e(h)(r,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ys.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return $s.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ec.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new r({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new r({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.verificationId,n=e.verificationCode,i=e.phoneNumber,a=e.temporaryProof;return n||t||i||a?new r({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:a}):null}}]),r}(_s);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nc=function(){"use strict";function t(n){var r,i,a,o,u,s;e(f)(this,t);var c=Ei(Ti(n)),l=null!==(r=c.apiKey)&&void 0!==r?r:null,h=null!==(i=c.oobCode)&&void 0!==i?i:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=c.mode)&&void 0!==a?a:null);qo(l&&h&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=h,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return e(h)(t,null,[{key:"parseLink",value:function(e){var n=function(e){var t=Ei(Ti(e)).link,n=t?Ei(Ti(t)).deep_link_id:null,r=Ei(Ti(e)).deep_link_id;return(r?Ei(Ti(r)).link:null)||r||n||t||e}(e);try{return new t(n)}catch(e){return null}}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rc=function(){"use strict";function t(){e(f)(this,t),this.providerId=t.PROVIDER_ID}return e(h)(t,null,[{key:"credential",value:function(e,t){return Ks._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=nc.parseLink(t);return qo(n,"argument-error"),Ks._fromEmailAndCode(e,n.code,n.tenantId)}}]),t}();rc.PROVIDER_ID="password",rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ic=function(){"use strict";function t(n){e(f)(this,t),this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}return e(h)(t,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),t}(),ac=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).scopes=[],t}return e(h)(r,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return e(Kt)(this.scopes)}}]),r}(ic),oc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return qo(e.idToken||e.accessToken,"argument-error"),Qs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return qo("providerId"in t&&"signInMethod"in t,"argument-error"),Qs._fromParams(t)}},{key:"credentialFromResult",value:function(e){return r.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!(i||a||n||o))return null;if(!s)return null;try{return new r(s)._credential({idToken:n,accessToken:i,nonce:u,pendingToken:o})}catch(e){return null}}}]),r}(ac),uc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.call(this,"facebook.com")}return e(h)(r,null,[{key:"credential",value:function(e){return Qs._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(ac);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uc.FACEBOOK_SIGN_IN_METHOD="facebook.com",uc.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call(this,"google.com")).addScope("profile"),t}return e(h)(r,null,[{key:"credential",value:function(e,t){return Qs._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,i=t.oauthAccessToken;if(!n&&!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(ac);sc.GOOGLE_SIGN_IN_METHOD="google.com",sc.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.call(this,"github.com")}return e(h)(r,null,[{key:"credential",value:function(e){return Qs._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(ac);cc.GITHUB_SIGN_IN_METHOD="github.com",cc.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,t)).pendingToken=i,a}return e(h)(r,[{key:"_getIdTokenResponse",value:function(e){return Hs(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Hs(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Hs(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,i=t.signInMethod,a=t.pendingToken;return n&&i&&a&&n===i?new r(n,a):null}},{key:"_create",value:function(e,t){return new r(e,t)}}]),r}(_s),fc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){return e(f)(this,r),qo(t.startsWith("saml."),"argument-error"),n.call(this,t)}return e(h)(r,null,[{key:"credentialFromResult",value:function(e){return r.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=lc.fromJSON(e);return qo(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return lc._create(r,n)}catch(e){return null}}}]),r}(ic),hc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.call(this,"twitter.com")}return e(h)(r,null,[{key:"credential",value:function(e,t){return Qs._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthAccessToken,i=t.oauthTokenSecret;if(!n||!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(ac);function dc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signUp",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hc.TWITTER_SIGN_IN_METHOD="twitter.com",hc.PROVIDER_ID="twitter.com";var pc=function(){"use strict";function t(n){e(f)(this,t),this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}return e(h)(t,null,[{key:"_fromIdTokenResponse",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(u)(e(c).mark((function o(){var u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu._fromIdTokenResponse(n,i,a);case 2:return u=e.sent,s=yc(i),l=new t({user:u,providerId:s,_tokenResponse:i,operationType:r}),e.abrupt("return",l);case 6:case"end":return e.stop()}}),o)})))()}},{key:"_forOperation",value:function(n,r,i){return e(u)(e(c).mark((function a(){var o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=yc(i),e.abrupt("return",new t({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return e.stop()}}),a)})))()}}]),t}();function yc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function mc(){return(mc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n){var r,i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ms(n),e.next=4,i._initializationPromise;case 4:if(!(null===(r=i.currentUser)||void 0===r?void 0:r.isAnonymous)){e.next=6;break}return e.abrupt("return",new pc({user:i.currentUser,providerId:null,operationType:"signIn"}));case 6:return e.next=8,dc(i,{returnSecureToken:!0});case 8:return a=e.sent,e.next=11,pc._fromIdTokenResponse(i,"signIn",a,!0);case 11:return o=e.sent,e.next=14,i._updateCurrentUser(o.user);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o){var u,s;return e(f)(this,r),(u=n.call(this,i.code,i.message)).operationType=a,u.user=o,Object.setPrototypeOf(e(te)(u),r.prototype),u.customData={appName:t.name,tenantId:null!==(s=t.tenantId)&&void 0!==s?s:void 0,_serverResponse:i.customData._serverResponse,operationType:a},u}return e(h)(r,null,[{key:"_fromErrorAndOperation",value:function(e,t,n,i){return new r(e,t,n,i)}}]),r}(yi);function kc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw gc._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function bc(e,t){return _c.apply(this,arguments)}function _c(){return(_c=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(n),e.next=3,Ec(!0,i,r);case 3:return e.t0=hu,e.t1=i.auth,e.next=7,i.getIdToken();case 7:return e.t2=e.sent,e.t3=[r],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return a=e.sent.providerUserInfo,o=wc(a||[]),i.providerData=i.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(i.phoneNumber=null),e.next=18,i.auth._persistUserIfCurrent(i);case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function xc(e,t){return Ic.apply(this,arguments)}function Ic(){return Ic=e(u)(e(c).mark((function t(n,r){var i,a,o=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],e.t0=wu,e.t1=n,e.t2=r,e.t3=n.auth,e.next=7,n.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=i,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",pc._forOperation(n,"link",a));case 14:case"end":return e.stop()}}),t)}))),Ic.apply(this,arguments)}function Ec(e,t,n){return Tc.apply(this,arguments)}function Tc(){return(Tc=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eu(r);case 2:a=wc(r.providerData),o=!1===n?"provider-already-linked":"no-such-provider",qo(a.has(i)===n,r.auth,o);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Sc(e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l,f=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>2&&void 0!==f[2]&&f[2],a=n.auth,o="reauthenticate",e.prev=3,e.next=6,wu(n,kc(a,o,r,n),i);case 6:return qo((u=e.sent).idToken,a,"internal-error"),qo(s=ku(u.idToken),a,"internal-error"),l=s.sub,qo(n.uid===l,a,"user-mismatch"),e.abrupt("return",pc._forOperation(n,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),"auth/user-not-found"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&Uo(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),t,null,[[3,15]])}))),Ac.apply(this,arguments)}function Cc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o,u,s=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],a="signIn",e.next=4,kc(n,a,r);case 4:return o=e.sent,e.next=7,pc._fromIdTokenResponse(n,a,o);case 7:if(u=e.sent,i){e.next=11;break}return e.next=11,n._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),t)}))),Rc.apply(this,arguments)}function Nc(e,t){return Oc.apply(this,arguments)}function Oc(){return(Oc=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cc(ms(n),r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Dc(e,t){return Pc.apply(this,arguments)}function Pc(){return(Pc=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(n),e.next=3,Ec(!1,i,r.providerId);case 3:return e.abrupt("return",xc(i,r));case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Lc(e,t){return Mc.apply(this,arguments)}function Mc(){return(Mc=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc(Ri(n),r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Uc(e,t){return Fc.apply(this,arguments)}function Fc(){return(Fc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(n,"POST","/v1/accounts:signInWithCustomToken",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Vc(){return(Vc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ms(n),e.next=3,Uc(i,{token:r,returnSecureToken:!0});case 3:return a=e.sent,e.next=6,pc._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bc=function(){"use strict";function t(n,r){e(f)(this,t),this.factorId=n,this.uid=r.mfaEnrollmentId,this.enrollmentTime=new Date(r.enrolledAt).toUTCString(),this.displayName=r.displayName}return e(h)(t,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?jc._fromServerResponse(e,t):"totpInfo"in t?qc._fromServerResponse(e,t):Uo(e,"internal-error")}}]),t}(),jc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this,"phone",t)).phoneNumber=t.phoneInfo,i}return e(h)(r,null,[{key:"_fromServerResponse",value:function(e,t){return new r(t)}}]),r}(Bc),qc=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){return e(f)(this,r),n.call(this,"totp",t)}return e(h)(r,null,[{key:"_fromServerResponse",value:function(e,t){return new r(t)}}]),r}(Bc);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zc(e,t,n){var r;qo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qo(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gc(){return Gc=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r,i){var a,o,s,l;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=ms(n),s={requestType:"PASSWORD_RESET",email:r,clientType:"CLIENT_TYPE_WEB"},!(null===(a=o._getRecaptchaConfig())||void 0===a?void 0:a.emailPasswordEnabled)){t.next=12;break}return t.next=6,ds(o,s,"getOobCode",!0);case 6:return l=t.sent,i&&zc(o,l,i),t.next=10,Ls(o,l);case 10:t.next=15;break;case 12:return i&&zc(o,s,i),t.next=15,Ls(o,s).catch(function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auth/missing-recaptcha-token"!==n.code){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,ds(o,s,"getOobCode",!0);case 4:return r=e.sent,i&&zc(o,r,i),e.next=8,Ls(o,r);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(n));case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 15:case"end":return t.stop()}}),t)}))),Gc.apply(this,arguments)}function Kc(){return(Kc=e(u)(e(c).mark((function t(n,r,i){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs(Ri(n),{oobCode:r,newPassword:i});case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Hc(){return(Hc=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss(Ri(n),{oobCode:r});case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Wc(e,t){return Qc.apply(this,arguments)}function Qc(){return(Qc=e(u)(e(c).mark((function t(n,r){var i,a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(n),e.next=3,xs(i,{oobCode:r});case 3:a=e.sent,qo(o=a.requestType,i,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return qo(a.newEmail,i,"internal-error"),e.abrupt("break",14);case 12:qo(a.mfaInfo,i,"internal-error");case 13:qo(a.email,i,"internal-error");case 14:return u=null,a.mfaInfo&&(u=Bc._fromServerResponse(ms(i),a.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.newEmail:a.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.email:a.newEmail)||null,multiFactorInfo:u},operation:o});case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Jc(){return(Jc=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc(Ri(n),r);case 2:return i=e.sent.data,e.abrupt("return",i.email);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Xc(e,t,n){return Yc.apply(this,arguments)}function Yc(){return Yc=e(u)(e(c).mark((function t(n,r,i){var a,o,s,l,f,h,d;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=ms(n),s={returnSecureToken:!0,email:r,password:i,clientType:"CLIENT_TYPE_WEB"},!(null===(a=o._getRecaptchaConfig())||void 0===a?void 0:a.emailPasswordEnabled)){t.next=11;break}return t.next=7,ds(o,s,"signUpPassword");case 7:f=t.sent,l=dc(o,f),t.next=12;break;case 11:l=dc(o,s).catch(function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auth/missing-recaptcha-token"!==n.code){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,ds(o,s,"signUpPassword");case 4:return r=e.sent,e.abrupt("return",dc(o,r));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:return t.next=14,l.catch((function(e){return Promise.reject(e)}));case 14:return h=t.sent,t.next=17,pc._fromIdTokenResponse(o,"signIn",h);case 17:return d=t.sent,t.next=20,o._updateCurrentUser(d.user);case 20:return t.abrupt("return",d);case 21:case"end":return t.stop()}}),t)}))),Yc.apply(this,arguments)}function $c(){return $c=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r,i){var a,o,s,l,f;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=function(e,t){qo(t.handleCodeInApp,o,"argument-error"),t&&zc(o,e,t)},o=ms(n),s={requestType:"EMAIL_SIGNIN",email:r,clientType:"CLIENT_TYPE_WEB"},!(null===(a=o._getRecaptchaConfig())||void 0===a?void 0:a.emailPasswordEnabled)){t.next=14;break}return t.next=8,ds(o,s,"getOobCode",!0);case 8:return f=t.sent,l(f,i),t.next=12,Us(o,f);case 12:t.next=17;break;case 14:return l(s,i),t.next=17,Us(o,s).catch(function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auth/missing-recaptcha-token"!==n.code){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,ds(o,s,"getOobCode",!0);case 4:return r=e.sent,l(r,i),e.next=8,Us(o,r);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(n));case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 17:case"end":return t.stop()}}),t)}))),$c.apply(this,arguments)}function Zc(){return(Zc=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ri(n),qo((o=rc.credentialWithLink(r,i||Ko()))._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),e.abrupt("return",Nc(a,o));case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return(tl=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:createAuthUri",eu(n,r)));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nl(){return(nl=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ho()?Ko():"http://localhost",a={identifier:r,continueUri:i},e.next=4,el(Ri(n),a);case 4:return o=e.sent.signinMethods,e.abrupt("return",o||[]);case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function rl(){return(rl=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(n),e.next=3,n.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_EMAIL",idToken:a},r&&zc(i.auth,o,r),e.next=8,Ds(i.auth,o);case 8:if(e.sent.email===n.email){e.next=12;break}return e.next=12,n.reload();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function il(){return(il=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ri(n),e.next=3,n.getIdToken();case 3:return o=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:r},i&&zc(a.auth,u,i),e.next=8,Vs(a.auth,u);case 8:if(e.sent.email===n.email){e.next=12;break}return e.next=12,n.reload();case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function al(e,t){return ol.apply(this,arguments)}function ol(){return(ol=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tu(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ul(){return(ul=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.displayName,a=r.photoURL,void 0!==i||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return o=Ri(n),e.next=6,o.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:i,photoUrl:a,returnSecureToken:!0},e.next=10,wu(o,al(o.auth,s));case 10:return l=e.sent,o.displayName=l.displayName||null,o.photoURL=l.photoUrl||null,(f=o.providerData.find((function(e){return"password"===e.providerId})))&&(f.displayName=o.displayName,f.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(l);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function sl(e,t,n){return cl.apply(this,arguments)}function cl(){return(cl=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.auth,e.next=3,n.getIdToken();case 3:return o=e.sent,u={idToken:o,returnSecureToken:!0},r&&(u.email=r),i&&(u.password=i),e.next=9,wu(n,Es(a,u));case 9:return s=e.sent,e.next=12,n._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ll=function t(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(f)(this,t),this.isNewUser=n,this.providerId=r,this.profile=i},fl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o){var u;return e(f)(this,r),(u=n.call(this,t,i,a)).username=o,u}return r}(ll),hl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"facebook.com",i)}return r}(ll),dl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"github.com",i,"string"==typeof(null==i?void 0:i.login)?null==i?void 0:i.login:null)}return r}(fl),vl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"google.com",i)}return r}(ll),pl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){return e(f)(this,r),n.call(this,t,"twitter.com",i,a)}return r}(fl);function yl(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=ku(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ll(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new hl(a,i);case"github.com":return new dl(a,i);case"google.com":return new vl(a,i);case"twitter.com":return new pl(a,i,e.screenName||null);case"custom":case"anonymous":return new ll(a,null);default:return new ll(a,r,i)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml=function(){"use strict";function t(n,r,i){e(f)(this,t),this.type=n,this.credential=r,this.auth=i}return e(h)(t,[{key:"toJSON",value:function(){var t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:e(Cr)({},t,this.credential)}}}],[{key:"_fromIdtoken",value:function(e,n){return new t("enroll",e,n)}},{key:"_fromMfaPendingCredential",value:function(e){return new t("signin",e)}},{key:"fromJSON",value:function(e){var n,r;if(null==e?void 0:e.multiFactorSession){if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return t._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return t._fromIdtoken(e.multiFactorSession.idToken)}return null}}]),t}(),gl=function(){"use strict";function t(n,r,i){e(f)(this,t),this.session=n,this.hints=r,this.signInResolver=i}return e(h)(t,[{key:"resolveSignIn",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,e.abrupt("return",n.signInResolver(i));case 2:case"end":return e.stop()}}),r)})))()}}],[{key:"_fromError",value:function(n,r){var i=ms(n),a=r.customData._serverResponse,o=(a.mfaInfo||[]).map((function(e){return Bc._fromServerResponse(i,e)}));qo(a.mfaPendingCredential,i,"internal-error");var s=ml._fromMfaPendingCredential(a.mfaPendingCredential);return new t(s,o,function(){var t=e(u)(e(c).mark((function t(n){var o,u,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._process(i,s);case 2:o=e.sent,delete a.mfaInfo,delete a.mfaPendingCredential,u=Object.assign(Object.assign({},a),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=r.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,pc._fromIdTokenResponse(i,r.operationType,u);case 11:return l=e.sent,e.next=14,i._updateCurrentUser(l.user);case 14:return e.abrupt("return",l);case 15:return qo(r.user,i,"internal-error"),e.abrupt("return",pc._forOperation(r.user,r.operationType,u));case 17:Uo(i,"internal-error");case 18:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kl(e,t){return tu(e,"POST","/v2/accounts/mfaEnrollment:start",eu(e,t))}function wl(e,t){return tu(e,"POST","/v2/accounts/mfaEnrollment:finalize",eu(e,t))}var bl=function(){"use strict";function t(n){var r=this;e(f)(this,t),this.user=n,this.enrolledFactors=[],n._onReload((function(e){e.mfaInfo&&(r.enrolledFactors=e.mfaInfo.map((function(e){return Bc._fromServerResponse(n.auth,e)})))}))}return e(h)(t,[{key:"getSession",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ml,e.next=3,t.user.getIdToken();case 3:return e.t1=e.sent,e.t2=t.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),n)})))()}},{key:"enroll",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,r.getSession();case 3:return o=e.sent,e.next=6,wu(r.user,a._process(r.user.auth,o,n));case 6:return u=e.sent,e.next=9,r.user._updateTokensIfNecessary(u);case 9:return e.abrupt("return",r.user.reload());case 10:case"end":return e.stop()}}),i)})))()}},{key:"unenroll",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?t:t.uid,e.next=3,n.user.getIdToken();case 3:return a=e.sent,e.prev=4,e.next=7,wu(n.user,tu(r=n.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",eu(r,{idToken:a,mfaEnrollmentId:i})));case 7:return o=e.sent,n.enrolledFactors=n.enrolledFactors.filter((function(e){return e.uid!==i})),e.next=11,n.user._updateTokensIfNecessary(o);case 11:return e.next=13,n.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var r}),r,null,[[4,15]])})))()}}],[{key:"_fromUser",value:function(e){return new t(e)}}]),t}(),_l=new WeakMap;var xl="__sak",Il=function(){"use strict";function t(n,r){e(f)(this,t),this.storageRetriever=n,this.type=r}return e(h)(t,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(xl,"1"),this.storage.removeItem(xl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t,i;return e(f)(this,r),(t=n.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(e,n){return t.onStorageEvent(e,n)},t.listeners={},t.localCache={},t.pollTimer=null,t.safariLocalStorageNotSynced=(zu(i=li())||Ju(i))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),t.fallbackToPolling=Zu(),t._shouldAllowMigration=!0,t}return e(h)(r,[{key:"forAllChangedKeys",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.listeners)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=this.storage.getItem(o),s=this.localCache[o];u!==s&&e(o,s,u)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"onStorageEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(e.key){var r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}var a=function(){var e=n.storage.getItem(r);(t||n.localCache[r]!==e)&&n.notifyListeners(r,e)},o=this.storage.getItem(r);$u()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else{var u=this;this.forAllChangedKeys((function(e,t,n){u.notifyListeners(e,n)}))}}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,u=Array.from(n)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){(0,o.value)(t?JSON.parse(t):t)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){var t=e;e.forAllChangedKeys((function(e,n,r){t.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(t,n){var i=this,a=this;return e(u)(e(c).mark((function o(){return e(c).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e(uo)(e(lo)(r.prototype),"_set",i).call(a,t,n);case 2:a.localCache[t]=JSON.stringify(n);case 3:case"end":return o.stop()}}),o)})))()}},{key:"_get",value:function(t){var n=this,i=this;return e(u)(e(c).mark((function a(){var o;return e(c).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(uo)(e(lo)(r.prototype),"_get",n).call(i,t);case 2:return o=a.sent,i.localCache[t]=JSON.stringify(o),a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()}},{key:"_remove",value:function(t){var n=this,i=this;return e(u)(e(c).mark((function a(){return e(c).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(uo)(e(lo)(r.prototype),"_remove",n).call(i,t);case 2:delete i.localCache[t];case 3:case"end":return a.stop()}}),a)})))()}}]),r}(Il);El.type="LOCAL";var Tl=El,Sl=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.call(this,(function(){return window.sessionStorage}),"SESSION")}return e(h)(r,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),r}(Il);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.type="SESSION";var Al=Sl;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return Promise.all(t.map(function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:return r=e.sent,e.abrupt("return",{fulfilled:!0,value:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rl=function(){"use strict";function t(n){e(f)(this,t),this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return e(h)(t,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o,s,l,f,h,d;return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=t).data,o=a.eventId,s=a.eventType,l=a.data,null==(f=n.handlersMap[s])?void 0:f.size){r.next=5;break}return r.abrupt("return");case 5:return i.ports[0].postMessage({status:"ack",eventId:o,eventType:s}),h=Array.from(f).map(function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(i.origin,l));case 1:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.next=9,Cl(h);case 9:d=r.sent,i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d});case 11:case"end":return r.stop()}}),r)})))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(e){var n=this.receivers.find((function(t){return t.isListeningto(e)}));if(n)return n;var r=new t(e);return this.receivers.push(r),r}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rl.receivers=[];var Ol=function(){"use strict";function t(n){e(f)(this,t),this.target=n,this.handlers=new Set}return e(h)(t,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this;return e(u)(e(c).mark((function a(){var o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=3;break}throw new Error("connection_unavailable");case 3:return e.abrupt("return",new Promise((function(e,a){var c=Nl("",20);o.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);s={messageChannel:o,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),u=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(u),e(n.data.response);break;default:clearTimeout(l),clearTimeout(u),a(new Error("invalid_response"))}}},i.handlers.add(s),o.port1.addEventListener("message",s.onMessage),i.target.postMessage({eventType:t,eventId:c,data:n},[o.port2])})).finally((function(){s&&i.removeMessageHandler(s)})));case 6:case"end":return e.stop()}}),a)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(){return window}function Pl(e){Dl().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return void 0!==Dl().WorkerGlobalScope&&"function"==typeof Dl().importScripts}function Ml(){return Ul.apply(this,arguments)}function Ul(){return(Ul=e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return n=e.sent,e.abrupt("return",n.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fl="firebaseLocalStorageDb",Vl="firebaseLocalStorage",Bl="fbase_key",jl=function(){"use strict";function t(n){e(f)(this,t),this.request=n}return e(h)(t,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){var r=e;e.request.addEventListener("success",(function(){t(r.request.result)})),e.request.addEventListener("error",(function(){n(r.request.error)}))}))}}]),t}();function ql(e,t){return e.transaction([Vl],t?"readwrite":"readonly").objectStore(Vl)}function zl(){var e=indexedDB.deleteDatabase(Fl);return new jl(e).toPromise()}function Gl(){var t=indexedDB.open(Fl,1);return new Promise((function(n,r){t.addEventListener("error",(function(){r(t.error)})),t.addEventListener("upgradeneeded",(function(){var e=t.result;try{e.createObjectStore(Vl,{keyPath:Bl})}catch(e){r(e)}})),t.addEventListener("success",e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t.result).objectStoreNames.contains(Vl)){e.next=12;break}return i.close(),e.next=5,zl();case 5:return e.t0=n,e.next=8,Gl();case 8:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 12:n(i);case 13:case"end":return e.stop()}}),r)}))))}))}function Kl(e,t,n){return Hl.apply(this,arguments)}function Hl(){return(Hl=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=ql(n,!0).put((a={},e(Cr)(a,Bl,r),e(Cr)(a,"value",i),a)),t.abrupt("return",new jl(o).toPromise());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wl(e,t){return Ql.apply(this,arguments)}function Ql(){return(Ql=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ql(n,!1).get(r),e.next=3,new jl(i).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Jl(e,t){var n=ql(e,!0).delete(t);return new jl(n).toPromise()}var Xl=function(){"use strict";function t(){e(f)(this,t),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return e(h)(t,[{key:"_openDb",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.db){e.next=2;break}return e.abrupt("return",t.db);case 2:return e.next=4,Gl();case 4:return t.db=e.sent,e.abrupt("return",t.db);case 6:case"end":return e.stop()}}),n)})))()}},{key:"_withRetries",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:return e.prev=2,e.next=5,n._openDb();case 5:return a=e.sent,e.next=8,t(a);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(i++>3)){e.next=15;break}throw e.t0;case 15:n.db&&(n.db.close(),n.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),r,null,[[2,11]])})))()}},{key:"initializeServiceWorkerMessaging",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ll()?t.initializeReceiver():t.initializeSender());case 1:case"end":return e.stop()}}),n)})))()}},{key:"initializeReceiver",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.receiver=Rl._getInstance(Ll()?self:null),t.receiver._subscribe("keyChanged",function(){var n=e(u)(e(c).mark((function n(r,i){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(i.key)});case 4:case"end":return e.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}},{key:"initializeSender",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Ml();case 3:if(t.activeServiceWorker=e.sent,t.activeServiceWorker){e.next=6;break}return e.abrupt("return");case 6:return t.sender=new Ol(t.activeServiceWorker),e.next=9,t.sender._send("ping",{},800);case 9:if(a=e.sent){e.next=12;break}return e.abrupt("return");case 12:(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0);case 13:case"end":return e.stop()}}),n)})))()}},{key:"notifyServiceWorker",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.sender&&n.activeServiceWorker&&(r=void 0,((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)===n.activeServiceWorker)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,n.sender._send("keyChanged",{key:t},n.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}var r}),r,null,[[2,7]])})))()}},{key:"_isAvailable",value:function(){return e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Gl();case 5:return n=e.sent,e.next=8,Kl(n,xl,"1");case 8:return e.next=10,Jl(n,xl);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))()}},{key:"_withPendingWrite",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,n.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),r,null,[[1,,4,7]])})))()}},{key:"_set",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r._withPendingWrite(e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Kl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),i)})))));case 1:case"end":return i.stop()}}),i)})))()}},{key:"_get",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Wl(e,t)}));case 2:return i=e.sent,n.localCache[t]=i,e.abrupt("return",i);case 5:case"end":return e.stop()}}),r)})))()}},{key:"_remove",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite(e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Jl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),r)})))));case 1:case"end":return r.stop()}}),r)})))()}},{key:"_poll",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o,u,s,l,f,h,d,v,p,y,m,g,k,w;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._withRetries((function(e){var t=ql(e,!1).getAll();return new jl(t).toPromise()}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===t.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:for(i=[],a=new Set,o=!0,u=!1,s=void 0,e.prev=10,l=r[Symbol.iterator]();!(o=(f=l.next()).done);o=!0)h=f.value,d=h.fbase_key,v=h.value,a.add(d),JSON.stringify(t.localCache[d])!==JSON.stringify(v)&&(t.notifyListeners(d,v),i.push(d));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),u=!0,s=e.t0;case 18:e.prev=18,e.prev=19,o||null==l.return||l.return();case 21:if(e.prev=21,!u){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(p=!0,y=!1,m=void 0,e.prev=27,g=Object.keys(t.localCache)[Symbol.iterator]();!(p=(k=g.next()).done);p=!0)w=k.value,t.localCache[w]&&!a.has(w)&&(t.notifyListeners(w,null),i.push(w));e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),y=!0,m=e.t1;case 35:e.prev=35,e.prev=36,p||null==g.return||g.return();case 38:if(e.prev=38,!y){e.next=41;break}throw m;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",i);case 44:case"end":return e.stop()}}),n,null,[[10,14,18,26],[19,,21,25],[27,31,35,43],[36,,38,42]])})))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,u=Array.from(n)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){this.stopPolling();var t=this;this.pollTimer=setInterval(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._poll());case 1:case"end":return e.stop()}}),n)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),t}();Xl.type="LOCAL";var Yl=Xl;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(e,t){return tu(e,"POST","/v2/accounts/mfaSignIn:start",eu(e,t))}function Zl(e,t){return tu(e,"POST","/v2/accounts/mfaSignIn:finalize",eu(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ef=1e12,tf=function(){"use strict";function t(n){e(f)(this,t),this.auth=n,this.counter=ef,this._widgets=new Map}return e(h)(t,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new nf(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ef;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ef;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t||ef,null===(i=n._widgets.get(a))||void 0===i||i.execute(),e.abrupt("return","");case 4:case"end":return e.stop()}}),r)})))()}}]),t}(),nf=function(){"use strict";function t(n,r,i){var a=this;e(f)(this,t),this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var o="string"==typeof n?document.getElementById(n):n;qo(o,"argument-error",{appName:r}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return e(h)(t,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){var t=e;e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);var n=e.params,r=n.callback,i=n["expired-callback"];if(r)try{r(e.responseToken)}catch(e){}e.timerId=window.setTimeout((function(){if(t.timerId=null,t.responseToken=null,i)try{i()}catch(e){}t.isVisible&&t.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),t}();var rf=cs("rcb"),af=new Qo(3e4,6e4),of="https://www.google.com/recaptcha/api.js?",uf=function(){"use strict";function t(){var n;e(f)(this,t),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(n=Dl().grecaptcha)||void 0===n?void 0:n.render)}return e(h)(t,[{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;return qo(sf(t),e,"argument-error"),this.shouldResolveImmediately(t)&&as(Dl().grecaptcha)?Promise.resolve(Dl().grecaptcha):new Promise((function(r,i){var a=n,o=Dl().setTimeout((function(){i(Fo(e,"network-request-failed"))}),af.get());Dl()[rf]=function(){var n=a;Dl().clearTimeout(o),delete Dl()[rf];var u=Dl().grecaptcha;if(u&&as(u)){var s=u.render;u.render=function(e,t){var r=s(e,t);return n.counter++,r},a.hostLanguage=t,r(u)}else i(Fo(e,"internal-error"))},ss("".concat(of,"?").concat(Ii({onload:rf,render:"explicit",hl:t}))).catch((function(){clearTimeout(o),i(Fo(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Dl().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),t}();function sf(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var cf=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"load",value:function(t){return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new tf(t));case 1:case"end":return e.stop()}}),n)})))()}},{key:"clearedOneInstance",value:function(){}}]),t}(),lf="recaptcha",ff={theme:"light",type:"image"},hf=function(){"use strict";function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ff),i=arguments.length>2?arguments[2]:void 0;e(f)(this,t),this.parameters=r,this.type=lf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ms(i),this.isInvisible="invisible"===this.parameters.size,qo("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"==typeof n?document.getElementById(n):n;qo(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cf:new uf,this.validateStartingState()}return e(h)(t,[{key:"verify",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assertNotDestroyed(),e.next=3,t.render();case 3:if(r=e.sent,i=t.getAssertedRecaptcha(),!(a=i.getResponse(r))){e.next=8;break}return e.abrupt("return",a);case 8:return e.abrupt("return",new Promise((function(e){var n=function(r){r&&(t.tokenChangeListeners.delete(n),e(r))};t.tokenChangeListeners.add(n),t.isInvisible&&i.execute(r)})));case 9:case"end":return e.stop()}}),n)})))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){qo(!this.parameters.sitekey,this.auth,"argument-error"),qo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qo("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"==typeof e)e(n);else if("string"==typeof e){var r=Dl()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){qo(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:return t.widgetId||(r=t.container,t.isInvisible||(i=document.createElement("div"),r.appendChild(i),r=i),t.widgetId=t.getAssertedRecaptcha().render(r,t.parameters)),e.abrupt("return",t.widgetId);case 4:case"end":return e.stop()}}),n)})))()}},{key:"init",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo(Ho()&&!Ll(),t.auth,"internal-error"),e.next=3,df();case 3:return e.next=5,t._recaptchaLoader.load(t.auth,t.auth.languageCode||void 0);case 5:return t.recaptcha=e.sent,e.next=8,ts(t.auth);case 8:qo(r=e.sent,t.auth,"internal-error"),t.parameters.sitekey=r;case 11:case"end":return e.stop()}}),n)})))()}},{key:"getAssertedRecaptcha",value:function(){return qo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vf=function(){"use strict";function t(n,r){e(f)(this,t),this.verificationId=n,this.onConfirmation=r}return e(h)(t,[{key:"confirm",value:function(e){var t=tc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),t}();function pf(){return(pf=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ms(n),e.next=3,kf(a,r,Ri(i));case 3:return o=e.sent,e.abrupt("return",new vf(o,(function(e){return Nc(a,e)})));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function yf(e,t,n){return mf.apply(this,arguments)}function mf(){return(mf=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ri(n),e.next=3,Ec(!1,a,"phone");case 3:return e.next=5,kf(a.auth,r,Ri(i));case 5:return o=e.sent,e.abrupt("return",new vf(o,(function(e){return Dc(a,e)})));case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function gf(){return(gf=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ri(n),e.next=3,kf(a.auth,r,Ri(i));case 3:return o=e.sent,e.abrupt("return",new vf(o,(function(e){return Lc(a,e)})));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function kf(e,t,n){return wf.apply(this,arguments)}function wf(){return(wf=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l,f,h,d;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,i.verify();case 3:if(o=e.sent,e.prev=4,qo("string"==typeof o,n,"argument-error"),qo(i.type===lf,n,"argument-error"),!("session"in(u="string"==typeof r?{phoneNumber:r}:r))){e.next=28;break}if(s=u.session,!("phoneNumber"in u)){e.next=19;break}return qo("enroll"===s.type,n,"internal-error"),e.next=15,kl(n,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:o}});case 15:return l=e.sent,e.abrupt("return",l.phoneSessionInfo.sessionInfo);case 19:return qo("signin"===s.type,n,"internal-error"),qo(f=(null===(a=u.multiFactorHint)||void 0===a?void 0:a.uid)||u.multiFactorUid,n,"missing-multi-factor-info"),e.next=24,$l(n,{mfaPendingCredential:s.credential,mfaEnrollmentId:f,phoneSignInInfo:{recaptchaToken:o}});case 24:return h=e.sent,e.abrupt("return",h.phoneResponseInfo.sessionInfo);case 26:e.next=32;break;case 28:return e.next=30,Js(n,{phoneNumber:u.phoneNumber,recaptchaToken:o});case 30:return d=e.sent.sessionInfo,e.abrupt("return",d);case 32:return e.prev=32,i._reset(),e.finish(32);case 35:case"end":return e.stop()}}),t,null,[[4,,32,35]])})))).apply(this,arguments)}function bf(){return(bf=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xc(Ri(n),r);case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _f=function(){"use strict";function t(n){e(f)(this,t),this.providerId=t.PROVIDER_ID,this.auth=ms(n)}return e(h)(t,[{key:"verifyPhoneNumber",value:function(e,t){return kf(this.auth,e,Ri(t))}}],[{key:"credential",value:function(e,t){return tc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(e){var n=e;return t.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?tc._fromTokenResponse(n,r):null}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xf(e,t){return t?Mu(t):(qo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_f.PROVIDER_ID="phone",_f.PHONE_SIGN_IN_METHOD="phone";var If=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this,"custom","custom")).params=t,i}return e(h)(r,[{key:"_getIdTokenResponse",value:function(e){return Hs(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Hs(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Hs(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),r}(_s);function Ef(e){return Cc(e.auth,new If(e),e.bypassAuthState)}function Tf(e){var t=e.auth,n=e.user;return qo(n,t,"internal-error"),Sc(n,new If(e),e.bypassAuthState)}function Sf(e){return Af.apply(this,arguments)}function Af(){return(Af=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.auth,qo(i=n.user,r,"internal-error"),e.abrupt("return",xc(i,new If(n),n.bypassAuthState));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cf=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e(f)(this,t),this.auth=n,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}return e(h)(t,[{key:"execute",value:function(){var t=this;return new Promise(function(){var n=e(u)(e(c).mark((function n(r,i){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:r,reject:i},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.urlResponse,a=t.sessionId,o=t.postBody,u=t.tenantId,s=t.error,l=t.type,!s){e.next=4;break}return n.reject(s),e.abrupt("return");case 4:return f={auth:n.auth,requestUri:i,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState},e.prev=5,e.t0=n,e.next=9,n.getIdpTask(l)(f);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),n.reject(e.t2);case 16:case"end":return e.stop()}}),r,null,[[5,13]])})))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ef;case"linkViaPopup":case"linkViaRedirect":return Sf;case"reauthViaPopup":case"reauthViaRedirect":return Tf;default:Uo(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),t}(),Rf=new Qo(2e3,1e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(e,t,n){return Of.apply(this,arguments)}function Of(){return(Of=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ms(n),Bo(n,r,ic),o=xf(a,i),u=new Mf(a,"signInViaPopup",r,o),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Df(){return(Df=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bo((a=Ri(n)).auth,r,ic),o=xf(a.auth,i),u=new Mf(a.auth,"reauthViaPopup",r,o,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Pf(e,t,n){return Lf.apply(this,arguments)}function Lf(){return(Lf=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bo((a=Ri(n)).auth,r,ic),o=xf(a.auth,i),u=new Mf(a.auth,"linkViaPopup",r,o,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var Mf=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o,u){var s;return e(f)(this,r),(s=n.call(this,t,i,o,u)).provider=a,s.authWindow=null,s.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=e(te)(s),s}return e(h)(r,[{key:"executeNotNull",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.execute();case 2:return qo(r=e.sent,t.auth,"internal-error"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Go(1===t.filter.length,"Popup operations only handle one event"),r=Nl(),e.next=4,t.resolver._openPopup(t.auth,t.provider,t.filter[0],r);case 4:t.authWindow=e.sent,t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch((function(e){t.reject(e)})),t.resolver._isIframeWebStorageSupported(t.auth,(function(e){e||t.reject(Fo(t.auth,"web-storage-unsupported"))})),t.pollUserCancellation();case 9:case"end":return e.stop()}}),n)})))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fo(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function(){var n,r;if(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed){var i=e;e.pollId=window.setTimeout((function(){i.pollId=null,i.reject(Fo(i.auth,"popup-closed-by-user"))}),8e3)}else e.pollId=window.setTimeout(t,Rf.get())};t()}}]),r}(Cf);Mf.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Uf=new Map,Ff=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(f)(this,r),(a=n.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o)).eventId=null,a}return e(h)(r,[{key:"execute",value:function(){var t=this,n=this;return e(u)(e(c).mark((function i(){var a,o;return e(c).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=Uf.get(n.auth._key())){i.next=21;break}return i.prev=2,i.next=5,Vf(n.resolver,n.auth);case 5:if(!i.sent){i.next=12;break}return i.next=9,e(uo)(e(lo)(r.prototype),"execute",t).call(n);case 9:i.t0=i.sent,i.next=13;break;case 12:i.t0=null;case 13:o=i.t0,a=function(){return Promise.resolve(o)},i.next=20;break;case 17:i.prev=17,i.t1=i.catch(2),a=function(){return Promise.reject(i.t1)};case 20:Uf.set(n.auth._key(),a);case 21:return n.bypassAuthState||Uf.set(n.auth._key(),(function(){return Promise.resolve(null)})),i.abrupt("return",a());case 23:case"end":return i.stop()}}),i,null,[[2,17]])})))()}},{key:"onAuthEvent",value:function(t){var n=this,i=this,a=function(){return e(uo)(e(lo)(r.prototype),"onAuthEvent",n)};return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",a().call(i,t));case 4:if("unknown"!==t.type){e.next=7;break}return i.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,i.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return i.user=r,e.abrupt("return",a().call(i,t));case 16:i.resolve(null);case 17:case"end":return e.stop()}}),n)})))()}},{key:"onExecution",value:function(){return e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})))()}},{key:"cleanUp",value:function(){}}]),r}(Cf);function Vf(e,t){return Bf.apply(this,arguments)}function Bf(){return(Bf=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kf(r),a=Gf(n),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(i);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,a._remove(i);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function jf(e,t){return qf.apply(this,arguments)}function qf(){return(qf=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gf(n)._set(Kf(r),"true"));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zf(e,t){Uf.set(e._key(),t)}function Gf(e){return Mu(e._redirectPersistence)}function Kf(e){return Vu("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(e,t,n){return function(e,t,n){return Wf.apply(this,arguments)}(e,t,n)}function Wf(){return(Wf=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ms(n),Bo(n,r,ic),e.next=4,a._initializationPromise;case 4:return o=xf(a,i),e.next=7,jf(o,a);case 7:return e.abrupt("return",o._openRedirect(a,r,"signInViaRedirect"));case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Qf(e,t,n){return function(e,t,n){return Jf.apply(this,arguments)}(e,t,n)}function Jf(){return(Jf=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bo((a=Ri(n)).auth,r,ic),e.next=4,a.auth._initializationPromise;case 4:return o=xf(a.auth,i),e.next=7,jf(o,a.auth);case 7:return e.next=9,nh(a);case 9:return u=e.sent,e.abrupt("return",o._openRedirect(a.auth,r,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Xf(e,t,n){return function(e,t,n){return Yf.apply(this,arguments)}(e,t,n)}function Yf(){return(Yf=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bo((a=Ri(n)).auth,r,ic),e.next=4,a.auth._initializationPromise;case 4:return o=xf(a.auth,i),e.next=7,Ec(!1,a,r.providerId);case 7:return e.next=9,jf(o,a.auth);case 9:return e.next=11,nh(a);case 11:return u=e.sent,e.abrupt("return",o._openRedirect(a.auth,r,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function $f(e,t){return Zf.apply(this,arguments)}function Zf(){return(Zf=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ms(n)._initializationPromise;case 2:return e.abrupt("return",eh(n,r,!1));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function eh(e,t){return th.apply(this,arguments)}function th(){return th=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],a=ms(n),o=xf(a,r),u=new Ff(a,o,i),e.next=6,u.execute();case 6:if(!(s=e.sent)||i){e.next=13;break}return delete s.user._redirectEventId,e.next=11,a._persistUserIfCurrent(s.user);case 11:return e.next=13,a._setRedirectUser(null,r);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),t)}))),th.apply(this,arguments)}function nh(e){return rh.apply(this,arguments)}function rh(){return(rh=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nl("".concat(n.uid,":::")),n._redirectEventId=r,e.next=4,n.auth._setRedirectUser(n);case 4:return e.next=6,n.auth._persistUserIfCurrent(n);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ih=function(){"use strict";function t(n){e(f)(this,t),this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return e(h)(t,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!oh(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fo(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ah(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ah(e)),this.lastProcessedEventTime=Date.now()}}]),t}();function ah(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function oh(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function uh(e){return sh.apply(this,arguments)}function sh(){return sh=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n){var r,i=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",tu(n,"GET","/v1/projects",r));case 2:case"end":return e.stop()}}),t)}))),sh.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ch=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lh=/^https?/;function fh(){return(fh=e(u)(e(c).mark((function t(n){var r,i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uh(n);case 4:r=e.sent.authorizedDomains,i=!0,a=!1,o=void 0,e.prev=6,u=r[Symbol.iterator]();case 8:if(i=(s=u.next()).done){e.next=20;break}if(l=s.value,e.prev=10,!hh(l)){e.next=13;break}return e.abrupt("return");case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:i=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(6),a=!0,o=e.t1;case 26:e.prev=26,e.prev=27,i||null==u.return||u.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:Uo(n,"unauthorized-domain");case 35:case"end":return e.stop()}}),t,null,[[6,22,26,34],[10,15],[27,,29,33]])})))).apply(this,arguments)}function hh(e){var t=Ko(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!lh.test(r))return!1;if(ch.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dh=new Qo(3e4,6e4);function vh(){var t=Dl().___jsl,n=!0,r=!1,i=void 0;if(null==t?void 0:t.H)try{for(var a,o=Object.keys(t.H)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(t.H[u].r=t.H[u].r||[],t.H[u].L=t.H[u].L||[],t.H[u].r=e(Kt)(t.H[u].L),t.CP)for(var s=0;s<t.CP.length;s++)t.CP[s]=null}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var ph=null;function yh(e){return ph=ph||function(e){return new Promise((function(t,n){var r,i,a;function o(){vh(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){vh(),n(Fo(e,"network-request-failed"))},timeout:dh.get()})}if(null===(i=null===(r=Dl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Dl().gapi)||void 0===a?void 0:a.load)){var u=cs("iframefcb");return Dl()[u]=function(){gapi.load?o():n(Fo(e,"network-request-failed"))},ss("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ph=null,e}))}(e),ph}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh=new Qo(5e3,15e3),gh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wh(e){var t=e.config;qo(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Jo(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ra},i=kh.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ii(r).slice(1))}function bh(e){return _h.apply(this,arguments)}function _h(){return _h=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yh(n);case 2:return r=t.sent,qo(i=Dl().gapi,n,"internal-error"),t.abrupt("return",r.open({where:document.body,url:wh(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gh,dontclear:!0},(function(t){return new Promise(function(){var r=e(u)(e(c).mark((function r(i,a){var o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){Dl().clearTimeout(u),i(t)},e.next=3,t.restyle({setHideOnLeave:!1});case 3:o=Fo(n,"network-request-failed"),u=Dl().setTimeout((function(){a(o)}),mh.get()),t.ping(s).then(s,(function(){a(o)}));case 7:case"end":return e.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())})));case 6:case"end":return t.stop()}}),t)}))),_h.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ih="_blank",Eh="http://localhost",Th=function(){"use strict";function t(n){e(f)(this,t),this.window=n,this.associatedEvent=null}return e(h)(t,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),t}();function Sh(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),s="",c=Object.assign(Object.assign({},xh),{width:i.toString(),height:a.toString(),top:o,left:u}),l=li().toLowerCase();r&&(s=Gu(l)?Ih:r),qu(l)&&(n=n||Eh,c.scrollbars="yes");var f=Object.entries(c).reduce((function(t,n){var r=e(Vt)(n,2),i=r[0],a=r[1];return"".concat(t).concat(i,"=").concat(a,",")}),"");if(Yu(l)&&"_self"!==s)return Ah(n||"",s),new Th(null);var h=window.open(n||"",s,f);qo(h,t,"popup-blocked");try{h.focus()}catch(e){}return new Th(h)}function Ah(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ch=encodeURIComponent("fac");function Rh(e,t,n,r,i,a){return Nh.apply(this,arguments)}function Nh(){return(Nh=e(u)(e(c).mark((function t(n,r,i,a,o,u){var s,l,f,h,d,v,p,y,m,g,k,w,b,_,x,I,E,T,S;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(qo(n.config.authDomain,n,"auth-domain-config-required"),qo(n.config.apiKey,n,"invalid-api-key"),s={apiKey:n.config.apiKey,appName:n.name,authType:i,redirectUrl:a,v:Ra,eventId:o},!(r instanceof ic)){t.next=24;break}for(r.setDefaultLanguage(n.languageCode),s.providerId=r.providerId||"",bi(r.getCustomParameters())||(s.customParameters=JSON.stringify(r.getCustomParameters())),l=!0,f=!1,h=void 0,t.prev=8,d=Object.entries(u||{})[Symbol.iterator]();!(l=(v=d.next()).done);l=!0)p=e(Vt)(v.value,2),y=p[0],m=p[1],s[y]=m;t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),f=!0,h=t.t0;case 16:t.prev=16,t.prev=17,l||null==d.return||d.return();case 19:if(t.prev=19,!f){t.next=22;break}throw h;case 22:return t.finish(19);case 23:return t.finish(16);case 24:for(r instanceof ac&&(g=r.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=g.join(",")),n.tenantId&&(s.tid=n.tenantId),k=s,w=!0,b=!1,_=void 0,t.prev=28,x=Object.keys(k)[Symbol.iterator]();!(w=(I=x.next()).done);w=!0)E=I.value,void 0===k[E]&&delete k[E];t.next=36;break;case 32:t.prev=32,t.t1=t.catch(28),b=!0,_=t.t1;case 36:t.prev=36,t.prev=37,w||null==x.return||x.return();case 39:if(t.prev=39,!b){t.next=42;break}throw _;case 42:return t.finish(39);case 43:return t.finish(36);case 44:return t.next=46,n._getAppCheckToken();case 46:return T=t.sent,S=T?"#".concat(Ch,"=").concat(encodeURIComponent(T)):"",t.abrupt("return","".concat(Oh(n),"?").concat(Ii(k).slice(1)).concat(S));case 49:case"end":return t.stop()}}),t,null,[[8,12,16,24],[17,,19,23],[28,32,36,44],[37,,39,43]])})))).apply(this,arguments)}function Oh(e){var t=e.config;return t.emulator?Jo(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dh="webStorageSupport",Ph=function(){"use strict";function t(){e(f)(this,t),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Al,this._completeRedirectFn=eh,this._overrideRedirectResult=zf}return e(h)(t,[{key:"_openPopup",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){var u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Go(null===(u=a.eventManagers[t._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()"),e.next=4,Rh(t,n,r,Ko(),i);case 4:return s=e.sent,e.abrupt("return",Sh(t,s,Nl()));case 6:case"end":return e.stop()}}),o)})))()}},{key:"_openRedirect",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._originValidation(t);case 2:return e.next=4,Rh(t,n,r,Ko(),i);case 4:return Pl(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),o)})))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Go(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bh(t);case 2:return i=e.sent,a=new ih(t),i.register("authEvent",(function(e){return qo(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:a.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:a},n.iframes[t._key()]=i,e.abrupt("return",a);case 8:case"end":return e.stop()}}),r)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Dh,{type:Dh},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Uo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Zu()||zu()||Ju()}}]),t}(),Lh=Ph,Mh=function(){"use strict";function t(n){e(f)(this,t),this.factorId=n}return e(h)(t,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zo("unexpected MultiFactorSessionType")}}}]),t}(),Uh=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this,"phone")).credential=t,i}return e(h)(r,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return tu(e,"POST","/v2/accounts/mfaEnrollment:finalize",eu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return tu(e,"POST","/v2/accounts/mfaSignIn:finalize",eu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new r(e)}}]),r}(Mh),Fh=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,null,[{key:"assertion",value:function(e){return Uh._fromCredential(e)}}]),t}();Fh.FACTOR_ID="phone",(function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,null,[{key:"assertionForEnrollment",value:function(e,t){return Vh._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Vh._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(t){return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo(void 0!==(r=t).auth,"internal-error"),e.next=4,n=r.auth,a={idToken:r.credential,totpEnrollmentInfo:{}},tu(n,"POST","/v2/accounts/mfaEnrollment:start",eu(n,a));case 4:return i=e.sent,e.abrupt("return",Bh._fromStartTotpMfaEnrollmentResponse(i,r.auth));case 6:case"end":return e.stop()}var n,a}),n)})))()}}]),t}()).FACTOR_ID="totp";var Vh=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this,"totp")).otp=t,o.enrollmentId=i,o.secret=a,o}return e(h)(r,[{key:"_finalizeEnroll",value:function(t,n,r){var i=this;return e(u)(e(c).mark((function a(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo(void 0!==i.secret,t,"argument-error"),e.abrupt("return",wl(t,{idToken:n,displayName:r,totpVerificationInfo:i.secret._makeTotpVerificationInfo(i.otp)}));case 2:case"end":return e.stop()}}),a)})))()}},{key:"_finalizeSignIn",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo(void 0!==r.enrollmentId&&void 0!==r.otp,t,"argument-error"),a={verificationCode:r.otp},e.abrupt("return",Zl(t,{mfaPendingCredential:n,mfaEnrollmentId:r.enrollmentId,totpVerificationInfo:a}));case 3:case"end":return e.stop()}}),i)})))()}}],[{key:"_fromSecret",value:function(e,t){return new r(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new r(t,e)}}]),r}(Mh),Bh=function(){"use strict";function t(n,r,i,a,o,u,s){e(f)(this,t),this.sessionInfo=u,this.auth=s,this.secretKey=n,this.hashingAlgorithm=r,this.codeLength=i,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=o}return e(h)(t,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(jh(e)||jh(t))&&(r=!0),r&&(jh(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),jh(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(e,n){return new t(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}}]),t}();function jh(e){return void 0===e||0===(null==e?void 0:e.length)}var qh="@firebase/auth",zh="0.23.2",Gh=function(){"use strict";function t(n){e(f)(this,t),this.auth=n,this.internalListeners=new Map}return e(h)(t,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.assertAuthConfigured(),e.next=3,n.auth._initializationPromise;case 3:if(n.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.auth.currentUser.getIdToken(t);case 7:return i=e.sent,e.abrupt("return",{accessToken:i});case 9:case"end":return e.stop()}}),r)})))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Kh;ui("authIdTokenMaxAge");
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hh(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kh="Browser",xa(new Ni("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;qo(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Kh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:es(Kh)},l=new ys(r,i,a,c);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mu);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),xa(new Ni("auth-internal",(function(e){var t=ms(e.getProvider("auth").getImmediate());return new Gh(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ma(qh,zh,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Kh)),Ma(qh,zh,"esm2017");function Wh(e,t,n){return Qh.apply(this,arguments)}function Qh(){return(Qh=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Hh().BuildInfo,Go(r.sessionId,"AuthEvent did not contain a session ID"),e.next=5,ed(r.sessionId);case 5:return u=e.sent,s={},Ju()?s.ibi=o.packageName:Hu()?s.apn=o.packageName:Uo(n,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Rh(n,i,r.type,void 0,null!==(a=r.eventId)&&void 0!==a?a:void 0,s));case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Jh(){return(Jh=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hh().BuildInfo,i={},Ju()?i.iosBundleId=r.packageName:Hu()?i.androidPackageName=r.packageName:Uo(n,"operation-not-supported-in-this-environment"),e.next=5,uh(n,i);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Xh(e){var t=Hh().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,Xu()?"_blank":"_system","location=yes"),n(i)}))}))}function Yh(e,t,n){return $h.apply(this,arguments)}function $h(){return($h=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hh().cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,t){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==i?void 0:i.close)&&i.close()}function c(){u||(u=window.setTimeout((function(){t(Fo(n,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}r.addPassiveListener(s),document.addEventListener("resume",c,!1),Hu()&&document.addEventListener("visibilitychange",l,!1),o=function(){r.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),t,null,[[2,,5,8]])})))).apply(this,arguments)}function Zh(e){var t,n,r,i,a,o,u,s,c,l,f=Hh();qo("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qo(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qo("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qo("function"==typeof(null===(s=null===(u=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qo("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ed(e){return td.apply(this,arguments)}function td(){return(td=e(u)(e(c).mark((function t(n){var r,i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(n),e.next=3,crypto.subtle.digest("SHA-256",r);case 3:return i=e.sent,a=Array.from(new Uint8Array(i)),e.abrupt("return",a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nd(e){if(Go(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rd=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).passiveListeners=new Set,t.initPromise=new Promise((function(e){t.resolveInialized=e})),t}return e(h)(r,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(t){return this.resolveInialized(),this.passiveListeners.forEach((function(e){return e(t)})),e(uo)(e(lo)(r.prototype),"onEvent",this).call(this,t)}},{key:"initialized",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initPromise;case 2:case"end":return e.stop()}}),n)})))()}}]),r}(ih);function id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:cd(),postBody:null,tenantId:e.tenantId,error:Fo(e,"no-auth-event")}}function ad(e,t){return ld()._set(fd(e),t)}function od(e){return ud.apply(this,arguments)}function ud(){return(ud=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ld()._get(fd(n));case 2:if(!(r=e.sent)){e.next=6;break}return e.next=6,ld()._remove(fd(n));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function sd(e,t){var n,r,i=function(e){var t=hd(e),n=t.link?decodeURIComponent(t.link):void 0,r=hd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return hd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=hd(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Fo(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function cd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ld(){return Mu(Tl)}function fd(e){return Vu("authEvent",e.config.apiKey,e.name)}function hd(t){if(!(null==t?void 0:t.includes("?")))return{};var n=e(fo)(t.split("?"));n[0];return Ei(n.slice(1).join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dd=function(){"use strict";function t(){e(f)(this,t),this._redirectPersistence=Al,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eh,this._overrideRedirectResult=zf}return e(h)(t,[{key:"_initialize",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._key(),(a=n.eventManagers.get(i))||(a=new rd(t),n.eventManagers.set(i,a),n.attachCallbackListeners(t,a)),e.abrupt("return",a);case 4:case"end":return e.stop()}}),r)})))()}},{key:"_openPopup",value:function(e){Uo(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){var u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zh(t),e.next=3,a._initialize(t);case 3:return u=e.sent,e.next=6,u.initialized();case 6:return u.resetRedirect(),Uf.clear(),e.next=10,a._originValidation(t);case 10:return s=id(t,r,i),e.next=13,ad(t,s);case 13:return e.next=15,Wh(t,s,n);case 15:return l=e.sent,e.next=18,Xh(l);case 18:return f=e.sent,e.abrupt("return",Yh(t,u,f));case 20:case"end":return e.stop()}}),o)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(t,n){var r=Hh(),i=r.universalLinks,a=r.handleOpenURL,o=r.BuildInfo,s=setTimeout(e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,od(t);case 2:n.onEvent(pd());case 3:case"end":return e.stop()}}),r)}))),500),l=function(){var r=e(u)(e(c).mark((function r(i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(s),e.next=3,od(t);case 3:a=e.sent,o=null,a&&(null==i?void 0:i.url)&&(o=sd(a,i.url)),n.onEvent(o||pd());case 7:case"end":return e.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,l);var f=a,h="".concat(o.packageName.toLowerCase(),"://");Hh().handleOpenURL=function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.toLowerCase().startsWith(h)&&l({url:n}),"function"==typeof f)try{f(n)}catch(e){console.error(e)}case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}]),t}(),vd=dd;function pd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fo("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function md(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return!("file:"!==yd()&&"ionic:"!==yd()&&"capacitor:"!==yd()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gd(){return vi()&&11===(null===document||void 0===document?void 0:document.documentMode)}function kd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return/Edge\/\d+/.test(e)}function wd(){try{var e=self.localStorage,t=Nl();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li();return gd()||kd(e)}()||pi()}catch(e){return bd()&&pi()}return!1}function bd(){return void 0!==t&&"WorkerGlobalScope"in t&&"importScripts"in t}function _d(){return("http:"===yd()||"https:"===yd()||hi()||md())&&!(di()||fi())&&wd()&&!bd()}function xd(){return md()&&"undefined"!=typeof document}function Id(){return Ed.apply(this,arguments)}function Ed(){return(Ed=e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xd()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Td={LOCAL:"local",NONE:"none",SESSION:"session"},Sd=qo,Ad="persistence";function Cd(e,t){Sd(Object.values(Td).includes(t),e,"invalid-persistence-type"),di()?Sd(t!==Td.SESSION,e,"unsupported-persistence-type"):fi()?Sd(t===Td.NONE,e,"unsupported-persistence-type"):bd()?Sd(t===Td.NONE||t===Td.LOCAL&&pi(),e,"unsupported-persistence-type"):Sd(t===Td.NONE||wd(),e,"unsupported-persistence-type")}function Rd(e){return Nd.apply(this,arguments)}function Nd(){return(Nd=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._initializationPromise;case 2:r=Od(),i=Vu(Ad,n.config.apiKey,n.name),r&&r.setItem(i,n._getPersistence());case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Od(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd=qo,Pd=function(){"use strict";function t(){e(f)(this,t),this.browserResolver=Mu(Lh),this.cordovaResolver=Mu(vd),this.underlyingResolver=null,this._redirectPersistence=Al,this._completeRedirectFn=eh,this._overrideRedirectResult=zf}return e(h)(t,[{key:"_initialize",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.selectUnderlyingResolver();case 2:return e.abrupt("return",n.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),r)})))()}},{key:"_openPopup",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.selectUnderlyingResolver();case 2:return e.abrupt("return",a.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),o)})))()}},{key:"_openRedirect",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.selectUnderlyingResolver();case 2:return e.abrupt("return",a.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),o)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return xd()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Dd(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Id();case 4:r=e.sent,t.underlyingResolver=r?t.cordovaResolver:t.browserResolver;case 6:case"end":return e.stop()}}),n)})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ld(e){return e.unwrap()}function Md(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code))t.resolver=new jd(e,function(e,t){var n,r=Ri(e),i=t;return qo(t.customData.operationType,r,"argument-error"),qo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),gl._fromError(r,i)}(e,t));else if(r){var i=Ud(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ud(e){var t=(e instanceof yi?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof yi)&&"temporaryProof"in t&&"phoneNumber"in t)return _f.credentialFromResult(e);var n,r=t.providerId;if(!r||r===_o)return null;switch(r){case bo:n=sc;break;case ko:n=uc;break;case wo:n=cc;break;case xo:n=hc;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?lc._create(r,u):Qs._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new oc(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof yi?n.credentialFromError(e):n.credentialFromResult(e)}function Fd(e,t){return t.catch((function(t){throw t instanceof yi&&Md(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ud(t)),additionalUserInfo:yl(e),user:qd.getOrCreate(r)}}))}function Vd(e,t){return Bd.apply(this,arguments)}function Bd(){return(Bd=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return i=e.sent,e.abrupt("return",{verificationId:i.verificationId,confirm:function(e){return Fd(n,i.confirm(e))}});case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var jd=function(){"use strict";function t(n,r){e(f)(this,t),this.resolver=r,this.auth=n.wrapped()}return e(h)(t,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Fd(Ld(this.auth),this.resolver.resolveSignIn(e))}}]),t}(),qd=function(){"use strict";function t(n){var r;e(f)(this,t),this._delegate=n,this.multiFactor=(r=Ri(n),_l.has(r)||_l.set(r,bl._fromUser(r)),_l.get(r))}return e(h)(t,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fd(n.auth,Dc(n._delegate,t)));case 1:case"end":return e.stop()}}),r)})))()}},{key:"linkWithPhoneNumber",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vd(r.auth,yf(r._delegate,t,n)));case 1:case"end":return e.stop()}}),i)})))()}},{key:"linkWithPopup",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fd(n.auth,Pf(n._delegate,t,Pd)));case 1:case"end":return e.stop()}}),r)})))()}},{key:"linkWithRedirect",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rd(ms(n.auth));case 2:return e.abrupt("return",Xf(n._delegate,t,Pd));case 3:case"end":return e.stop()}}),r)})))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fd(n.auth,Lc(n._delegate,t)));case 1:case"end":return e.stop()}}),r)})))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Vd(this.auth,function(e,t,n){return gf.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Fd(this.auth,function(e,t,n){return Df.apply(this,arguments)}(this._delegate,e,Pd))}},{key:"reauthenticateWithRedirect",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rd(ms(n.auth));case 2:return e.abrupt("return",Qf(n._delegate,t,Pd));case 3:case"end":return e.stop()}}),r)})))()}},{key:"sendEmailVerification",value:function(e){return function(e,t){return rl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bc(n._delegate,t);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),r)})))()}},{key:"updateEmail",value:function(e){return function(e,t){return sl(Ri(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return sl(Ri(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return bf.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ul.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return il.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(e){return t.USER_MAP.has(e)||t.USER_MAP.set(e,new t(e)),t.USER_MAP.get(e)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qd.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zd=qo,Gd=function(){"use strict";function t(n,r){if(e(f)(this,t),this.app=n,r.isInitialized())return this._delegate=r.getImmediate(),void this.linkUnderlyingAuth();var i=n.options.apiKey;zd(i,"invalid-api-key",{appName:n.name}),zd(i,"invalid-api-key",{appName:n.name});var a="undefined"!=typeof window?Pd:void 0;this._delegate=r.initialize({options:{persistence:Hd(i,n.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(No),this.linkUnderlyingAuth()}return e(h)(t,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?qd.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ks(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Hc.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Wc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Kc.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fd(r._delegate,Xc(r._delegate,t,n)));case 1:case"end":return e.stop()}}),i)})))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return nl.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=nc.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zd(_d(),t._delegate,"operation-not-supported-in-this-environment"),e.next=3,$f(t._delegate,Pd);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Fd(t._delegate,Promise.resolve(r)));case 7:case"end":return e.stop()}}),n)})))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ms(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Kd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Kd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return $c.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Gc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cd(n._delegate,t),e.t0=t,e.next=e.t0===Td.SESSION?5:e.t0===Td.LOCAL?7:e.t0===Td.NONE?12:14;break;case 5:return i=Al,e.abrupt("break",15);case 7:return e.next=9,Mu(Yl)._isAvailable();case 9:return a=e.sent,i=a?Yl:Tl,e.abrupt("break",15);case 12:return i=Fu,e.abrupt("break",15);case 14:return e.abrupt("return",Uo("argument-error",{appName:n._delegate.name}));case 15:return e.abrupt("return",n._delegate.setPersistence(i));case 16:case"end":return e.stop()}}),r)})))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Fd(this._delegate,function(e){return mc.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Fd(this._delegate,Nc(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Fd(this._delegate,function(e,t){return Vc.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Fd(this._delegate,function(e,t,n){return Nc(Ri(e),rc.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Fd(this._delegate,function(e,t,n){return Zc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Vd(this._delegate,function(e,t,n){return pf.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zd(_d(),n._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Fd(n._delegate,Nf(n._delegate,t,Pd)));case 2:case"end":return e.stop()}}),r)})))()}},{key:"signInWithRedirect",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zd(_d(),n._delegate,"operation-not-supported-in-this-environment"),e.next=3,Rd(n._delegate);case 3:return e.abrupt("return",Hf(n._delegate,t,Pd));case 4:case"end":return e.stop()}}),r)})))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Jc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),t}();function Kd(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&qd.getOrCreate(e))},error:t,complete:n}}function Hd(e,t){var n=function(e,t){var n=Od();if(!n)return[];var r=Vu(Ad,e,t);switch(n.getItem(r)){case Td.NONE:return[Fu];case Td.LOCAL:return[Yl,Al];case Td.SESSION:return[Al];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(Yl)||n.push(Yl),"undefined"!=typeof window){var r=!0,i=!1,a=void 0;try{for(var o,u=[Tl,Al][Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n.includes(s)||n.push(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}return n.includes(Fu)||n.push(Fu),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gd.Persistence=Td;var Wd=function(){"use strict";function t(){e(f)(this,t),this.providerId="phone",this._delegate=new _f(Ld(oo.auth()))}return e(h)(t,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return _f.credential(e,t)}}]),t}();Wd.PHONE_SIGN_IN_METHOD=_f.PHONE_SIGN_IN_METHOD,Wd.PROVIDER_ID=_f.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qd,Jd=qo,Xd=function(){"use strict";function t(n,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oo.app();e(f)(this,t),Jd(null===(i=a.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new hf(n,r,a.auth()),this.type=this._delegate.type}return e(h)(t,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),t}();(Qd=oo).INTERNAL.registerComponent(new Ni("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Gd(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Io,PASSWORD_RESET:Eo,RECOVER_EMAIL:To,REVERT_SECOND_FACTOR_ADDITION:So,VERIFY_AND_CHANGE_EMAIL:Ao,VERIFY_EMAIL:Co}},EmailAuthProvider:rc,FacebookAuthProvider:uc,GithubAuthProvider:cc,GoogleAuthProvider:sc,OAuthProvider:oc,SAMLAuthProvider:fc,PhoneAuthProvider:Wd,PhoneMultiFactorGenerator:Fh,RecaptchaVerifier:Xd,TwitterAuthProvider:hc,Auth:Gd,AuthCredential:_s,Error:yi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Qd.registerVersion("@firebase/auth-compat","0.4.2");te=o("ds8z5");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yd,$d,Zd="firebasestorage.googleapis.com",ev=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e(f)(this,r),(a=n.call(this,tv(t),"Firebase Storage: ".concat(i," (").concat(tv(t),")"))).status_=o,a.customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf(e(te)(a),r.prototype),a}return e(h)(r,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return tv(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),r}(yi);function tv(e){return"storage/"+e}function nv(){return new ev(Yd.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rv(){return new ev(Yd.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iv(){return new ev(Yd.CANCELED,"User canceled the upload/download.")}function av(){return new ev(Yd.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ov(e){return new ev(Yd.INVALID_ARGUMENT,e)}function uv(){return new ev(Yd.APP_DELETED,"The Firebase app was deleted.")}function sv(e){return new ev(Yd.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cv(e,t){return new ev(Yd.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function lv(e){throw new ev(Yd.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */($d=Yd||(Yd={})).UNKNOWN="unknown",$d.OBJECT_NOT_FOUND="object-not-found",$d.BUCKET_NOT_FOUND="bucket-not-found",$d.PROJECT_NOT_FOUND="project-not-found",$d.QUOTA_EXCEEDED="quota-exceeded",$d.UNAUTHENTICATED="unauthenticated",$d.UNAUTHORIZED="unauthorized",$d.UNAUTHORIZED_APP="unauthorized-app",$d.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",$d.INVALID_CHECKSUM="invalid-checksum",$d.CANCELED="canceled",$d.INVALID_EVENT_NAME="invalid-event-name",$d.INVALID_URL="invalid-url",$d.INVALID_DEFAULT_BUCKET="invalid-default-bucket",$d.NO_DEFAULT_BUCKET="no-default-bucket",$d.CANNOT_SLICE_BLOB="cannot-slice-blob",$d.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",$d.NO_DOWNLOAD_URL="no-download-url",$d.INVALID_ARGUMENT="invalid-argument",$d.INVALID_ARGUMENT_COUNT="invalid-argument-count",$d.APP_DELETED="app-deleted",$d.INVALID_ROOT_OPERATION="invalid-root-operation",$d.INVALID_FORMAT="invalid-format",$d.INTERNAL_ERROR="internal-error",$d.UNSUPPORTED_ENVIRONMENT="unsupported-environment";var fv,hv,dv=function(){"use strict";function t(n,r){e(f)(this,t),this.bucket=n,this.path_=r}return e(h)(t,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(e,n){var r,i;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw i=e,new ev(Yd.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Zd?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(e);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new t(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new ev(Yd.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return r}}]),t}(),vv=function(){"use strict";function t(n){e(f)(this,t),this.promise_=Promise.reject(n)}return e(h)(t,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),t}();function pv(e){return"string"==typeof e||e instanceof String}function yv(e){return mv()&&e instanceof Blob}function mv(){return"undefined"!=typeof Blob&&!fi()}function gv(e,t,n,r){if(r<t)throw ov("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw ov("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function wv(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bv(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(hv=fv||(fv={}))[hv.NO_ERROR=0]="NO_ERROR",hv[hv.NETWORK_ERROR=1]="NETWORK_ERROR",hv[hv.ABORT=2]="ABORT";var _v=function(){"use strict";function t(n,r,i,a,o,u,s,c,l,h,d){var v=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],p=this;e(f)(this,t),this.url_=n,this.method_=r,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=s,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=d,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){p.resolve_=e,p.reject_=t,p.start_()}))}return e(h)(t,[{key:"start_",value:function(){var t=this,n=function(e,n){var r=t.resolve_,i=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=t.callback_(a,a.getResponse());void 0!==o?r(o):r()}catch(e){i(e)}else if(null!==a){var u=nv();u.serverResponse=a.getErrorText(),t.errorCallback_?i(t.errorCallback_(a,u)):i(u)}else if(n.canceled){i(t.appDelete_?uv():iv())}else{i(rv())}};this.canceled_?n(0,new xv(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,n,r){var i=1,a=null,o=null,u=!1,s=0;function c(){return 2===s}var l=!1;function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l||(l=!0,n.apply(null,t))}function h(e){a=setTimeout((function(){a=null,t(v,c())}),e)}function d(){o&&clearTimeout(o)}function v(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(l)d();else{var o,v,p;if(t)return d(),void(o=f).call.apply(o,[null,t].concat(e(Kt)(r)));if(c()||u)return d(),void(v=f).call.apply(v,[null,t].concat(e(Kt)(r)));i<64&&(i*=2),1===s?(s=2,p=0):p=1e3*(i+Math.random()),h(p)}}var p=!1;function y(e){p||(p=!0,d(),l||(null!==a?(e||(s=2),clearTimeout(a),h(0)):e||(s=1)))}return h(0),o=setTimeout((function(){u=!0,y(!0)}),r),y}((function(e,n){var r=t;if(n)e(!1,new xv(!1,null,!0));else{var i=t.connectionFactory_();t.pendingConnection_=i;var a=function(e){var t=e.loaded,n=e.lengthComputable?e.total:-1;null!==r.progressCallback_&&r.progressCallback_(t,n)};null!==t.progressCallback_&&i.addUploadProgressListener(a),i.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==r.progressCallback_&&i.removeUploadProgressListener(a),r.pendingConnection_=null;var t=i.getErrorCode()===fv.NO_ERROR,n=i.getStatus();if(!t||bv(n,r.additionalRetryCodes_)&&r.retry){var o=i.getErrorCode()===fv.ABORT;e(!1,new xv(!1,null,o))}else{var u=-1!==r.successCodes_.indexOf(n);e(!0,new xv(u,i))}}))}}),n,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),t}(),xv=function t(n,r,i){"use strict";e(f)(this,t),this.wasSuccessCode=n,this.connection=r,this.canceled=!!i};function Iv(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Ev(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}function Tv(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Sv(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Av(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=wv(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return Tv(c,t),Iv(c,n),Ev(c,a),Sv(c,r),new _v(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Rv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Cv();if(void 0!==r){for(var i=new r,a=0;a<t.length;a++)i.append(t[a]);return i.getBlob()}if(mv())return new Blob(t);throw new ev(Yd.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(e){if("undefined"==typeof atob)throw t="base-64",new ev(Yd.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ov={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Dv=function t(n,r){"use strict";e(f)(this,t),this.data=n,this.contentType=r||null};function Pv(e,t){switch(e){case Ov.RAW:return new Dv(Lv(t));case Ov.BASE64:case Ov.BASE64URL:return new Dv(Mv(e,t));case Ov.DATA_URL:return new Dv((n=new Uv(t)).base64?Mv(Ov.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw cv(Ov.DATA_URL,"Malformed data URL.")}return Lv(t)}(n.rest),function(e){return new Uv(e).contentType}(t))}var n;throw nv()}function Lv(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else{if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}}return new Uint8Array(t)}function Mv(e,t){switch(e){case Ov.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw cv(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ov.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw cv(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Nv(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw cv(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Uv=function t(n){"use strict";e(f)(this,t),this.base64=!1,this.contentType=null;var r=n.match(/^data:([^,]+)?,/);if(null===r)throw cv(Ov.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i,a,o=r[1]||null;null!=o&&(this.base64=(a=";base64",!!((i=o).length>=a.length)&&i.substring(i.length-a.length)===a),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=n.substring(n.indexOf(",")+1)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fv=function(){"use strict";function t(n,r){e(f)(this,t);var i=0,a="";yv(n)?(this.data_=n,i=n.size,a=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),i=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),i=n.length),this.size_=i,this.type_=a}return e(h)(t,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(e,n){if(yv(this.data_)){var r=this.data_,i=(o=e,u=n,(a=r).webkitSlice?a.webkitSlice(o,u):a.mozSlice?a.mozSlice(o,u):a.slice?a.slice(o,u):null);return null===i?null:new t(i)}var a,o,u;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(mv()){var i=n.map((function(e){return e instanceof t?e.data_:e}));return new t(Rv.apply(null,i))}var a=n.map((function(e){return pv(e)?Pv(Ov.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new t(u,!0)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(e,t){return t}var qv=function t(n,r,i,a){"use strict";e(f)(this,t),this.server=n,this.local=r||n,this.writable=!!i,this.xform=a||jv},zv=null;function Gv(){if(zv)return zv;var e=[];e.push(new qv("bucket")),e.push(new qv("generation")),e.push(new qv("metageneration")),e.push(new qv("name","fullPath",!0));var t=new qv("name");t.xform=function(e,t){return function(e){return!pv(e)||e.length<2?e:Bv(e)}(t)},e.push(t);var n=new qv("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new qv("timeCreated")),e.push(new qv("updated")),e.push(new qv("md5Hash",null,!0)),e.push(new qv("cacheControl",null,!0)),e.push(new qv("contentDisposition",null,!0)),e.push(new qv("contentEncoding",null,!0)),e.push(new qv("contentLanguage",null,!0)),e.push(new qv("contentType",null,!0)),e.push(new qv("metadata","customMetadata",!0)),zv=e}function Kv(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new dv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Hv(e,t,n){var r=Vv(t);return null===r?null:Kv(e,r,n)}function Wv(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(e,t,n){var r=Vv(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken},i=!0,a=!1,o=void 0;if(n.prefixes)try{for(var u,s=n.prefixes[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value.replace(/\/$/,""),l=e._makeStorageReference(new dv(t,c));r.prefixes.push(l)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}var f=!0,h=!1,d=void 0;if(n.items)try{for(var v,p=n.items[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value,m=e._makeStorageReference(new dv(t,y.name));r.items.push(m)}}catch(e){h=!0,d=e}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return r}(e,t,r)}var Jv=function t(n,r,i,a){"use strict";e(f)(this,t),this.url=n,this.method=r,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(e){if(!e)throw nv()}function Yv(e,t){return function(n,r){var i=Hv(e,r,t);return Xv(null!==i),i}}function $v(e,t){return function(n,r){var i=Hv(e,r,t);return Xv(null!==i),function(e,t,n,r){var i=Vv(t);if(null===i)return null;if(!pv(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return kv("/b/"+o(i)+"/o/"+o(a),n,r)+wv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Zv(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ev(Yd.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ev(Yd.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ev(Yd.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ev(Yd.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ep(e){var t=Zv(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new ev(Yd.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function tp(e,t,n){var r=kv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Jv(r,"GET",Yv(e,n),i);return a.errorHandler=ep(t),a}function np(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=kv(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Jv(o,"GET",function(e,t){return function(n,r){var i=Qv(e,t,r);return Xv(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Zv(t),s}function rp(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ip(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=rp(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Wv(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Fv.getBlob(c,r,l);if(null===f)throw av();var h={name:s.fullPath},d=kv(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new Jv(d,"POST",Yv(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=Zv(t),p}var ap=function t(n,r,i,a){"use strict";e(f)(this,t),this.current=n,this.total=r,this.finalized=!!i,this.metadata=a||null};function op(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Xv(!1)}return Xv(!!n&&-1!==(t||["active"]).indexOf(n)),n}var up=262144;function sp(e,t,n,r,i,a,o,u){var s=new ap(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new ev(Yd.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw av();var p=t.maxUploadRetryTime,y=new Jv(n,"POST",(function(e,n){var i,o=op(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Yv(t,a)(e,n):null,new ap(u,c,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=Zv(e),y}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cp={STATE_CHANGED:"state_changed"},lp={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fp(e){switch(e){case"running":case"pausing":case"canceling":return lp.RUNNING;case"paused":return lp.PAUSED;case"success":return lp.SUCCESS;case"canceled":return lp.CANCELED;default:return lp.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hp=function t(n,r,i){"use strict";if(e(f)(this,t),"function"==typeof n||null!=r||null!=i)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=i?i:void 0;else{var a=n;this.next=a.next,this.error=a.error,this.complete=a.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Promise.resolve().then((function(){return t.apply(void 0,e(Kt)(r))}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vp=function(){"use strict";function t(){var n=this;e(f)(this,t),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fv.NO_ERROR,this.sendPromise_=new Promise((function(e){var t=n;n.xhr_.addEventListener("abort",(function(){t.errorCode_=fv.ABORT,e()})),n.xhr_.addEventListener("error",(function(){t.errorCode_=fv.NETWORK_ERROR,e()})),n.xhr_.addEventListener("load",(function(){e()}))}))}return e(h)(t,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw lv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw lv("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw lv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw lv("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw lv("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),t}(),pp=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),r}(vp);function yp(){return new pp}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mp=function(){"use strict";function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this;e(f)(this,t),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=i,this._mappings=Gv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(a._request=void 0,a._chunkMultiplier=1,e._codeEquals(Yd.CANCELED))a._needToFetchStatus=!0,a.completeTransitions_();else{var t=a.isExponentialBackoffExpired();if(bv(e.status,[])){if(!t)return a.sleepTime=Math.max(2*a.sleepTime,1e3),a._needToFetchStatus=!0,void a.completeTransitions_();e=rv()}a._error=e,a._transition("error")}},this._metadataErrorHandler=function(e){a._request=void 0,e._codeEquals(Yd.CANCELED)?a.completeTransitions_():(a._error=e,a._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){a._resolve=e,a._reject=t,a._start()})),this._promise.then(null,(function(){}))}return e(h)(t,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){if("running"===this._state&&void 0===this._request)if(this._resumable)if(void 0===this._uploadUrl)this._createResumable();else{var e=this;this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime)}else this._oneShotUpload()}},{key:"_resolveToken",value:function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(r){var i=e(Vt)(r,2),a=i[0],o=i[1];switch(n._state){case"running":t(a,o);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=e,i=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=rp(t,r,i),u={name:o.fullPath},s=kv(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Wv(o,n),f=e.maxUploadRetryTime,h=new Jv(s,"POST",(function(e){var t;op(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Xv(!1)}return Xv(pv(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Zv(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),a=e._ref.storage._makeRequest(i,yp,t,n);e._request=a,a.getPromise().then((function(e){r._request=void 0,r._uploadUrl=e,r._needToFetchStatus=!1,r.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=e,a=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Jv(n,"POST",(function(e){var t=op(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Xv(!1)}n||Xv(!1);var i=Number(n);return Xv(!isNaN(i)),new ap(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Zv(t),a}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(a,yp,n,r);e._request=o,o.getPromise().then((function(e){i._request=void 0,i._updateProgress(e.current),i._needToFetchStatus=!1,e.finalized&&(i._needToFetchMetadata=!0),i.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=up*this._chunkMultiplier,n=new ap(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o,u=e;try{o=sp(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var s=e._ref.storage._makeRequest(o,yp,i,a,!1);e._request=s,s.getPromise().then((function(e){u._increaseMultiplier(),u._request=void 0,u._updateProgress(e.current),e.finalized?(u._metadata=e.metadata,u._transition("success")):u.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(up*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=e,i=tp(e._ref.storage,e._ref._location,e._mappings),a=e._ref.storage._makeRequest(i,yp,t,n);e._request=a,a.getPromise().then((function(e){r._request=void 0,r._metadata=e,r._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=e,i=ip(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),a=e._ref.storage._makeRequest(i,yp,t,n);e._request=a,a.getPromise().then((function(e){r._request=void 0,r._metadata=e,r._updateProgress(r._blob.size()),r._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=iv(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=fp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new hp(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(fp(this._state)){case lp.SUCCESS:dp(this._resolve.bind(null,this.snapshot))();break;case lp.CANCELED:case lp.ERROR:dp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(fp(this._state)){case lp.RUNNING:case lp.PAUSED:e.next&&dp(e.next.bind(e,this.snapshot))();break;case lp.SUCCESS:e.complete&&dp(e.complete.bind(e))();break;default:e.error&&dp(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),t}(),gp=function(){"use strict";function t(n,r){e(f)(this,t),this._service=n,this._location=r instanceof dv?r:dv.makeFromUrl(r,n.host)}return e(h)(t,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(e,n){return new t(e,n)}},{key:"root",get:function(){var e=new dv(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Bv(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;var n=new dv(this._location.bucket,e);return new t(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw sv(e)}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(e,t,n){return wp.apply(this,arguments)}function wp(){return(wp=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={pageToken:i},t.next=4,bp(n,u);case 4:if(s=t.sent,(a=r.prefixes).push.apply(a,e(Kt)(s.prefixes)),(o=r.items).push.apply(o,e(Kt)(s.items)),null==s.nextPageToken){t.next=10;break}return t.next=10,kp(n,r,s.nextPageToken);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bp(e,t){null!=t&&"number"==typeof t.maxResults&&gv("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=np(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,yp)}function _p(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=kv(t.fullServerUrl(),e.host,e._protocol),a=Wv(n,r),o=e.maxOperationRetryTime,u=new Jv(i,"PATCH",Yv(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=ep(t),u}(e.storage,e._location,t,Gv());return e.storage.makeRequestWithTokens(n,yp)}function xp(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=kv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Jv(r,"GET",$v(e,n),i);return a.errorHandler=ep(t),a}(e.storage,e._location,Gv());return e.storage.makeRequestWithTokens(t,yp).then((function(e){if(null===e)throw new ev(Yd.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ip(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=kv(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Jv(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ep(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,yp)}function Ep(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new dv(e._location.bucket,n);return new gp(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(e,t){if(e instanceof Rp){var n=e;if(null==n._bucket)throw new ev(Yd.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new gp(n,n._bucket);return null!=t?Tp(r,t):r}return void 0!==t?Ep(e,t):e}function Sp(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Rp)return new gp(e,t);throw ov("To use ref(service, url), the first argument must be a Storage instance.")}return Tp(e,t)}function Ap(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:dv.makeFromBucketSpec(n,e)}function Cp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:ci(i,e.app.options.projectId))}var Rp=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.app=n,this._authProvider=r,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=Zd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?dv.makeFromBucketSpec(a,this._host):Ap(this._host,this.app.options)}return e(h)(t,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=dv.makeFromBucketSpec(this._url,e):this._bucket=Ap(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._overrideAuthToken){e.next=2;break}return e.abrupt("return",t._overrideAuthToken);case 2:if(!(r=t._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,r.getToken();case 6:if(null===(i=e.sent)){e.next=9;break}return e.abrupt("return",i.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),n)})))()}},{key:"_getAppCheckToken",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,r.getToken();case 4:return i=e.sent,e.abrupt("return",i.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),n)})))()}},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new gp(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new vv(uv());var a=this,o=Av(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((function(){return a._requests.delete(o)}),(function(){return a._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){var a,o,u;return e(c).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=e(Vt),i.next=3,Promise.all([r._getAuthToken(),r._getAppCheckToken()]);case 3:return i.t1=i.sent,a=(0,i.t0)(i.t1,2),o=a[0],u=a[1],i.abrupt("return",r._makeRequest(t,n,o,u).getPromise());case 8:case"end":return i.stop()}}),i)})))()}}]),t}(),Np="@firebase/storage",Op="0.11.2",Dp="storage";function Pp(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new mp(e,new Fv(t),n)}(e=Ri(e),t,n)}function Lp(e){return function(e){e._throwIfRoot("getMetadata");var t=tp(e.storage,e._location,Gv());return e.storage.makeRequestWithTokens(t,yp)}(e=Ri(e))}function Mp(e,t){return _p(e=Ri(e),t)}function Up(e,t){return bp(e=Ri(e),t)}function Fp(e){return e=Ri(e),kp(e,t={prefixes:[],items:[]}).then((function(){return t}));var t}function Vp(e,t){return Sp(e=Ri(e),t)}function Bp(e,t){return Ep(e,t)}function jp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Cp(e,t,n,r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Rp(r,i,a,n,Ra)}xa(new Ni(Dp,qp,"PUBLIC").setMultipleInstances(!0)),Ma(Np,Op,""),Ma(Np,Op,"esm2017");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zp=function(){"use strict";function t(n,r,i){e(f)(this,t),this._delegate=n,this.task=r,this.ref=i}return e(h)(t,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),t}(),Gp=function(){"use strict";function t(n,r){e(f)(this,t),this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return e(h)(t,[{key:"snapshot",get:function(){return new zp(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new zp(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=void 0;if(t){var a=this;i="function"==typeof t?function(e){return t(new zp(e,a,a._ref))}:{next:t.next?function(e){return t.next(new zp(e,a,a._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}}return this._delegate.on(e,i,n||void 0,r||void 0)}}]),t}(),Kp=function(){"use strict";function t(n,r){e(f)(this,t),this._delegate=n,this._service=r}return e(h)(t,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Hp(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Hp(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),t}(),Hp=function(){"use strict";function t(n,r){e(f)(this,t),this._delegate=n,this.storage=r}return e(h)(t,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(e){return new t(Bp(this._delegate,e),this.storage)}},{key:"root",get:function(){return new t(this._delegate.root,this.storage)}},{key:"parent",get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Gp(Pp(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ov.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Pv(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Gp(new mp(this._delegate,new Fv(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Fp(this._delegate).then((function(t){return new Kp(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return Up(this._delegate,e||void 0).then((function(e){return new Kp(e,t.storage)}))}},{key:"getMetadata",value:function(){return Lp(this._delegate)}},{key:"updateMetadata",value:function(e){return Mp(this._delegate,e)}},{key:"getDownloadURL",value:function(){return xp(Ri(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Ip(Ri(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw sv(e)}}]),t}(),Wp=function(){"use strict";function t(n,r){e(f)(this,t),this.app=n,this._delegate=r}return e(h)(t,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Qp(e))throw ov("ref() expected a child path but got a URL, use refFromURL instead.");return new Hp(Vp(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Qp(e))throw ov("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dv.makeFromUrl(e,this._delegate.host)}catch(e){throw ov("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hp(Vp(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jp(this._delegate,e,t,n)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(e){return/^[A-Za-z]+:\/\//.test(e)}function Jp(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Wp(r,i)}!function(e){var t={TaskState:lp,TaskEvent:cp,StringFormat:Ov,Storage:Wp,Reference:Hp};e.INTERNAL.registerComponent(new Ni("storage-compat",Jp,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(oo);var Xp,Yp=o("ge8co"),$p=(Yp=o("ge8co"),lo=o("fVNic"),o("jmhxu")),Zp=(v=o("l5bVx"),lo=o("fVNic"),v=o("l5bVx"),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}),ey={},ty=ty||{},ny=Zp||self;function ry(){}function iy(t){var n=void 0===t?"undefined":e(v)(t);return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function ay(t){var n=void 0===t?"undefined":e(v)(t);return"object"==n&&null!=t||"function"==n}var oy="closure_uid_"+(1e9*Math.random()>>>0),uy=0;function sy(e,t,n){return e.call.apply(e.bind,arguments)}function cy(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ly(e,t,n){return(ly=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sy:cy).apply(null,arguments)}function fy(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function hy(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function dy(){this.s=this.s,this.o=this.o}dy.prototype.s=!1,dy.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,oy)&&e[oy]||(e[oy]=++uy))},dy.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vy=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function py(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function yy(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(iy(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function my(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}my.prototype.h=function(){this.defaultPrevented=!0};var gy=function(){if(!ny.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ny.addEventListener("test",ry,t),ny.removeEventListener("test",ry,t)}catch(e){}return e}();function ky(e){return/^[\s\xa0]*$/.test(e)}var wy=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function by(e,t){return e<t?-1:e>t?1:0}function _y(){var e=ny.navigator;return e&&(e=e.userAgent)?e:""}function xy(e){return-1!=_y().indexOf(e)}function Iy(e){return Iy[" "](e),e}function Ey(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Iy[" "]=ry;var Ty,Sy,Ay=xy("Opera"),Cy=xy("Trident")||xy("MSIE"),Ry=xy("Edge"),Ny=Ry||Cy,Oy=xy("Gecko")&&!(-1!=_y().toLowerCase().indexOf("webkit")&&!xy("Edge"))&&!(xy("Trident")||xy("MSIE"))&&!xy("Edge"),Dy=-1!=_y().toLowerCase().indexOf("webkit")&&!xy("Edge");function Py(){var e=ny.document;return e?e.documentMode:void 0}e:{var Ly="",My=(Sy=_y(),Oy?/rv:([^\);]+)(\)|;)/.exec(Sy):Ry?/Edge\/([\d\.]+)/.exec(Sy):Cy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sy):Dy?/WebKit\/(\S+)/.exec(Sy):Ay?/(?:Version)[ \/]?(\S+)/.exec(Sy):void 0);if(My&&(Ly=My?My[1]:""),Cy){var Uy=Py();if(null!=Uy&&Uy>parseFloat(Ly)){Ty=String(Uy);break e}}Ty=Ly}var Fy,Vy={};if(ny.document&&Cy){var By=Py();Fy=By||(parseInt(Ty,10)||void 0)}else Fy=void 0;var jy=Fy;function qy(e,t){if(my.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Oy){e:{try{Iy(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:zy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qy.$.h.call(this)}}hy(qy,my);var zy={2:"touch",3:"pen",4:"mouse"};qy.prototype.h=function(){qy.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gy="closure_listenable_"+(1e6*Math.random()|0),Ky=0;function Hy(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ky,this.fa=this.ia=!1}function Wy(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qy(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Jy(e){var t={};for(var n in e)t[n]=e[n];return t}var Xy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yy(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Xy.length;a++)n=Xy[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function $y(e){this.src=e,this.g={},this.h=0}function Zy(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vy(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Wy(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function em(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}$y.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=em(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Hy(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var tm="closure_lm_"+(1e6*Math.random()|0),nm={};function rm(e,t,n,r,i){if(r&&r.once)return am(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)rm(e,t[a],n,r,i);return null}return n=hm(n),e&&e[Gy]?e.O(t,n,ay(r)?!!r.capture:!!r,i):im(e,t,n,!1,r,i)}function im(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ay(i)?!!i.capture:!!i,u=lm(e);if(u||(e[tm]=u=new $y(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cm;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)gy||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sm(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function am(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)am(e,t[a],n,r,i);return null}return n=hm(n),e&&e[Gy]?e.P(t,n,ay(r)?!!r.capture:!!r,i):im(e,t,n,!0,r,i)}function om(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)om(e,t[a],n,r,i);else r=ay(r)?!!r.capture:!!r,n=hm(n),e&&e[Gy]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=em(a=e.g[t],n,r,i))&&(Wy(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lm(e))&&(t=e.g[t.toString()],e=-1,t&&(e=em(t,n,r,i)),(n=-1<e?t[e]:null)&&um(n))}function um(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Gy])Zy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sm(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lm(t))?(Zy(n,e),0==n.h&&(n.src=null,t[tm]=null)):Wy(e)}}}function sm(e){return e in nm?nm[e]:nm[e]="on"+e}function cm(e,t){if(e.fa)e=!0;else{t=new qy(t,this);var n=e.listener,r=e.la||e.src;e.ia&&um(e),e=n.call(r,t)}return e}function lm(e){return(e=e[tm])instanceof $y?e:null}var fm="__closure_events_fn_"+(1e9*Math.random()>>>0);function hm(e){return"function"==typeof e?e:(e[fm]||(e[fm]=function(t){return e.handleEvent(t)}),e[fm])}function dm(){dy.call(this),this.i=new $y(this),this.S=this,this.J=null}function vm(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new my(t,e);else if(t instanceof my)t.target=t.target||e;else{var i=t;Yy(t=new my(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=pm(o,r,!0,t)&&i}if(i=pm(o=t.g=e,r,!0,t)&&i,i=pm(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=pm(o=t.g=n[a],r,!1,t)&&i}function pm(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Zy(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}hy(dm,dy),dm.prototype[Gy]=!0,dm.prototype.removeEventListener=function(e,t,n,r){om(this,e,t,n,r)},dm.prototype.N=function(){if(dm.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wy(n[r]);delete t.g[e],t.h--}}this.J=null},dm.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dm.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ym=ny.JSON.stringify;function mm(){var e=Em,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gm,km=function(){"use strict";function t(){e(f)(this,t),this.h=this.g=null}return e(h)(t,[{key:"add",value:function(e,t){var n=wm.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),wm=new(function(){"use strict";function t(n,r){e(f)(this,t),this.i=n,this.j=r,this.h=0,this.g=null}return e(h)(t,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),t}())((function(){return new bm}),(function(e){return e.reset()})),bm=function(){"use strict";function t(){e(f)(this,t),this.next=this.g=this.h=null}return e(h)(t,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function _m(e){ny.setTimeout((function(){throw e}),0)}function xm(e,t){gm||function(){var e=ny.Promise.resolve(void 0);gm=function(){e.then(Tm)}}(),Im||(gm(),Im=!0),Em.add(e,t)}var Im=!1,Em=new km;function Tm(){for(var e;e=mm();){try{e.h.call(e.g)}catch(e){_m(e)}var t=wm;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Im=!1}function Sm(e,t){dm.call(this),this.h=e||1,this.g=t||ny,this.j=ly(this.qb,this),this.l=Date.now()}function Am(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Cm(e,t,n){if("function"==typeof e)n&&(e=ly(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ly(e.handleEvent,e)}return 2147483647<Number(t)?-1:ny.setTimeout(e,t||0)}function Rm(e){e.g=Cm((function(){e.g=null,e.i&&(e.i=!1,Rm(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}hy(Sm,dm),(Xp=Sm.prototype).ga=!1,Xp.T=null,Xp.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vm(this,"tick"),this.ga&&(Am(this),this.start()))}},Xp.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xp.N=function(){Sm.$.N.call(this),Am(this),delete this.g};var Nm=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).m=t,a.j=i,a.h=null,a.i=!1,a.g=null,a}return e(h)(r,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Rm(this)}},{key:"N",value:function(){e(uo)(e(lo)(r.prototype),"N",this).call(this),this.g&&(ny.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}(dy);function Om(e){dy.call(this),this.h=e,this.g={}}hy(Om,dy);var Dm=[];function Pm(e,t,n,r){Array.isArray(n)||(n&&(Dm[0]=n.toString()),n=Dm);for(var i=0;i<n.length;i++){var a=rm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Lm(e){Qy(e.g,(function(e,t){this.g.hasOwnProperty(t)&&um(e)}),e),e.g={}}function Mm(){this.g=!0}function Um(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ym(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Om.prototype.N=function(){Om.$.N.call(this),Lm(this)},Om.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mm.prototype.Ea=function(){this.g=!1},Mm.prototype.info=function(){};var Fm={},Vm=null;function Bm(){return Vm=Vm||new dm}function jm(e){my.call(this,Fm.Ta,e)}function qm(e){var t=Bm();vm(t,new jm(t))}function zm(e,t){my.call(this,Fm.STAT_EVENT,e),this.stat=t}function Gm(e){var t=Bm();vm(t,new zm(t,e))}function Km(e,t){my.call(this,Fm.Ua,e),this.size=t}function Hm(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ny.setTimeout((function(){e()}),t)}Fm.Ta="serverreachability",hy(jm,my),Fm.STAT_EVENT="statevent",hy(zm,my),Fm.Ua="timingevent",hy(Km,my);var Wm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jm(){}function Xm(e){return e.h||(e.h=e.i())}function Ym(){}Jm.prototype.h=null;var $m,Zm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function eg(){my.call(this,"d")}function tg(){my.call(this,"c")}function ng(){}function rg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Om(this),this.P=ag,e=Ny?125:void 0,this.V=new Sm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new ig}function ig(){this.i=null,this.g="",this.h=!1}hy(eg,my),hy(tg,my),hy(ng,Jm),ng.prototype.g=function(){return new XMLHttpRequest},ng.prototype.i=function(){return{}},$m=new ng;var ag=45e3,og={},ug={};function sg(e,t,n){e.L=1,e.v=Sg(_g(t)),e.s=n,e.S=!0,cg(e,null)}function cg(e,t){e.G=Date.now(),dg(e),e.A=_g(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Bg(n.i,"t",r),e.C=0,n=e.l.I,e.h=new ig,e.g=Bk(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Nm(ly(e.Pa,e,e.g),e.O)),Pm(e.U,e.g,"readystatechange",e.nb),t=e.I?Jy(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),qm(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function lg(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function fg(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=hg(e,n))==ug){4==t&&(e.o=4,Gm(14),i=!1),Um(e.j,e.m,null,"[Incomplete Response]");break}if(r==og){e.o=4,Gm(15),Um(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Um(e.j,e.m,r,null),gg(e,r)}lg(e)&&r!=ug&&r!=og&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Gm(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ok(t),t.L=!0,Gm(11))):(Um(e.j,e.m,n,"[Invalid Chunked Response]"),mg(e),yg(e))}function hg(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ug:(n=Number(t.substring(n,r)),isNaN(n)?og:(r+=1)+n>t.length?ug:(t=t.substr(r,n),e.C=r+n,t))}function dg(e){e.Y=Date.now()+e.P,vg(e,e.P)}function vg(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hm(ly(e.lb,e),t)}function pg(e){e.B&&(ny.clearTimeout(e.B),e.B=null)}function yg(e){0==e.l.H||e.J||Lk(e.l,e)}function mg(e){pg(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Am(e.V),Lm(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function gg(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wg(n.h,e)))if(!e.K&&Wg(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Pk(n),Ik(n)}Nk(n),Gm(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Hm(ly(n.ib,n),6e3));if(1>=Hg(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else Uk(n,11)}else if((e.K||n.g==e)&&Pk(n),!ky(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"==typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Qg(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Tg(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Vk(r,r.I?r.oa:null,r.Y),d.K){Jg(r.h,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(pg(v),dg(v)),r.g=d}else Rk(r);0<n.i.length&&Tk(n)}else"stop"!=a[0]&&"close"!=a[0]||Uk(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Uk(n,7):xk(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}qm()}catch(a){}}function kg(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(iy(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(iy(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(iy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Xp=rg.prototype).setTimeout=function(e){this.P=e},Xp.nb=function(e){e=e.target;var t=this.M;t&&3==mk(e)?t.l():this.Pa(e)},Xp.Pa=function(e){try{if(e==this.g)e:{var t=mk(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Ny||this.g&&(this.h.h||this.g.ja()||gk(this.g)))){this.J||4!=t||7==n||qm(),pg(this);var r=this.g.da();this.aa=r;t:if(lg(this)){var i=gk(this.g);e="";var a=i.length,o=4==mk(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){mg(this),yg(this);var u="";break t}this.h.i=new ny.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ky(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Gm(12),mg(this),yg(this);break e}Um(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gg(this,r)}this.S?(fg(this,t,u),Ny&&this.i&&3==t&&(Pm(this.U,this.V,"tick",this.mb),this.V.start())):(Um(this.j,this.m,u,null),gg(this,u)),4==t&&mg(this),this.i&&!this.J&&(4==t?Lk(this.l,this):(this.i=!1,dg(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Gm(12)):(this.o=0,Gm(13)),mg(this),yg(this)}}}catch(t){}},Xp.mb=function(){if(this.g){var e=mk(this.g),t=this.g.ja();this.C<t.length&&(pg(this),fg(this,e,t),this.i&&4!=e&&dg(this))}},Xp.cancel=function(){this.J=!0,mg(this)},Xp.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(qm(),Gm(17)),mg(this),this.o=2,yg(this)):vg(this,this.Y-e)};var wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bg(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof bg){this.h=void 0!==t?t:e.h,xg(this,e.j),this.s=e.s,this.g=e.g,Ig(this,e.m),this.l=e.l,t=e.i;var n=new Mg;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Eg(this,n),this.o=e.o}else e&&(n=String(e).match(wg))?(this.h=!!t,xg(this,n[1]||"",!0),this.s=Ag(n[2]||""),this.g=Ag(n[3]||"",!0),Ig(this,n[4]),this.l=Ag(n[5]||"",!0),Eg(this,n[6]||"",!0),this.o=Ag(n[7]||"")):(this.h=!!t,this.i=new Mg(null,this.h))}function _g(e){return new bg(e)}function xg(e,t,n){e.j=n?Ag(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ig(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Eg(e,t,n){t instanceof Mg?(e.i=t,function(e,t){t&&!e.j&&(Ug(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fg(this,t),Bg(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Cg(t,Pg)),e.i=new Mg(t,e.h))}function Tg(e,t,n){e.i.set(t,n)}function Sg(e){return Tg(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ag(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cg(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Rg),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rg(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bg.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cg(t,Ng,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cg(t,Ng,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cg(n,"/"==n.charAt(0)?Dg:Og,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cg(n,Lg)),e.join("")};var Ng=/[#\/\?@]/g,Og=/[#\?:]/g,Dg=/[#\?]/g,Pg=/[#\?@]/g,Lg=/#/g;function Mg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ug(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fg(e,t){Ug(e),t=jg(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vg(e,t){return Ug(e),t=jg(e,t),e.g.has(t)}function Bg(e,t,n){Fg(e,t),0<n.length&&(e.i=null,e.g.set(jg(e,t),py(n)),e.h+=n.length)}function jg(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xp=Mg.prototype).add=function(e,t){Ug(this),this.i=null,e=jg(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xp.forEach=function(e,t){Ug(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Xp.sa=function(){Ug(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xp.Z=function(e){Ug(this);var t=[];if("string"==typeof e)Vg(this,e)&&(t=t.concat(this.g.get(jg(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Xp.set=function(e,t){return Ug(this),this.i=null,Vg(this,e=jg(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xp.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Xp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var qg=function t(n,r){"use strict";e(f)(this,t),this.h=n,this.g=r};function zg(e){this.l=e||Gg,ny.PerformanceNavigationTiming?e=0<(e=ny.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ny.g&&ny.g.Ka&&ny.g.Ka()&&ny.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gg=10;function Kg(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hg(e){return e.h?1:e.g?e.g.size:0}function Wg(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qg(e,t){e.g?e.g.add(t):e.h=t}function Jg(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xg(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t=e.i,n=!0,r=!1,i=void 0;try{for(var a,o=e.g.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;t=t.concat(u.F)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}return py(e.i)}function Yg(){}function $g(){this.g=new Yg}function Zg(e,t,n){var r=n||"";try{kg(e,(function(e,n){var i=e;ay(e)&&(i=ym(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function ek(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function tk(e){this.l=e.fc||null,this.j=e.ob||!1}function nk(e,t){dm.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=rk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zg.prototype.cancel=function(){if(this.i=Xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e=!0,t=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.g.clear()}},Yg.prototype.stringify=function(e){return ny.JSON.stringify(e,void 0)},Yg.prototype.parse=function(e){return ny.JSON.parse(e,void 0)},hy(tk,Jm),tk.prototype.g=function(){return new nk(this.l,this.j)},tk.prototype.i=function(e){return function(){return e}}({}),hy(nk,dm);var rk=0;function ik(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ak(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ok(e)}function ok(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xp=nk.prototype).open=function(e,t){if(this.readyState!=rk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ok(this)},Xp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ny).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Xp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ak(this)),this.readyState=rk},Xp.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ok(this)),this.g&&(this.readyState=3,ok(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==ny.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ik(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Xp.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ak(this):ok(this),3==this.readyState&&ik(this)}},Xp.Za=function(e){this.g&&(this.response=this.responseText=e,ak(this))},Xp.Ya=function(e){this.g&&(this.response=e,ak(this))},Xp.ka=function(){this.g&&ak(this)},Xp.setRequestHeader=function(e,t){this.v.append(e,t)},Xp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uk=ny.JSON.parse;function sk(e){dm.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ck,this.L=this.M=!1}hy(sk,dm);var ck="",lk=/^https?$/i,fk=["POST","PUT"];function hk(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,dk(e),pk(e)}function dk(e){e.F||(e.F=!0,vm(e,"complete"),vm(e,"error"))}function vk(e){if(e.h&&void 0!==ty&&(!e.C[1]||4!=mk(e)||2!=e.da()))if(e.v&&4==mk(e))Cm(e.La,0,e);else if(vm(e,"readystatechange"),4==mk(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(wg)[1]||null;if(!a&&ny.self&&ny.self.location){var o=ny.self.location.protocol;a=o.substr(0,o.length-1)}i=!lk.test(a?a.toLowerCase():"")}t=i}if(t)vm(e,"complete"),vm(e,"success");else{e.m=6;try{var u=2<mk(e)?e.g.statusText:""}catch(e){u=""}e.j=u+" ["+e.da()+"]",dk(e)}}finally{pk(e)}}}function pk(e,t){if(e.g){yk(e);var n=e.g,r=e.C[0]?ry:null;e.g=null,e.C=null,t||vm(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function yk(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ny.clearTimeout(e.A),e.A=null)}function mk(e){return e.g?e.g.readyState:0}function gk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ck:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function kk(e){var t="";return Qy(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function wk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kk(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Tg(e,t,n))}function bk(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _k(e){this.Ga=0,this.i=[],this.j=new Mm,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bk("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bk("baseRetryDelayMs",5e3,e),this.hb=bk("retryDelaySeedMs",1e4,e),this.eb=bk("forwardChannelMaxRetries",2,e),this.xa=bk("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new zg(e&&e.concurrentRequestLimit),this.Ja=new $g,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function xk(e){if(Ek(e),3==e.H){var t=e.W++,n=_g(e.G);Tg(n,"SID",e.J),Tg(n,"RID",t),Tg(n,"TYPE","terminate"),Ak(e,n),(t=new rg(e,e.j,t,void 0)).L=2,t.v=Sg(_g(n)),n=!1,ny.navigator&&ny.navigator.sendBeacon&&(n=ny.navigator.sendBeacon(t.v.toString(),"")),!n&&ny.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bk(t.l,null),t.g.ha(t.v)),t.G=Date.now(),dg(t)}Fk(e)}function Ik(e){e.g&&(Ok(e),e.g.cancel(),e.g=null)}function Ek(e){Ik(e),e.u&&(ny.clearTimeout(e.u),e.u=null),Pk(e),e.h.cancel(),e.m&&("number"==typeof e.m&&ny.clearTimeout(e.m),e.m=null)}function Tk(e){Kg(e.h)||e.m||(e.m=!0,xm(e.Na,e),e.C=0)}function Sk(e,t){var n;n=t?t.m:e.W++;var r=_g(e.G);Tg(r,"SID",e.J),Tg(r,"RID",n),Tg(r,"AID",e.V),Ak(e,r),e.o&&e.s&&wk(r,e.o,e.s),n=new rg(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Ck(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qg(e.h,n),sg(n,r,t)}function Ak(e,t){e.ma&&Qy(e.ma,(function(e,n){Tg(t,n,e)})),e.l&&kg({},(function(e,n){Tg(t,n,e)}))}function Ck(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ly(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Zg(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Rk(e){e.g||e.u||(e.ba=1,xm(e.Ma,e),e.A=0)}function Nk(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Hm(ly(e.Ma,e),Mk(e,e.A)),e.A++,!0)}function Ok(e){null!=e.B&&(ny.clearTimeout(e.B),e.B=null)}function Dk(e){e.g=new rg(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_g(e.wa);Tg(t,"RID","rpc"),Tg(t,"SID",e.J),Tg(t,"CI",e.M?"0":"1"),Tg(t,"AID",e.V),Tg(t,"TYPE","xmlhttp"),Ak(e,t),e.o&&e.s&&wk(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=Sg(_g(t)),n.s=null,n.S=!0,cg(n,e)}function Pk(e){null!=e.v&&(ny.clearTimeout(e.v),e.v=null)}function Lk(e,t){var n=null;if(e.g==t){Pk(e),Ok(e),e.g=null;var r=2}else{if(!Wg(e.h,t))return;n=t.F,Jg(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;vm(r=Bm(),new Km(r,n)),Tk(e)}else Rk(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Hg(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.F.concat(e.i),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Hm(ly(e.Na,e,t),Mk(e,e.C)),e.C++,0)))}(e,t)||2==r&&Nk(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Uk(e,5);break;case 4:Uk(e,10);break;case 3:Uk(e,6);break;default:Uk(e,2)}}function Mk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function Uk(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ly(e.pb,e);n||(n=new bg("//www.google.com/images/cleardot.gif"),ny.location&&"http"==ny.location.protocol||xg(n,"https"),Sg(n)),function(e,t){var n=new Mm;if(ny.Image){var r=new Image;r.onload=fy(ek,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fy(ek,n,r,"TestLoadImage: error",!1,t),r.onabort=fy(ek,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fy(ek,n,r,"TestLoadImage: timeout",!1,t),ny.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Gm(2);e.H=0,e.l&&e.l.za(t),Fk(e),Ek(e)}function Fk(e){if(e.H=0,e.pa=[],e.l){var t=Xg(e.h);0==t.length&&0==e.i.length||(yy(e.pa,t),yy(e.pa,e.i),e.h.i.length=0,py(e.i),e.i.length=0),e.l.ya()}}function Vk(e,t,n){var r=n instanceof bg?_g(n):new bg(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ig(r,r.m);else{var i=ny.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new bg(null,void 0);r&&xg(a,r),t&&(a.g=t),i&&Ig(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Tg(r,n,t),Tg(r,"VER",e.qa),Ak(e,r),r}function Bk(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new sk(new tk({ob:!0})):new sk(e.va)).Oa(e.I),t}function jk(){}function qk(){if(Cy&&!(10<=Number(jy)))throw Error("Environmental error: no available transport.")}function zk(e,t){dm.call(this),this.g=new _k(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ky(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ky(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Hk(this)}function Gk(e){eg.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Kk(){tg.call(this),this.status=1}function Hk(e){this.g=e}function Wk(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qk(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Jk(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Xp=sk.prototype).Oa=function(e){this.M=e},Xp.ha=function(t,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);n=n?n.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$m.g(),this.C=this.u?Xm(this.u):Xm($m),this.g.onreadystatechange=ly(this.La,this);try{this.G=!0,this.g.open(n,String(t),!0),this.G=!1}catch(e){return void hk(this,e)}if(t=r||"",r=new Map(this.headers),i){var a=!0,o=!1,u=void 0;if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)r.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));try{for(var c,l=i.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;r.set(f,i.get(f))}}catch(e){o=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw u}}}}i=Array.from(r.keys()).find((function(e){return"content-type"==e.toLowerCase()})),s=ny.FormData&&t instanceof ny.FormData,!(0<=vy(fk,n))||i||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h=!0,d=!1,v=void 0;try{for(var p,y=r[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var m=e(Vt)(p.value,2),g=m[0],k=m[1];this.g.setRequestHeader(g,k)}}catch(e){d=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yk(this),0<this.B&&((this.L=function(e){return Cy&&Ey(Vy,9,(function(){for(var e=0,t=wy(String(Ty)).split("."),n=wy("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=by(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||by(0==a[2].length,0==o[2].length)||by(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ly(this.ua,this)):this.A=Cm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(e){hk(this,e)}},Xp.ua=function(){void 0!==ty&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vm(this,"timeout"),this.abort(8))},Xp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vm(this,"complete"),vm(this,"abort"),pk(this))},Xp.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pk(this,!0)),sk.$.N.call(this)},Xp.La=function(){this.s||(this.G||this.v||this.l?vk(this):this.kb())},Xp.kb=function(){vk(this)},Xp.da=function(){try{return 2<mk(this)?this.g.status:-1}catch(e){return-1}},Xp.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Xp.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uk(t)}},Xp.Ia=function(){return this.m},Xp.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xp=_k.prototype).qa=8,Xp.H=1,Xp.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new rg(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Yy(n=Jy(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ck(this,t,r),Tg(i=_g(this.G),"RID",e),Tg(i,"CVER",22),this.F&&Tg(i,"X-HTTP-Session-Id",this.F),Ak(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(kk(n)))+"&"+r:this.o&&wk(i,this.o,n)),Qg(this.h,t),this.bb&&Tg(i,"TYPE","init"),this.P?(Tg(i,"$req",r),Tg(i,"SID","null"),t.ba=!0,sg(t,i,null)):sg(t,i,r),this.H=2}}else 3==this.H&&(e?Sk(this,e):0==this.i.length||Kg(this.h)||Sk(this))},Xp.Ma=function(){if(this.u=null,Dk(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Hm(ly(this.jb,this),e)}},Xp.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Gm(10),Ik(this),Dk(this))},Xp.ib=function(){null!=this.v&&(this.v=null,Ik(this),Nk(this),Gm(19))},Xp.pb=function(e){e?(this.j.info("Successfully pinged google.com"),Gm(2)):(this.j.info("Failed to ping google.com"),Gm(1))},(Xp=jk.prototype).Ba=function(){},Xp.Aa=function(){},Xp.za=function(){},Xp.ya=function(){},Xp.Va=function(){},qk.prototype.g=function(e,t){return new zk(e,t)},hy(zk,dm),zk.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;Gm(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Vk(e,null,e.Y),Tk(e)},zk.prototype.close=function(){xk(this.g)},zk.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ym(e),e=n);t.i.push(new qg(t.fb++,e)),3==t.H&&Tk(t)},zk.prototype.N=function(){this.g.l=null,delete this.j,xk(this.g),delete this.g,zk.$.N.call(this)},hy(Gk,eg),hy(Kk,tg),hy(Hk,jk),Hk.prototype.Ba=function(){vm(this.g,"a")},Hk.prototype.Aa=function(e){vm(this.g,new Gk(e))},Hk.prototype.za=function(e){vm(this.g,new Kk)},Hk.prototype.ya=function(){vm(this.g,"b")},hy(Wk,(function(){this.blockSize=-1})),Wk.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wk.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Qk(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Qk(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Qk(this,r),i=0;break}}this.h=i,this.i+=t},Wk.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Xk={};function Yk(e){return-128<=e&&128>e?Ey(Xk,e,(function(e){return new Jk([0|e],0>e?-1:0)})):new Jk([0|e],0>e?-1:0)}function $k(e){if(isNaN(e)||!isFinite(e))return ew;if(0>e)return aw($k(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Zk;return new Jk(t,0)}var Zk=4294967296,ew=Yk(0),tw=Yk(1),nw=Yk(16777216);function rw(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function iw(e){return-1==e.h}function aw(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Jk(n,~e.h).add(tw)}function ow(e,t){return e.add(aw(t))}function uw(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function sw(e,t){this.g=e,this.h=t}function cw(e,t){if(rw(t))throw Error("division by zero");if(rw(e))return new sw(ew,ew);if(iw(e))return t=cw(aw(e),t),new sw(aw(t.g),aw(t.h));if(iw(t))return t=cw(e,aw(t)),new sw(aw(t.g),t.h);if(30<e.g.length){if(iw(e)||iw(t))throw Error("slowDivide_ only works with positive integers.");for(var n=tw,r=t;0>=r.X(e);)n=lw(n),r=lw(r);var i=fw(n,1),a=fw(r,1);for(r=fw(r,2),n=fw(n,2);!rw(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=fw(r,1),n=fw(n,1)}return t=ow(e,i.R(t)),new sw(i,t)}for(i=ew;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=$k(n)).R(t);iw(o)||0<o.X(e);)o=(a=$k(n-=r)).R(t);rw(a)&&(a=tw),i=i.add(a),e=ow(e,o)}return new sw(i,e)}function lw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Jk(n,e.h)}function fw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Jk(i,e.h)}(Xp=Jk.prototype).ea=function(){if(iw(this))return-aw(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Zk+r)*t,t*=Zk}return e},Xp.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rw(this))return"0";if(iw(this))return"-"+aw(this).toString(e);for(var t=$k(Math.pow(e,6)),n=this,r="";;){var i=cw(n,t).g,a=((0<(n=ow(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(rw(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Xp.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Xp.X=function(e){return iw(e=ow(this,e))?-1:rw(e)?0:1},Xp.abs=function(){return iw(this)?aw(this):this},Xp.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Jk(n,-2147483648&n[n.length-1]?-1:0)},Xp.R=function(e){if(rw(this)||rw(e))return ew;if(iw(this))return iw(e)?aw(this).R(aw(e)):aw(aw(this).R(e));if(iw(e))return aw(this.R(aw(e)));if(0>this.X(nw)&&0>e.X(nw))return $k(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,uw(n,2*r+2*i),n[2*r+2*i+1]+=a*s,uw(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,uw(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,uw(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Jk(n,0)},Xp.gb=function(e){return cw(this,e).h},Xp.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Jk(n,this.h&e.h)},Xp.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Jk(n,this.h|e.h)},Xp.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Jk(n,this.h^e.h)},qk.prototype.createWebChannel=qk.prototype.g,zk.prototype.send=zk.prototype.u,zk.prototype.open=zk.prototype.m,zk.prototype.close=zk.prototype.close,Wm.NO_ERROR=0,Wm.TIMEOUT=8,Wm.HTTP_ERROR=6,Qm.COMPLETE="complete",Ym.EventType=Zm,Zm.OPEN="a",Zm.CLOSE="b",Zm.ERROR="c",Zm.MESSAGE="d",dm.prototype.listen=dm.prototype.O,sk.prototype.listenOnce=sk.prototype.P,sk.prototype.getLastError=sk.prototype.Sa,sk.prototype.getLastErrorCode=sk.prototype.Ia,sk.prototype.getStatus=sk.prototype.da,sk.prototype.getResponseJson=sk.prototype.Wa,sk.prototype.getResponseText=sk.prototype.ja,sk.prototype.send=sk.prototype.ha,sk.prototype.setWithCredentials=sk.prototype.Oa,Wk.prototype.digest=Wk.prototype.l,Wk.prototype.reset=Wk.prototype.reset,Wk.prototype.update=Wk.prototype.j,Jk.prototype.add=Jk.prototype.add,Jk.prototype.multiply=Jk.prototype.R,Jk.prototype.modulo=Jk.prototype.gb,Jk.prototype.compare=Jk.prototype.X,Jk.prototype.toNumber=Jk.prototype.ea,Jk.prototype.toString=Jk.prototype.toString,Jk.prototype.getBits=Jk.prototype.D,Jk.fromNumber=$k,Jk.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return aw(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$k(Math.pow(n,8)),i=ew,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=$k(Math.pow(n,o)),i=i.R(o).add($k(u))):i=(i=i.R(r)).add($k(u))}return i};var hw=ey.createWebChannelTransport=function(){return new qk},dw=ey.getStatEventTarget=function(){return Bm()},vw=ey.ErrorCode=Wm,pw=ey.EventType=Qm,yw=ey.Event=Fm,mw=ey.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gw=ey.FetchXmlHttpFactory=tk,kw=ey.WebChannel=Ym,ww=ey.XhrIo=sk,bw=ey.Md5=Wk,_w=ey.Integer=Jk,xw="@firebase/firestore",Iw=function(){"use strict";function t(n){e(f)(this,t),this.uid=n}return e(h)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),t}();Iw.UNAUTHENTICATED=new Iw(null),Iw.GOOGLE_CREDENTIALS=new Iw("google-credentials-uid"),Iw.FIRST_PARTY=new Iw("first-party-uid"),Iw.MOCK_USER=new Iw("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ew="9.22.0",Tw=new Gi("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){return Tw.logLevel}function Aw(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Tw.logLevel<=Mi.DEBUG){var a,o=r.map(Nw);(a=Tw).debug.apply(a,["Firestore (".concat(Ew,"): ").concat(t)].concat(e(Kt)(o)))}}function Cw(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Tw.logLevel<=Mi.ERROR){var a,o=r.map(Nw);(a=Tw).error.apply(a,["Firestore (".concat(Ew,"): ").concat(t)].concat(e(Kt)(o)))}}function Rw(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Tw.logLevel<=Mi.WARN){var a,o=r.map(Nw);(a=Tw).warn.apply(a,["Firestore (".concat(Ew,"): ").concat(t)].concat(e(Kt)(o)))}}function Nw(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ew,") INTERNAL ASSERTION FAILED: ")+e;throw Cw(t),new Error(t)}function Dw(e,t){e||Ow()}function Pw(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mw=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,i)).code=t,a.message=i,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},e($p)(a)}return r}(yi),Uw=function t(){"use strict";var n=this;e(f)(this,t),this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))},Fw=function t(n,r){"use strict";e(f)(this,t),this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))},Vw=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Iw.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),Bw=function(){"use strict";function t(n){e(f)(this,t),this.token=n,this.changeListener=null}return e(h)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),jw=function(){"use strict";function t(n){e(f)(this,t),this.t=n,this.currentUser=Iw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return e(h)(t,[{key:"start",value:function(t,n){var r=this,i=this.i,a=function(e){return r.i!==i?(i=r.i,n(e)):Promise.resolve()},o=new Uw;this.o=function(){var e=r;r.i++,r.currentUser=r.u(),o.resolve(),o=new Uw,t.enqueueRetryable((function(){return a(e.currentUser)}))};var s=function(){var n=o,i=r;t.enqueueRetryable(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.promise;case 2:return e.next=4,a(i.currentUser);case 4:case"end":return e.stop()}}),t)}))))},l=function(e){Aw("FirebaseAuthCredentialsProvider","Auth detected"),r.auth=e,r.auth.addAuthTokenListener(r.o),s()};this.t.onInit((function(e){return l(e)})),setTimeout((function(){if(!r.auth){var e=r.t.getImmediate({optional:!0});e?l(e):(Aw("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Uw)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Aw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Dw("string"==typeof n.accessToken),new Fw(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Dw(null===e||"string"==typeof e),new Iw(e)}}]),t}(),qw=function(){"use strict";function t(n,r,i){e(f)(this,t),this.h=n,this.l=r,this.m=i,this.type="FirstParty",this.user=Iw.FIRST_PARTY,this.g=new Map}return e(h)(t,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),t}(),zw=function(){"use strict";function t(n,r,i){e(f)(this,t),this.h=n,this.l=r,this.m=i}return e(h)(t,[{key:"getToken",value:function(){return Promise.resolve(new qw(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Iw.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),Gw=function t(n){"use strict";e(f)(this,t),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)},Kw=function(){"use strict";function t(n){e(f)(this,t),this.I=n,this.forceRefresh=!1,this.appCheck=null,this.T=null}return e(h)(t,[{key:"start",value:function(e,t){var n=this;this.o=function(r){e.enqueueRetryable((function(){return function(e){null!=e.error&&Aw("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Aw("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()}(r)}))};var r=function(e){Aw("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?r(e):Aw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Dw("string"==typeof t.token),e.T=t.token,new Gw(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hw(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ww=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Hw(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),t}();function Qw(e,t){return e<t?-1:e>t?1:0}function Jw(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Xw(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yw=function(){"use strict";function t(n,r){if(e(f)(this,t),this.seconds=n,this.nanoseconds=r,r<0)throw new Mw(Lw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Mw(Lw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Mw(Lw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Mw(Lw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return e(h)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qw(this.nanoseconds,e.nanoseconds):Qw(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),$w=function(){"use strict";function t(n){e(f)(this,t),this.timestamp=n}return e(h)(t,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new Yw(0,0))}},{key:"max",value:function(){return new t(new Yw(253402300799,999999999))}}]),t}(),Zw=function(){"use strict";function t(n,r,i){e(f)(this,t),void 0===r?r=0:r>n.length&&Ow(),void 0===i?i=n.length-r:i>n.length-r&&Ow(),this.segments=n,this.offset=r,this.len=i}return e(h)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(e){n.push(e)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),t}(),eb=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=[],o=!0,u=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f,h=c.value;if(h.indexOf("//")>=0)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid segment (".concat(h,"). Paths must not contain // in them."));(f=a).push.apply(f,e(Kt)(h.split("/").filter((function(e){return e.length>0}))))}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return new r(a)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Zw),tb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nb=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tb.test(e)}},{key:"keyField",value:function(){return new r(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],n="",i=0,a=function(){if(0===n.length)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Mw(Lw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Mw(Lw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(n+=u,i++):(a(),i++)}if(a(),o)throw new Mw(Lw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Zw),rb=function(){"use strict";function t(n){e(f)(this,t),this.path=n}return e(h)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===eb.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(eb.fromString(e))}},{key:"fromName",value:function(e){return new t(eb.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(eb.emptyPath())}},{key:"comparator",value:function(e,t){return eb.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(e){return new t(new eb(e.slice()))}}]),t}(),ib=function t(n,r,i,a){"use strict";e(f)(this,t),this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=a};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(e){return e.fields.find((function(e){return 2===e.kind}))}function ob(e){return e.fields.filter((function(e){return 2!==e.kind}))}ib.UNKNOWN_ID=-1;var ub=function t(n,r){"use strict";e(f)(this,t),this.fieldPath=n,this.kind=r};var sb=function(){"use strict";function t(n,r){e(f)(this,t),this.sequenceNumber=n,this.offset=r}return e(h)(t,null,[{key:"empty",value:function(){return new t(0,fb.min())}}]),t}();function cb(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$w.fromTimestamp(1e9===r?new Yw(n+1,0):new Yw(n,r));return new fb(i,rb.empty(),t)}function lb(e){return new fb(e.readTime,e.key,-1)}var fb=function(){"use strict";function t(n,r,i){e(f)(this,t),this.readTime=n,this.documentKey=r,this.largestBatchId=i}return e(h)(t,null,[{key:"min",value:function(){return new t($w.min(),rb.empty(),-1)}},{key:"max",value:function(){return new t($w.max(),rb.empty(),-1)}}]),t}();function hb(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rb.comparator(e.documentKey,t.documentKey))?n:Qw(e.largestBatchId,t.largestBatchId)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vb=function(){"use strict";function t(){e(f)(this,t),this.onCommittedListeners=[]}return e(h)(t,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),t}();function pb(e){return yb.apply(this,arguments)}function yb(){return(yb=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code===Lw.FAILED_PRECONDITION&&n.message===db){e.next=2;break}throw n;case 2:Aw("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mb=function(){"use strict";function t(n){var r=this;e(f)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((function(e){r.isDone=!0,r.result=e,r.nextCallback&&r.nextCallback(e)}),(function(e){r.isDone=!0,r.error=e,r.catchCallback&&r.catchCallback(e)}))}return e(h)(t,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&Ow(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){var a=r;r.nextCallback=function(n){a.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){a.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,a=!1;e.forEach((function(e){++r,e.next((function(){++i,a&&i===r&&t()}),(function(e){return n(e)}))})),a=!0,i===r&&t()}))}},{key:"or",value:function(e){var n=t.resolve(!1),r=!0,i=!1,a=void 0;try{for(var o,u=function(e,r){var i=r.value;n=n.next((function(e){return e?t.resolve(e):i()}))},s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u(0,o)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(e,n){return new t((function(t,r){for(var i=function(i){var s=i;n(e[s]).next((function(e){o[s]=e,++u===a&&t(o)}),(function(e){return r(e)}))},a=e.length,o=new Array(a),u=0,s=0;s<a;s++)i(s)}))}},{key:"doWhile",value:function(e,n){return new t((function(t,r){var i=function(){!0===e()?n().next((function(){i()}),r):t()};i()}))}}]),t}(),gb=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this.action=n,this.transaction=r,this.aborted=!1,this.v=new Uw,this.transaction.oncomplete=function(){i.v.resolve()},this.transaction.onabort=function(){r.error?i.v.reject(new bb(n,r.error)):i.v.resolve()},this.transaction.onerror=function(e){var t=Tb(e.target.error);i.v.reject(new bb(n,t))}}return e(h)(t,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Aw("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new xb(t)}}],[{key:"open",value:function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new bb(n,e)}}}]),t}(),kb=function(){"use strict";function t(n,r,i){e(f)(this,t),this.name=n,this.version=r,this.V=i,12.2===t.S(li())&&Cw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e(h)(t,[{key:"$",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.db,e.t0){e.next=6;break}return Aw("SimpleDb","Opening database:",n.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new bb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Mw(Lw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Mw(Lw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new bb(t,n))},i.onupgradeneeded=function(e){Aw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Aw("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:n.db=e.sent;case 6:return n.F&&(n.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",(e.t0,n.db));case 8:case"end":return e.stop()}}),r)})))()}},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(t,n,r,i){var a=this;return e(u)(e(c).mark((function o(){var u,s,l,f,h,d;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u="readonly"===n,s=0;case 2:return++s,e.prev=3,e.next=6,a.$(t);case 6:return a.db=e.sent,l=gb.open(a.db,t,u?"readonly":"readwrite",r),(f=i(l).next((function(e){return l.P(),e})).catch((function(e){return l.abort(e),mb.reject(e)})).toPromise()).catch((function(){})),e.next=11,l.R;case 11:return e.abrupt("return",(e.sent,f));case 14:if(e.prev=14,e.t0=e.catch(3),h=e.t0,d="FirebaseError"!==h.name&&s<3,Aw("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),a.close(),d){e.next=19;break}return e.abrupt("return",Promise.reject(h));case 19:e.next=2;break;case 21:case"end":return e.stop()}}),o,null,[[3,14]])})))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Aw("SimpleDb","Removing database:",e),Ib(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!pi())return!1;if(t.C())return!0;var e=li(),n=t.S(e),r=0<n&&n<10,i=t.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return void 0!==Ur&&"YES"===(void 0===(e={})?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),wb=function(){"use strict";function t(n){e(f)(this,t),this.L=n,this.q=!1,this.U=null}return e(h)(t,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Ib(this.L.delete())}}]),t}(),bb=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,Lw.UNAVAILABLE,"IndexedDB transaction '".concat(t,"' failed: ").concat(i))).name="IndexedDbTransactionError",e($p)(a)}return r}(Mw);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(e){return"IndexedDbTransactionError"===e.name}var xb=function(){"use strict";function t(n){e(f)(this,t),this.store=n}return e(h)(t,[{key:"put",value:function(e,t){var n;return void 0!==t?(Aw("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Aw("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ib(n)}},{key:"add",value:function(e){return Aw("SimpleDb","ADD",this.store.name,e,e),Ib(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ib(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Aw("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Aw("SimpleDb","DELETE",this.store.name,e),Ib(this.store.delete(e))}},{key:"count",value:function(){return Aw("SimpleDb","COUNT",this.store.name),Ib(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new mb((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new mb((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Aw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new mb((function(n,r){t.onerror=function(e){var t=Tb(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new mb((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new wb(i),o=t(i.primaryKey,i.value,a);if(o instanceof mb){var u=o.catch((function(e){return a.done(),mb.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return mb.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),t}();function Ib(e){return new mb((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Tb(e.target.error);n(t)}}))}var Eb=!1;function Tb(e){var t=kb.S(li());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Mw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Eb||(Eb=!0,setTimeout((function(){throw r}),0)),r}}return e}var Sb=function(){"use strict";function t(n,r){e(f)(this,t),this.asyncQueue=n,this.tt=r,this.task=null}return e(h)(t,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(t){var n=this;Aw("IndexBackiller","Scheduled in ".concat(t,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.task=null,e.prev=1,e.t0=Aw,e.t1="Documents written: ",e.next=6,n.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!_b(e.t4)){e.next=17;break}Aw("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,pb(e.t4);case 19:return e.next=21,n.et(6e4);case 21:case"end":return e.stop()}}),t,null,[[1,11]])}))))}}]),t}(),Ab=function(){"use strict";function t(n,r){e(f)(this,t),this.localStore=n,this.persistence=r}return e(h)(t,[{key:"nt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 1:case"end":return e.stop()}}),r)})))()}},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return mb.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Aw("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=r,o=n.changes;return r.localStore.indexManager.updateIndexEntries(e,o).next((function(){return a.rt(i,n)})).next((function(n){return Aw("IndexBackiller","Updating offset: ".concat(n)),a.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return o.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lb(t);hb(r,n)>0&&(n=r)})),new fb(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),t}(),Cb=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this.previousValue=n,r&&(r.sequenceNumberHandler=function(e){return i.ot(e)},this.ut=function(e){return r.writeSequenceNumber(e)})}return e(h)(t,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),t}();function Rb(e){return null==e}function Nb(e){return 0===e&&1/e==-1/0}function Ob(e){return"number"==typeof e&&Number.isInteger(e)&&!Nb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Lb(t)),t=Pb(e.get(n),t);return Lb(t)}function Pb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function Lb(e){return e+""}function Mb(e){var t=e.length;if(Dw(t>=2),2===t)return Dw(""===e.charAt(0)&&""===e.charAt(1)),eb.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("",a);switch((o<0||o>n)&&Ow(),e.charAt(o+1)){case"":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"":i+=e.substring(a,o),i+="\0";break;case"":i+=e.substring(a,o+1);break;default:Ow()}a=o+2}return new eb(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cb.ct=-1;var Ub=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(e,t){return[e,Db(t)]}function Vb(e,t,n){return[e,Db(t),n]}var Bb={},jb=["prefixPath","collectionGroup","readTime","documentId"],qb=["prefixPath","collectionGroup","documentId"],zb=["collectionGroup","readTime","prefixPath","documentId"],Gb=["canonicalId","targetId"],Kb=["targetId","path"],Hb=["path","targetId"],Wb=["collectionId","parent"],Qb=["indexId","uid"],Jb=["uid","sequenceNumber"],Xb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yb=["indexId","uid","orderedDocumentKey"],$b=["userId","collectionPath","documentId"],Zb=["userId","collectionPath","largestBatchId"],e_=["userId","collectionGroup","largestBatchId"],t_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],n_=e(Kt)(t_).concat(["documentOverlays"]),r_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],i_=r_,a_=e(Kt)(i_).concat(["indexConfiguration","indexState","indexEntries"]),o_=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).ht=t,a.currentSequenceNumber=i,e($p)(a)}return r}(vb);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(e,t){var n=Pw(e);return kb.M(n.ht,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function c_(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function l_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f_=function(){"use strict";function t(n,r){e(f)(this,t),this.comparator=n,this.root=r||d_.EMPTY}return e(h)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,d_.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,d_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new h_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new h_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new h_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new h_(this.root,e,this.comparator,!0)}}]),t}(),h_=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.isReverse=a,this.nodeStack=[];for(var o=1;!n.isEmpty();)if(o=r?i(n.key,r):1,r&&a&&(o*=-1),o<0)n=this.isReverse?n.left:n.right;else{if(0===o){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return e(h)(t,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),t}(),d_=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=a?a:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return e(h)(t,[{key:"copy",value:function(e,n,r,i,a){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ow();if(this.right.isRed())throw Ow();var e=this.left.check();if(e!==this.right.check())throw Ow();return e+(this.isRed()?0:1)}}]),t}();d_.EMPTY=null,d_.RED=!0,d_.BLACK=!1,d_.EMPTY=new(function(){"use strict";function t(){e(f)(this,t),this.size=0}return e(h)(t,[{key:"key",get:function(){throw Ow()}},{key:"value",get:function(){throw Ow()}},{key:"color",get:function(){throw Ow()}},{key:"left",get:function(){throw Ow()}},{key:"right",get:function(){throw Ow()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new d_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v_=function(){"use strict";function t(n){e(f)(this,t),this.comparator=n,this.data=new f_(this.comparator)}return e(h)(t,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new p_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new p_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),p_=function(){"use strict";function t(n){e(f)(this,t),this.iter=n}return e(h)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();function y_(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m_=function(){"use strict";function t(n){e(f)(this,t),this.fields=n,n.sort(nb.comparator)}return e(h)(t,[{key:"unionWith",value:function(e){var n=new v_(nb.comparator),r=!0,i=!1,a=void 0;try{for(var o,u=this.fields[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n=n.add(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var c=!0,l=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;n=n.add(v)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new t(n.toArray())}},{key:"covers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.isPrefixOf(e))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(e){return Jw(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}(),g_=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="Base64DecodeError",e($p)(t)}return r}(e(Rr)(Error));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k_=Symbol.iterator,w_=function(){"use strict";function t(n){e(f)(this,t),this.binaryString=n}return e(h)(t,[{key:k_,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){var e;return e=this.binaryString,btoa(e)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qw(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new g_("Invalid base64 string: "+e):e}}(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */w_.EMPTY_BYTE_STRING=new w_("");var b_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __(e){if(Dw(!!e),"string"==typeof e){var t=0,n=b_.exec(e);if(Dw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:x_(e.seconds),nanos:x_(e.nanos)}}function x_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function I_(e){return"string"==typeof e?w_.fromBase64String(e):w_.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function T_(e){var t=e.mapValue.fields.__previous_value__;return E_(t)?T_(t):t}function S_(e){var t=__(e.mapValue.fields.__local_write_time__.timestampValue);return new Yw(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A_=function t(n,r,i,a,o,u,s,c,l){"use strict";e(f)(this,t),this.databaseId=n,this.appId=r,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=l},C_=function(){"use strict";function t(n,r){e(f)(this,t),this.projectId=n,this.database=r||"(default)"}return e(h)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}(),R_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},N_={nullValue:"NULL_VALUE"};function O_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?E_(e)?4:H_(e)?9007199254740991:10:Ow()}function D_(e,t){if(e===t)return!0;var n,r=O_(e);if(r!==O_(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return S_(e).isEqual(S_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=__(e.timestampValue),r=__(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,I_(e.bytesValue).isEqual(I_(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return x_(e.geoPointValue.latitude)===x_(t.geoPointValue.latitude)&&x_(e.geoPointValue.longitude)===x_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return x_(e.integerValue)===x_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=x_(e.doubleValue),r=x_(t.doubleValue);return n===r?Nb(n)===Nb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jw(e.arrayValue.values||[],t.arrayValue.values||[],D_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(s_(n)!==s_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!D_(n[i],r[i])))return!1;return!0}(e,t);default:return Ow()}}function P_(e,t){return void 0!==(e.values||[]).find((function(e){return D_(e,t)}))}function L_(e,t){if(e===t)return 0;var n,r,i,a,o=O_(e),u=O_(t);if(o!==u)return Qw(o,u);switch(o){case 0:case 9007199254740991:return 0;case 1:return Qw(e.booleanValue,t.booleanValue);case 2:return r=t,i=x_((n=e).integerValue||n.doubleValue),a=x_(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return M_(e.timestampValue,t.timestampValue);case 4:return M_(S_(e),S_(t));case 5:return Qw(e.stringValue,t.stringValue);case 6:return function(e,t){var n=I_(e),r=I_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Qw(n[i],r[i]);if(0!==a)return a}return Qw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qw(x_(e.latitude),x_(t.latitude));return 0!==n?n:Qw(x_(e.longitude),x_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=L_(n[i],r[i]);if(a)return a}return Qw(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===R_.mapValue&&t===R_.mapValue)return 0;if(e===R_.mapValue)return 1;if(t===R_.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Qw(r[o],a[o]);if(0!==u)return u;var s=L_(n[r[o]],i[a[o]]);if(0!==s)return s}return Qw(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ow()}}function M_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qw(e,t);var n=__(e),r=__(t),i=Qw(n.seconds,r.seconds);return 0!==i?i:Qw(n.nanos,r.nanos)}function U_(e){return F_(e)}function F_(e){var t,n,r,i;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=e.timestampValue,i=__(r),"time(".concat(i.seconds,",").concat(i.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?I_(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t="[",n=!0,r=!0,i=!1,a=void 0;try{for(var o,u=(e.values||[])[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n?n=!1:t+=",",t+=F_(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t+"]"}(e.arrayValue):"mapValue"in e?function(e){var t=Object.keys(e.fields||{}).sort(),n="{",r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;r?r=!1:n+=",",n+="".concat(c,":").concat(F_(e.fields[c]))}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n+"}"}(e.mapValue):Ow()}function V_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function B_(e){return!!e&&"integerValue"in e}function j_(e){return!!e&&"arrayValue"in e}function q_(e){return!!e&&"nullValue"in e}function z_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function G_(e){return!!e&&"mapValue"in e}function K_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return c_(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=K_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=K_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function H_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function W_(e){return"nullValue"in e?N_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?V_(C_.empty(),rb.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ow()}function Q_(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?V_(C_.empty(),rb.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?R_:Ow()}function J_(e,t){var n=L_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function X_(e,t){var n=L_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y_=function(){"use strict";function t(n){e(f)(this,t),this.value=n}return e(h)(t,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!G_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=K_(t)}},{key:"setAll",value:function(e){var t=this,n=nb.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=K_(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());G_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return D_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];G_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){c_(t,(function(t,n){return e[t]=n}));var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;delete e[s]}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"clone",value:function(){return new t(K_(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function $_(e){var t=[];return c_(e.fields,(function(e,n){var r=new nb([e]);if(G_(n)){var i=$_(n.mapValue).fields,a=!0,o=!1,u=void 0;if(0===i.length)t.push(r);else try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;t.push(r.child(l))}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}}else t.push(r)})),new m_(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Z_=function(){"use strict";function t(n,r,i,a,o,u,s){e(f)(this,t),this.key=n,this.documentType=r,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=s}return e(h)(t,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual($w.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Y_.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Y_.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$w.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,$w.min(),$w.min(),$w.min(),Y_.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r,i){return new t(e,1,n,$w.min(),r,i,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,$w.min(),$w.min(),Y_.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,$w.min(),$w.min(),Y_.empty(),2)}}]),t}(),ex=function t(n,r){"use strict";e(f)(this,t),this.position=n,this.inclusive=r};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?rb.comparator(rb.fromName(o.referenceValue),n.key):L_(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nx(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!D_(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rx=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";e(f)(this,t),this.field=n,this.dir=r};function ix(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ax=function t(){"use strict";e(f)(this,t)},ox=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this)).field=t,o.op=i,o.value=a,e($p)(o)}return e(h)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(L_(t,this.value)):null!==t&&O_(this.value)===O_(t)&&this.matchesComparison(L_(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ow()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new yx(e,t,n):"array-contains"===t?new wx(e,n):"in"===t?new bx(e,n):"not-in"===t?new _x(e,n):"array-contains-any"===t?new xx(e,n):new r(e,t,n)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new mx(e,n):new gx(e,n)}}]),r}(ax),ux=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).filters=t,a.op=i,a.lt=null,e($p)(a)}return e(h)(r,[{key:"matches",value:function(e){return sx(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getFlattenedFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e(o))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(ax);function sx(e){return"and"===e.op}function cx(e){return"or"===e.op}function lx(e){return fx(e)&&sx(e)}function fx(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value instanceof ux)return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}function hx(e){if(e instanceof ox)return e.field.canonicalString()+e.op.toString()+U_(e.value);if(lx(e))return e.filters.map((function(e){return hx(e)})).join(",");var t=e.filters.map((function(e){return hx(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function dx(e,t){return e instanceof ox?(n=e,(r=t)instanceof ox&&n.op===r.op&&n.field.isEqual(r.field)&&D_(n.value,r.value)):e instanceof ux?function(e,t){return t instanceof ux&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&dx(n,t.filters[r])}),!0)}(e,t):void Ow();var n,r}function vx(e,t){var n=e.filters.concat(t);return ux.create(n,e.op)}function px(e){return e instanceof ox?"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(U_(t.value)):e instanceof ux?function(e){return e.op.toString()+" {"+e.getFilters().map(px).join(" ,")+"}"}(e):"Filter";var t}var yx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this,t,i,a)).key=rb.fromName(a.referenceValue),e($p)(o)}return e(h)(r,[{key:"matches",value:function(e){var t=rb.comparator(e.key,this.key);return this.matchesComparison(t)}}]),r}(ox),mx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,"in",i)).keys=kx("in",i),e($p)(a)}return e(h)(r,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(ox),gx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,"not-in",i)).keys=kx("not-in",i),e($p)(a)}return e(h)(r,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(ox);function kx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rb.fromName(e.referenceValue)}))}var wx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"array-contains",i)}return e(h)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return j_(t)&&P_(t.arrayValue,this.value)}}]),r}(ox),bx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"in",i)}return e(h)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&P_(this.value.arrayValue,t)}}]),r}(ox),_x=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"not-in",i)}return e(h)(r,[{key:"matches",value:function(e){if(P_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!P_(this.value.arrayValue,t)}}]),r}(ox),xx=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){return e(f)(this,r),n.call(this,t,"array-contains-any",i)}return e(h)(r,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!j_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return P_(t.value.arrayValue,e)}))}}]),r}(ox),Ix=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e(f)(this,t),this.path=n,this.collectionGroup=r,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=s,this.dt=null};function Ex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ix(e,t,n,r,i,a,o)}function Tx(e){var t=Pw(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return hx(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Rb(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return U_(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return U_(e)})).join(",")),t.dt=n}return t.dt}function Sx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ix(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!dx(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nx(e.startAt,t.startAt)&&nx(e.endAt,t.endAt)}function Ax(e){return rb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cx(e,t){return e.filters.filter((function(e){return e instanceof ox&&e.field.isEqual(t)}))}function Rx(e,t,n){var r=N_,i=!0,a=!0,o=!1,u=void 0;try{for(var s,c=Cx(e,t)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=N_,h=!0;switch(l.op){case"<":case"<=":f=W_(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,h=!1;break;case"!=":case"not-in":f=N_}J_({value:r,inclusive:i},{value:f,inclusive:h})<0&&(r=f,i=h)}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(null!==n)for(var d=0;d<e.orderBy.length;++d)if(e.orderBy[d].field.isEqual(t)){var v=n.position[d];J_({value:r,inclusive:i},{value:v,inclusive:n.inclusive})<0&&(r=v,i=n.inclusive);break}return{value:r,inclusive:i}}function Nx(e,t,n){var r=R_,i=!0,a=!0,o=!1,u=void 0;try{for(var s,c=Cx(e,t)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=R_,h=!0;switch(l.op){case">=":case">":f=Q_(l.value),h=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,h=!1;break;case"!=":case"not-in":f=R_}X_({value:r,inclusive:i},{value:f,inclusive:h})>0&&(r=f,i=h)}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(null!==n)for(var d=0;d<e.orderBy.length;++d)if(e.orderBy[d].field.isEqual(t)){var v=n.position[d];X_({value:r,inclusive:i},{value:v,inclusive:n.inclusive})>0&&(r=v,i=n.inclusive);break}return{value:r,inclusive:i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ox=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(f)(this,t),this.path=n,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt};function Dx(e,t,n,r,i,a,o,u){return new Ox(e,t,n,r,i,a,o,u)}function Px(e){return new Ox(e)}function Lx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mx(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ux(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value.getFirstInequalityField();if(null!==o)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}function Fx(e){return null!==e.collectionGroup}function Vx(e){var t=Pw(e);if(null===t.wt){t.wt=[];var n=Ux(t),r=Mx(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new rx(n)),t.wt.push(new rx(nb.keyField(),"asc"));else{var i=!1,a=!0,o=!1,u=void 0;try{for(var s,c=t.explicitOrderBy[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;t.wt.push(l),l.field.isKeyField()&&(i=!0)}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(!i){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new rx(nb.keyField(),f))}}}return t.wt}function Bx(e){var t=Pw(e);if(!t._t)if("F"===t.limitType)t._t=Ex(t.path,t.collectionGroup,Vx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=Vx(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c="desc"===s.dir?"asc":"desc";n.push(new rx(s.field,c))}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var l=t.endAt?new ex(t.endAt.position,t.endAt.inclusive):null,f=t.startAt?new ex(t.startAt.position,t.startAt.inclusive):null;t._t=Ex(t.path,t.collectionGroup,n,t.filters,t.limit,l,f)}return t._t}function jx(e,t){t.getFirstInequalityField(),Ux(e);var n=e.filters.concat([t]);return new Ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qx(e,t,n){return new Ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zx(e,t){return Sx(Bx(e),Bx(t))&&e.limitType===t.limitType}function Gx(e){return"".concat(Tx(Bx(e)),"|lt:").concat(e.limitType)}function Kx(e){return"Query(target=".concat((t=Bx(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map((function(e){return px(e)})).join(", "),"]")),Rb(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map((function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t})).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return U_(e)})).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return U_(e)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(e.limitType,")");var t,n}function Hx(e,t){return t.isFoundDocument()&&(i=e,o=(a=t).key.path,null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):rb.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o))&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=Vx(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(!u.field.isKeyField()&&null===t.data.field(u.field))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(!a.value.matches(t))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){var r=tx(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,Vx(n),r)||n.endAt&&!function(e,t,n){var r=tx(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,Vx(n),r)));var n,r,i,a,o}function Wx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qx(e){return function(t,n){var r=!1,i=!0,a=!1,o=void 0;try{for(var u,s=Vx(e)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=Jx(c,t,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return 0}}function Jx(e,t,n){var r=e.field.isKeyField()?rb.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?L_(r,i):Ow()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ow()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xx=function(){"use strict";function t(n,r){e(f)(this,t),this.mapKeyFn=n,this.equalsFn=r,this.inner={},this.innerSize=0}return e(h)(t,[{key:"get",value:function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){var i=!0,a=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=e(Vt)(u.value,2),l=c[0],f=c[1];if(this.equalsFn(l,t))return f}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){c_(this.inner,(function(n,r){var i=!0,a=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=e(Vt)(u.value,2),l=c[0],f=c[1];t(l,f)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}))}},{key:"isEmpty",value:function(){return l_(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),Yx=new f_(rb.comparator);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return Yx}var Zx=new f_(rb.comparator);function eI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Zx,i=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;r=r.insert(c.key,c)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}function tI(e){var t=Zx;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function nI(){return iI()}function rI(){return iI()}function iI(){return new Xx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var aI=new f_(rb.comparator),oI=new v_(rb.comparator);function uI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=oI,i=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;r=r.add(c)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}var sI=new v_(Qw);function cI(){return sI}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nb(t)?"-0":t}}function fI(e){return{integerValue:""+e}}function hI(e,t){return Ob(t)?fI(t):lI(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dI=function t(){"use strict";e(f)(this,t),this._=void 0};function vI(e,t,n){return e instanceof mI?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&E_(i)&&(i=T_(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof gI?kI(e,t):e instanceof wI?bI(e,t):function(e,t){var n=yI(e,t),r=xI(n)+xI(e.gt);return B_(n)&&B_(e.gt)?fI(r):lI(e.serializer,r)}(e,t);var r,i,a}function pI(e,t,n){return e instanceof gI?kI(e,t):e instanceof wI?bI(e,t):n}function yI(e,t){var n,r;return e instanceof _I?B_(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null}var mI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return r}(dI),gI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).elements=t,e($p)(i)}return r}(dI);function kI(e,t){var n=II(t),r=!0,i=!1,a=void 0;try{for(var o,u=function(e,t){var r=t.value;n.some((function(e){return D_(e,r)}))||n.push(r)},s=e.elements[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u(0,o)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var wI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).elements=t,e($p)(i)}return r}(dI);function bI(e,t){var n=II(t),r=!0,i=!1,a=void 0;try{for(var o,u=function(e,t){var r=t.value;n=n.filter((function(e){return!D_(e,r)}))},s=e.elements[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u(0,o)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var _I=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).serializer=t,a.gt=i,e($p)(a)}return r}(dI);function xI(e){return x_(e.integerValue||e.doubleValue)}function II(e){return j_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EI=function t(n,r){"use strict";e(f)(this,t),this.field=n,this.transform=r};var TI=function t(n,r){"use strict";e(f)(this,t),this.version=n,this.transformResults=r},SI=function(){"use strict";function t(n,r){e(f)(this,t),this.updateTime=n,this.exists=r}return e(h)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function AI(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var CI=function t(){"use strict";e(f)(this,t)};function RI(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qI(e.key,SI.none()):new LI(e.key,e.data,SI.none());var n=e.data,r=Y_.empty(),i=new v_(nb.comparator),a=!0,o=!1,u=void 0;try{for(var s,c=t.fields[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return new MI(e.key,r,new m_(i.toArray()),SI.none())}function NI(e,t,n){var r;e instanceof LI?function(e,t,n){var r=e.value.clone(),i=FI(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof MI?function(e,t,n){if(AI(e.precondition,t)){var r=FI(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(UI(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function OI(e,t,n,r){return e instanceof LI?function(e,t,n,r){if(!AI(e.precondition,t))return n;var i=e.value.clone(),a=VI(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof MI?function(e,t,n,r){if(!AI(e.precondition,t))return n;var i=VI(e.fieldTransforms,r,t),a=t.data;return a.setAll(UI(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):(i=t,a=n,AI(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function DI(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,u=e.fieldTransforms[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=t.data.field(s.field),l=yI(s.transform,c||null);null!=l&&(null===n&&(n=Y_.empty()),n.set(s.field,l))}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n||null}function PI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Jw(n,r,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof gI&&r instanceof gI||n instanceof wI&&r instanceof wI?Jw(n.elements,r.elements,D_):n instanceof _I&&r instanceof _I?D_(n.gt,r.gt):n instanceof mI&&r instanceof mI);var n,r}(e,t)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}var LI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e(f)(this,r),(o=n.call(this)).key=t,o.value=i,o.precondition=a,o.fieldTransforms=u,o.type=0,e($p)(o)}return e(h)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(CI),MI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return e(f)(this,r),(u=n.call(this)).key=t,u.data=i,u.fieldMask=a,u.precondition=o,u.fieldTransforms=s,u.type=1,e($p)(u)}return e(h)(r,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),r}(CI);function UI(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function FI(e,t,n){var r=new Map;Dw(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,pI(o,u,n[i]))}return r}function VI(e,t,n){var r=new Map,i=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,vI(l,f,t))}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}var BI,jI,qI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=2,a.fieldTransforms=[],e($p)(a)}return e(h)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(CI),zI=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).key=t,a.precondition=i,a.type=3,a.fieldTransforms=[],e($p)(a)}return e(h)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(CI),GI=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.batchId=n,this.localWriteTime=r,this.baseMutations=i,this.mutations=a}return e(h)(t,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&NI(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.baseMutations[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u.key.isEqual(e.key)&&(t=OI(u,e,t,this.localWriteTime))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var s=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;d.key.isEqual(e.key)&&(t=OI(d,e,t,this.localWriteTime))}}catch(e){c=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw l}}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=rI();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=RI(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument($w.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),uI())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Jw(this.mutations,e.mutations,(function(e,t){return PI(e,t)}))&&Jw(this.baseMutations,e.baseMutations,(function(e,t){return PI(e,t)}))}}]),t}(),KI=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.batch=n,this.commitVersion=r,this.mutationResults=i,this.docVersions=a}return e(h)(t,null,[{key:"from",value:function(e,n,r){Dw(e.mutations.length===r.length);for(var i=aI,a=e.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new t(e,n,r,i)}}]),t}(),HI=function(){"use strict";function t(n,r){e(f)(this,t),this.largestBatchId=n,this.mutation=r}return e(h)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),WI=function t(n,r){"use strict";e(f)(this,t),this.count=n,this.unchangedNames=r};function QI(e){switch(e){default:return Ow();case Lw.CANCELLED:case Lw.UNKNOWN:case Lw.DEADLINE_EXCEEDED:case Lw.RESOURCE_EXHAUSTED:case Lw.INTERNAL:case Lw.UNAVAILABLE:case Lw.UNAUTHENTICATED:return!1;case Lw.INVALID_ARGUMENT:case Lw.NOT_FOUND:case Lw.ALREADY_EXISTS:case Lw.PERMISSION_DENIED:case Lw.FAILED_PRECONDITION:case Lw.ABORTED:case Lw.OUT_OF_RANGE:case Lw.UNIMPLEMENTED:case Lw.DATA_LOSS:return!0}}function JI(e){if(void 0===e)return Cw("GRPC error has no .code"),Lw.UNKNOWN;switch(e){case BI.OK:return Lw.OK;case BI.CANCELLED:return Lw.CANCELLED;case BI.UNKNOWN:return Lw.UNKNOWN;case BI.DEADLINE_EXCEEDED:return Lw.DEADLINE_EXCEEDED;case BI.RESOURCE_EXHAUSTED:return Lw.RESOURCE_EXHAUSTED;case BI.INTERNAL:return Lw.INTERNAL;case BI.UNAVAILABLE:return Lw.UNAVAILABLE;case BI.UNAUTHENTICATED:return Lw.UNAUTHENTICATED;case BI.INVALID_ARGUMENT:return Lw.INVALID_ARGUMENT;case BI.NOT_FOUND:return Lw.NOT_FOUND;case BI.ALREADY_EXISTS:return Lw.ALREADY_EXISTS;case BI.PERMISSION_DENIED:return Lw.PERMISSION_DENIED;case BI.FAILED_PRECONDITION:return Lw.FAILED_PRECONDITION;case BI.ABORTED:return Lw.ABORTED;case BI.OUT_OF_RANGE:return Lw.OUT_OF_RANGE;case BI.UNIMPLEMENTED:return Lw.UNIMPLEMENTED;case BI.DATA_LOSS:return Lw.DATA_LOSS;default:return Ow()}}(jI=BI||(BI={}))[jI.OK=0]="OK",jI[jI.CANCELLED=1]="CANCELLED",jI[jI.UNKNOWN=2]="UNKNOWN",jI[jI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jI[jI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jI[jI.NOT_FOUND=5]="NOT_FOUND",jI[jI.ALREADY_EXISTS=6]="ALREADY_EXISTS",jI[jI.PERMISSION_DENIED=7]="PERMISSION_DENIED",jI[jI.UNAUTHENTICATED=16]="UNAUTHENTICATED",jI[jI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jI[jI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jI[jI.ABORTED=10]="ABORTED",jI[jI.OUT_OF_RANGE=11]="OUT_OF_RANGE",jI[jI.UNIMPLEMENTED=12]="UNIMPLEMENTED",jI[jI.INTERNAL=13]="INTERNAL",jI[jI.UNAVAILABLE=14]="UNAVAILABLE",jI[jI.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var XI=function(){"use strict";function t(){e(f)(this,t),this.onExistenceFilterMismatchCallbacks=new Map}return e(h)(t,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return YI}},{key:"getOrCreateInstance",value:function(){return null===YI&&(YI=new t),YI}}]),t}(),YI=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $I(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZI=new _w([4294967295,4294967295],0);function eE(e){var t=$I().encode(e),n=new bw;return n.update(t),new Uint8Array(n.digest())}function tE(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new _w([n,r],0),new _w([i,a],0)]}var nE=function(){"use strict";function t(n,r,i){if(e(f)(this,t),this.bitmap=n,this.padding=r,this.hashCount=i,r<0||r>=8)throw new rE("Invalid padding: ".concat(r));if(i<0)throw new rE("Invalid hash count: ".concat(i));if(n.length>0&&0===this.hashCount)throw new rE("Invalid hash count: ".concat(i));if(0===n.length&&0!==r)throw new rE("Invalid padding when bitmap length is 0: ".concat(r));this.It=8*n.length-r,this.Tt=_w.fromNumber(this.It)}return e(h)(t,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(_w.fromNumber(n)));return 1===r.compare(ZI)&&(r=new _w([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(t){if(0===this.It)return!1;for(var n=eE(t),r=e(Vt)(tE(n),2),i=r[0],a=r[1],o=0;o<this.hashCount;o++){var u=this.Et(i,a,o);if(!this.At(u))return!1}return!0}},{key:"insert",value:function(t){if(0!==this.It)for(var n=eE(t),r=e(Vt)(tE(n),2),i=r[0],a=r[1],o=0;o<this.hashCount;o++){var u=this.Et(i,a,o);this.Rt(u)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(e,n,r){var i=e%8==0?0:8-e%8,a=new t(new Uint8Array(Math.ceil(e/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),t}(),rE=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){var t;return e(f)(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="BloomFilterError",e($p)(t)}return r}(e(Rr)(Error)),iE=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}return e(h)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n,r){var i=new Map;return i.set(e,aE.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t($w.min(),i,new f_(Qw),$x(),uI())}}]),t}(),aE=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.resumeToken=n,this.current=r,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}return e(h)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n,r){return new t(r,n,uI(),uI(),uI())}}]),t}(),oE=function t(n,r,i,a){"use strict";e(f)(this,t),this.Pt=n,this.removedTargetIds=r,this.key=i,this.bt=a},uE=function t(n,r){"use strict";e(f)(this,t),this.targetId=n,this.Vt=r},sE=function t(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w_.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e(f)(this,t),this.state=n,this.targetIds=r,this.resumeToken=i,this.cause=a},cE=function(){"use strict";function t(){e(f)(this,t),this.St=0,this.Dt=hE(),this.Ct=w_.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return e(h)(t,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=uI(),t=uI(),n=uI();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ow()}})),new aE(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=hE()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),t}(),lE=function(){"use strict";function t(n){e(f)(this,t),this.Gt=n,this.Qt=new Map,this.jt=$x(),this.zt=fE(),this.Wt=new f_(Qw)}return e(h)(t,[{key:"Ht",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.Pt[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.bt&&e.bt.isFoundDocument()?this.Jt(o,e.bt):this.Yt(o,e.key,e.bt)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var u=!0,s=!1,c=void 0;try{for(var l,f=e.removedTargetIds[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;this.Yt(h,e.key,e.bt)}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Ow()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Ax(a))if(0===r){var o=new rb(a.path);this.Yt(n,o,Z_.newNoDocument(o,$w.min()))}else Dw(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=XI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=I_(c).toUint8Array()}catch(e){if(e instanceof g_)return Rw("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new nE(a,f,d)}catch(e){return Rw(e instanceof rE?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Ax(a.target)){var o=new rb(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Z_.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=uI();this.zt.forEach((function(e,n){var i=t,a=!0;n.forEachWhile((function(e){var t=i.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new iE(e,n,this.Wt,this.jt,r);return this.jt=$x(),this.zt=fE(),this.Wt=new f_(Qw),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new cE,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new v_(Qw),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Aw("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new cE),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),t}();function fE(){return new f_(rb.comparator)}function hE(){return new f_(rb.comparator)}var dE={asc:"ASCENDING",desc:"DESCENDING"},vE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pE={and:"AND",or:"OR"},yE=function t(n,r){"use strict";e(f)(this,t),this.databaseId=n,this.useProto3Json=r};function mE(e,t){return e.useProto3Json||Rb(t)?t:{value:t}}function gE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wE(e,t){return gE(e,t.toTimestamp())}function bE(e){return Dw(!!e),$w.fromTimestamp((t=__(e),new Yw(t.seconds,t.nanos)));var t}function _E(e,t){return(n=e,new eb(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function xE(e){var t=eb.fromString(e);return Dw(zE(t)),t}function IE(e,t){return _E(e.databaseId,t.path)}function EE(e,t){var n=xE(t);if(n.get(1)!==e.databaseId.projectId)throw new Mw(Lw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mw(Lw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rb(CE(n))}function TE(e,t){return _E(e.databaseId,t)}function SE(e){var t=xE(e);return 4===t.length?eb.emptyPath():CE(t)}function AE(e){return new eb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function CE(e){return Dw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function RE(e,t,n){return{name:IE(e,t),fields:n.value.mapValue.fields}}function NE(e,t,n){var r=EE(e,t.name),i=bE(t.updateTime),a=t.createTime?bE(t.createTime):$w.min(),o=new Y_({mapValue:{fields:t.fields}}),u=Z_.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function OE(e,t){var n,r,i;if(t instanceof LI)n={update:RE(e,t.key,t.value)};else if(t instanceof qI)n={delete:IE(e,t.key)};else if(t instanceof MI)n={update:RE(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach((function(e){return i.push(e.canonicalString())})),{fieldPaths:i})};else{if(!(t instanceof zI))return Ow();n={verify:IE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof mI)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gI)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wI)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _I)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ow()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ow()}(e,t.precondition)),n}function DE(e,t){var n,r,i,a=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?SI.updateTime(bE(n.updateTime)):void 0!==n.exists?SI.exists(n.exists):SI.none():SI.none(),o=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Dw("REQUEST_TIME"===t.setToServerValue),n=new mI;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new gI(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new wI(i)}else"increment"in t?n=new _I(e,t.increment):Ow();var a=nb.fromServerFormat(t.fieldPath);return new EI(a,n)}(e,t)})):[];if(t.update){t.update.name;var u=EE(e,t.update.name),s=new Y_({mapValue:{fields:t.update.fields}});if(t.updateMask){var c=(r=t.updateMask,i=r.fieldPaths||[],new m_(i.map((function(e){return nb.fromServerFormat(e)}))));return new MI(u,s,c,a,o)}return new LI(u,s,a,o)}if(t.delete){var l=EE(e,t.delete);return new qI(l,a)}if(t.verify){var f=EE(e,t.verify);return new zI(f,a)}return Ow()}function PE(e,t){return{documents:[TE(e,t.path)]}}function LE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=TE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=TE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return qE(ux.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return{field:BE((t=e).field),direction:FE(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u,s=mE(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt={before:!(u=t.endAt).inclusive,values:u.position}),n}function ME(e){var t=SE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dw(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o,u,s=[];n.where&&(o=n.where,s=(u=UE(o))instanceof ux&&lx(u)?u.getFilters():[u]);var c=[];n.orderBy&&(c=n.orderBy.map((function(e){return new rx(jE((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var l=null;n.limit&&(l=function(e){var t;return Rb(t="object"==typeof e?e.value:e)?null:t}(n.limit));var f=null;n.startAt&&(f=function(e){var t=!!e.before,n=e.values||[];return new ex(n,t)}(n.startAt));var h=null;return n.endAt&&(h=function(e){var t=!e.before,n=e.values||[];return new ex(n,t)}(n.endAt)),Dx(t,i,c,s,l,"F",f,h)}function UE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jE(e.unaryFilter.field);return ox.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jE(e.unaryFilter.field);return ox.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jE(e.unaryFilter.field);return ox.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jE(e.unaryFilter.field);return ox.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ow()}}(e):void 0!==e.fieldFilter?(n=e,ox.create(jE(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ow()}}(n.fieldFilter.op),n.fieldFilter.value)):void 0!==e.compositeFilter?(t=e,ux.create(t.compositeFilter.filters.map((function(e){return UE(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ow()}}(t.compositeFilter.op))):Ow();var t,n}function FE(e){return dE[e]}function VE(e){return vE[e]}function BE(e){return{fieldPath:e.canonicalString()}}function jE(e){return nb.fromServerFormat(e.fieldPath)}function qE(e){return e instanceof ox?function(e){if("=="===e.op){if(z_(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NAN"}};if(q_(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(z_(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NOT_NAN"}};if(q_(e.value))return{unaryFilter:{field:BE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:BE(e.field),op:VE(e.op),value:e.value}}}(e):e instanceof ux?(r=(t=e).getFilters().map((function(e){return qE(e)})),1===r.length?r[0]:{compositeFilter:{op:(n=t.op,pE[n]),filters:r}}):Ow();var t,n,r}function zE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GE=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$w.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$w.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w_.EMPTY_BYTE_STRING,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(f)(this,t),this.target=n,this.targetId=r,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s,this.expectedCount=c}return e(h)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}},{key:"withExpectedCount",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}]),t}(),KE=function t(n){"use strict";e(f)(this,t),this.fe=n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(e,t){var n,r,i=t.key,a={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:WE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())a.document={name:IE(n=e.fe,(r=t).key),fields:r.data.value.mapValue.fields,updateTime:gE(n,r.version.toTimestamp()),createTime:gE(n,r.createTime.toTimestamp())};else if(t.isNoDocument())a.noDocument={path:i.path.toArray(),readTime:QE(t.version)};else{if(!t.isUnknownDocument())return Ow();a.unknownDocument={path:i.path.toArray(),version:QE(t.version)}}return a}function WE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function QE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function JE(e){var t=new Yw(e.seconds,e.nanoseconds);return $w.fromTimestamp(t)}function XE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return DE(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return DE(e.fe,t)})),u=Yw.fromMillis(t.localWriteTimeMs);return new GI(t.batchId,u,n,o)}function YE(e){var t,n,r=JE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?JE(e.lastLimboFreeSnapshotVersion):$w.min();return void 0!==e.query.documents?(Dw(1===(n=e.query).documents.length),t=Bx(Px(SE(n.documents[0])))):t=Bx(ME(e.query)),new GE(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,w_.fromBase64String(e.resumeToken))}function $E(e,t){var n,r=QE(t.snapshotVersion),i=QE(t.lastLimboFreeSnapshotVersion);n=Ax(t.target)?PE(e.fe,t.target):LE(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Tx(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ZE(e){var t=ME({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qx(t,t.limit,"L"):t}function eT(e,t){return new HI(t.largestBatchId,DE(e.fe,t.overlayMutation))}function tT(e,t){var n=t.path.lastSegment();return[e,Db(t.path.popLast()),n]}function nT(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:QE(r.readTime),documentKey:Db(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rT=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"getBundleMetadata",value:function(e,t){return iT(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:JE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){var n;return iT(e).put({bundleId:(n=t).id,createTime:QE(bE(n.createTime)),version:n.version})}},{key:"getNamedQuery",value:function(e,t){return aT(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ZE(t.bundledQuery),readTime:JE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return aT(e).put({name:(n=t).name,readTime:QE(bE(n.readTime)),bundledQuery:n.bundledQuery});var n}}]),t}();function iT(e){return u_(e,"bundles")}function aT(e){return u_(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oT=function(){"use strict";function t(n,r){e(f)(this,t),this.serializer=n,this.userId=r}return e(h)(t,[{key:"getOverlay",value:function(e,t){var n=this;return uT(e).get(tT(this.userId,t)).next((function(e){return e?eT(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=nI();return mb.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new HI(t,a);i.push(r.we(e,o))})),mb.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Db(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(uT(e).J("collectionPathOverlayIndex",i))})),mb.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=nI(),a=Db(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return uT(e).j("collectionPathOverlayIndex",o).next((function(e){var t=!0,n=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var s=o.value,c=eT(r.serializer,s);i.set(c.getKey(),c)}}catch(e){n=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw a}}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=nI(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uT(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=eT(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(t,n){return uT(t).put(function(t,n,r){var i=e(Vt)(tT(n,r.mutation.key),3);i[0];return{userId:n,collectionPath:i[1],documentId:i[2],collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:OE(t.fe,r.mutation)}}(this.serializer,this.userId,n))}}],[{key:"de",value:function(e,n){return new t(e,n.uid||"")}}]),t}();function uT(e){return u_(e,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sT=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(x_(e.integerValue));else if("doubleValue"in e){var n=x_(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Nb(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(I_(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?H_(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ow()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);var r=!0,i=!1,a=void 0;try{for(var o,u=Object.keys(n)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;this.Te(s,t),this.me(n[s],t)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;this.me(s,t)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),rb.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),t}();function cT(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function lT(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=cT(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}sT.Ve=new sT;var fT=function(){"use strict";function t(){e(f)(this,t),this.buffer=new Uint8Array(1024),this.position=0}return e(h)(t,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=o.charCodeAt(0);if(u<128)this.De(u);else if(u<2048)this.De(960|u>>>6),this.De(128|63&u);else if(o<"\ud800"||"\udbff"<o)this.De(480|u>>>12),this.De(128|63&u>>>6),this.De(128|63&u);else{var s=o.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.Ce()}},{key:"$e",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=o.charCodeAt(0);if(u<128)this.Ne(u);else if(u<2048)this.Ne(960|u>>>6),this.Ne(128|63&u);else if(o<"\ud800"||"\udbff"<o)this.Ne(480|u>>>12),this.Ne(128|63&u>>>6),this.Ne(128|63&u);else{var s=o.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=lT(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=lT(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t,n,r=(t=e,(n=new DataView(new ArrayBuffer(8))).setFloat64(0,t,!1),new Uint8Array(n.buffer)),i=0!=(128&r[0]);r[0]^=i?255:128;for(var a=1;a<r.length;++a)r[a]^=i?255:0;return r}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),t}(),hT=function(){"use strict";function t(n){e(f)(this,t),this.je=n}return e(h)(t,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),t}(),dT=function(){"use strict";function t(n){e(f)(this,t),this.je=n}return e(h)(t,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),t}(),vT=function(){"use strict";function t(){e(f)(this,t),this.je=new fT,this.ze=new hT(this.je),this.We=new dT(this.je)}return e(h)(t,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),t}(),pT=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.indexId=n,this.documentKey=r,this.arrayValue=i,this.directionalValue=a}return e(h)(t,[{key:"Je",value:function(){var e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}}]),t}();function yT(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=mT(e.arrayValue,t.arrayValue))?n:0!==(n=mT(e.directionalValue,t.directionalValue))?n:rb.comparator(e.documentKey,t.documentKey)}function mT(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gT=function(){"use strict";function t(n){e(f)(this,t),this.collectionId=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment(),this.Ye=n.orderBy,this.Xe=[];var r=!0,i=!1,a=void 0;try{for(var o,u=n.filters[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;s.isInequality()?this.Ze=s:this.Xe.push(s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}return e(h)(t,[{key:"tn",value:function(e){Dw(e.collectionGroup===this.collectionId);var t=ab(e);if(void 0!==t&&!this.en(t))return!1;for(var n=ob(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.Xe[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(this.nn(o,e))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),t}();
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(e){var t,n;if(Dw(e instanceof ox||e instanceof ux),e instanceof ox){if(e instanceof bx){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return ox.create(e.field,"==",t)})))||[];return ux.create(r,"or")}return e}var i=e.filters.map((function(e){return kT(e)}));return ux.create(i,e.op)}function wT(e){if(0===e.getFilters().length)return[];var t=IT(kT(e));return Dw(xT(t)),bT(t)||_T(t)?[t]:t.getFilters()}function bT(e){return e instanceof ox}function _T(e){return e instanceof ux&&lx(e)}function xT(e){return bT(e)||_T(e)||function(e){if(e instanceof ux&&cx(e)){var t=!0,n=!1,r=void 0;try{for(var i,a=e.getFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!bT(o)&&!_T(o))return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}return!1}(e)}function IT(e){if(Dw(e instanceof ox||e instanceof ux),e instanceof ox)return e;if(1===e.filters.length)return IT(e.filters[0]);var t=e.filters.map((function(e){return IT(e)})),n=ux.create(t,e.op);return xT(n=ST(n))?n:(Dw(n instanceof ux),Dw(sx(n)),Dw(n.filters.length>1),n.filters.reduce((function(e,t){return ET(e,t)})))}function ET(e,t){var n,r;return Dw(e instanceof ox||e instanceof ux),Dw(t instanceof ox||t instanceof ux),ST(e instanceof ox?t instanceof ox?(n=e,r=t,ux.create([n,r],"and")):TT(e,t):t instanceof ox?TT(t,e):function(e,t){if(Dw(e.filters.length>0&&t.filters.length>0),sx(e)&&sx(t))return vx(e,t.getFilters());var n=cx(e)?e:t,r=cx(e)?t:e,i=n.filters.map((function(e){return ET(e,r)}));return ux.create(i,"or")}(e,t))}function TT(e,t){if(sx(t))return vx(t,e.getFilters());var n=t.filters.map((function(t){return ET(e,t)}));return ux.create(n,"or")}function ST(t){if(Dw(t instanceof ox||t instanceof ux),t instanceof ox)return t;var n=t.getFilters();if(1===n.length)return ST(n[0]);if(fx(t))return t;var r=n.map((function(e){return ST(e)})),i=[];return r.forEach((function(n){var r;n instanceof ox?i.push(n):n instanceof ux&&(n.op===t.op?(r=i).push.apply(r,e(Kt)(n.filters)):i.push(n))})),1===i.length?i[0]:ux.create(i,t.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var AT=function(){"use strict";function t(){e(f)(this,t),this.rn=new CT}return e(h)(t,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),mb.resolve()}},{key:"getCollectionParents",value:function(e,t){return mb.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return mb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return mb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return mb.resolve(null)}},{key:"getIndexType",value:function(e,t){return mb.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return mb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return mb.resolve(null)}},{key:"getMinOffset",value:function(e,t){return mb.resolve(fb.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return mb.resolve(fb.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return mb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return mb.resolve()}}]),t}(),CT=function(){"use strict";function t(){e(f)(this,t),this.index={}}return e(h)(t,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new v_(eb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new v_(eb.comparator)).toArray()}}]),t}(),RT=new Uint8Array(0),NT=function(){"use strict";function t(n,r){e(f)(this,t),this.user=n,this.databaseId=r,this.on=new CT,this.un=new Xx((function(e){return Tx(e)}),(function(e,t){return Sx(e,t)})),this.uid=n.uid||""}return e(h)(t,[{key:"addToCollectionParentIndex",value:function(e,t){if(!this.on.has(t)){var n=this,r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Db(i)};return OT(e).put(a)}return mb.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Xw(t),""],!1,!0);return OT(e).j(r).next((function(e){var r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s.collectionId!==t)break;n.push(Mb(s.parent))}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}))}},{key:"addFieldIndex",value:function(e,t){var n,r=PT(e),i={indexId:(n=t).indexId,collectionGroup:n.collectionGroup,fields:n.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))};delete i.indexId;var a=r.add(i);if(t.indexState){var o=this,u=LT(e);return a.next((function(e){u.put(nT(e,o.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=PT(e),r=LT(e),i=DT(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=DT(e),i=!0,a=new Map;return mb.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=n,o=uI(),u=[];return mb.forEach(a,(function(n,i){var a;Aw("IndexedDbIndexManager","Using index ".concat((a=n,"id=".concat(a.indexId,"|cg=").concat(a.collectionGroup,"|f=").concat(a.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Tx(t)));var s=function(e,t){var n=ab(t);if(void 0===n)return null;var r=!0,i=!1,a=void 0;try{for(var o,u=Cx(e,n.fieldPath)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;switch(s.op){case"array-contains-any":return s.value.arrayValue.values||[];case"array-contains":return[s.value]}}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return null}(i,n),c=function(e,t){var n=new Map,r=!0,i=!1,a=void 0,o=!0,u=!1,s=void 0;try{for(var c,l=ob(t)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;try{for(var h,d=Cx(e,f.fieldPath)[Symbol.iterator]();!(r=(h=d.next()).done);r=!0){var v=h.value;switch(v.op){case"==":case"in":n.set(f.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return n.set(f.fieldPath.canonicalString(),v.value),Array.from(n.values())}}}catch(e){i=!0,a=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw a}}}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return null}(i,n),l=function(e,t){var n=[],r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=ob(t)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=0===c.kind?Rx(e,c.fieldPath,e.startAt):Nx(e,c.fieldPath,e.startAt);n.push(l.value),r&&(r=l.inclusive)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return new ex(n,r)}(i,n),f=function(e,t){var n=[],r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=ob(t)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=0===c.kind?Nx(e,c.fieldPath,e.endAt):Rx(e,c.fieldPath,e.endAt);n.push(l.value),r&&(r=l.inclusive)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return new ex(n,r)}(i,n),h=e.hn(n,i,l),d=e.hn(n,i,f),v=e.ln(n,i,c),p=e.fn(n.indexId,s,h,l.inclusive,d,f.inclusive,v);return mb.forEach(p,(function(e){return r.H(e,t.limit).next((function(e){e.forEach((function(e){var t=rb.fromSegments(e.documentKey);o.has(t)||(o=o.add(t),u.push(t))}))}))}))})).next((function(){return u}))}return mb.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wT(ux.create(e.filters,"and")).map((function(t){return Ex(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(t,n,r,i,a,o,u){for(var s=this,c=function(c){var l,d=s,v=n?s.dn(n[c/f]):RT,p=s.wn(t,v,r[c%f],i),y=s._n(t,v,a[c%f],o),m=u.map((function(e){return d.wn(t,v,e,!0)}));(l=h).push.apply(l,e(Kt)(s.createRange(p,y,m)))},l=(null!=n?n.length:1)*Math.max(r.length,a.length),f=l/(null!=n?n.length:1),h=[],d=0;d<l;++d)c(d);return h}},{key:"wn",value:function(e,t,n,r){var i=new pT(e,rb.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new pT(e,rb.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new gT(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=null,r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n.tn(s)&&(!t||s.fields.length>t.fields.length)&&(t=s)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return mb.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t=new v_(nb.comparator),n=!1,r=!0,i=!1,a=void 0,o=!0,u=!1,s=void 0;try{for(var c,l=e.filters[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;try{for(var h,d=f.getFlattenedFilters()[Symbol.iterator]();!(r=(h=d.next()).done);r=!0){var v=h.value;v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?n=!0:t=t.add(v.field))}}catch(e){i=!0,a=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw a}}}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}var p=!0,y=!1,m=void 0;try{for(var g,k=e.orderBy[Symbol.iterator]();!(p=(g=k.next()).done);p=!0){var w=g.value;w.field.isKeyField()||(t=t.add(w.field))}}catch(e){y=!0,m=e}finally{try{p||null==k.return||k.return()}finally{if(y)throw m}}return t.size+(n?1:0)}(t)&&(r=1):r=0}))})).next((function(){return null!==t.limit&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n=new vT,r=!0,i=!1,a=void 0;try{for(var o,u=ob(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=t.data.field(s.fieldPath);if(null==c)return null;var l=n.He(s.kind);sT.Ve._e(c,l)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.Qe()}},{key:"dn",value:function(e){var t=new vT;return sT.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n,r=new vT;return sT.Ve._e(V_(this.databaseId,t),r.He(0===(n=ob(e)).length?0:n[n.length-1].kind)),r.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new vT);var i=0,a=!0,o=!1,u=void 0;try{for(var s,c=ob(e)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=n[i++],h=!0,d=!1,v=void 0;try{for(var p,y=r[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var m=p.value;if(this.yn(t,l.fieldPath)&&j_(f))r=this.pn(r,l,f);else{var g=m.He(l.kind);sT.Ve._e(f,g)}}}catch(e){d=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(t,n,r){var i=e(Kt)(t),a=[],o=!0,u=!1,s=void 0,c=!0,l=!1,f=void 0;try{for(var h,d=(r.arrayValue.values||[])[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;try{for(var p,y=i[Symbol.iterator]();!(o=(p=y.next()).done);o=!0){var m=p.value,g=new vT;g.seed(m.Qe()),sT.Ve._e(v,g.He(n.kind)),a.push(g)}}catch(e){u=!0,s=e}finally{try{o||null==y.return||y.return()}finally{if(u)throw s}}}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ox&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(t,n){var r=this,i=PT(t),a=LT(t);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next((function(t){var n=r,i=[];return mb.forEach(t,(function(t){return a.get([t.indexId,n.uid]).next((function(n){var r,a,o,u;i.push((r=t,o=(a=n)?new sb(a.sequenceNumber,new fb(JE(a.readTime),new rb(Mb(a.documentKey)),a.largestBatchId)):sb.empty(),u=r.fields.map((function(t){var n=e(Vt)(t,2),r=n[0],i=n[1];return new ub(nb.fromServerFormat(r),i)})),new ib(r.indexId,r.collectionGroup,u,o)))}))})).next((function(){return i}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qw(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=PT(e),a=LT(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return mb.forEach(t,(function(t){return a.put(nT(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return mb.forEach(t,(function(t,i){var a=n,o=r.get(t.collectionGroup);return(o?mb.resolve(o):n.getFieldIndexes(e,t.collectionGroup)).next((function(n){return r.set(t.collectionGroup,n),mb.forEach(n,(function(n){return a.En(e,t,n).next((function(t){var r=a.An(i,n);return t.isEqual(r)?mb.resolve():a.vn(e,i,n,t,r)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return DT(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return DT(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=DT(e),i=new v_(yT);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new pT(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new v_(yT),r=this.mn(t,e);if(null==r)return n;var i=ab(t);if(null!=i){var a=e.data.field(i.fieldPath),o=!0,u=!1,s=void 0;if(j_(a))try{for(var c,l=(a.arrayValue.values||[])[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;n=n.add(new pT(t.indexId,e.key,this.dn(f),r))}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}}else n=n.add(new pT(t.indexId,e.key,RT,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Aw("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=y_(a),s=y_(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=y_(o)):l?(i(u),u=y_(a)):(u=y_(a),s=y_(o))}}(r,i,yT,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),mb.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return LT(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return yT(e,t)})).filter((function(e,t,n){return!t||0!==yT(e,n[t-1])}));var r=[];r.push(e);var i=!0,a=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=yT(c,e),f=yT(c,t);if(0===l)r[0]=e.Je();else if(l>0&&f<0)r.push(c),r.push(c.Je());else if(f>0)break}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}r.push(t);for(var h=[],d=0;d<r.length;d+=2){if(this.bn(r[d],r[d+1]))return[];var v=[r[d].indexId,this.uid,r[d].arrayValue,r[d].directionalValue,RT,[]],p=[r[d+1].indexId,this.uid,r[d+1].arrayValue,r[d+1].directionalValue,RT,[]];h.push(IDBKeyRange.bound(v,p))}return h}},{key:"bn",value:function(e,t){return yT(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(MT)}},{key:"getMinOffset",value:function(e,t){var n=this;return mb.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Ow()}))})).next(MT)}}]),t}();function OT(e){return u_(e,"collectionParents")}function DT(e){return u_(e,"indexEntries")}function PT(e){return u_(e,"indexConfiguration")}function LT(e){return u_(e,"indexState")}function MT(e){Dw(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;hb(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fb(t.readTime,t.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=function(){"use strict";function t(n,r,i){e(f)(this,t),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return e(h)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function VT(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Dw(1===u)})));var c=[],l=!0,f=!1,h=void 0;try{for(var d,v=n.mutations[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value,y=Vb(t,p.key.path,n.batchId);a.push(i.delete(y)),c.push(p.key)}}catch(e){f=!0,h=e}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}return mb.waitFor(a).next((function(){return c}))}function BT(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ow();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */FT.DEFAULT_COLLECTION_PERCENTILE=10,FT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,FT.DEFAULT=new FT(41943040,FT.DEFAULT_COLLECTION_PERCENTILE,FT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),FT.DISABLED=new FT(-1,0,0);var jT=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.userId=n,this.serializer=r,this.indexManager=i,this.referenceDelegate=a,this.Vn={}}return e(h)(t,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zT(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=GT(e),o=zT(e);return o.add({}).next((function(u){var s=i;Dw("number"==typeof u);var c=new GI(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return OE(e.fe,t)})),i=n.mutations.map((function(t){return OE(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new v_((function(e,t){return Qw(e.canonicalString(),t.canonicalString())})),d=!0,v=!1,p=void 0;try{for(var y,m=r[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value,k=Vb(i.userId,g.key.path,u);h=h.add(g.key.path.popLast()),f.push(o.put(l)),f.push(a.put(k,Bb))}}catch(e){v=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(v)throw p}}return h.forEach((function(t){f.push(s.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){s.Vn[u]=c.keys()})),mb.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return zT(e).get(t).next((function(e){return e?(Dw(e.userId===n.userId),XE(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?mb.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return zT(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Dw(t.batchId>=r),a=XE(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zT(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zT(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return XE(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,n){var r=this,i=Fb(this.userId,n.path),a=IDBKeyRange.lowerBound(i),o=[];return GT(t).X({range:a},(function(i,a,u){var s=r,c=e(Vt)(i,3),l=c[0],f=c[1],h=c[2],d=Mb(f);if(l===r.userId&&n.path.isEqual(d))return zT(t).get(h).next((function(e){if(!e)throw Ow();Dw(e.userId===s.userId),o.push(XE(s.serializer,e))}));u.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,n){var r=this,i=new v_(Qw),a=[];return n.forEach((function(n){var o=r,u=Fb(r.userId,n.path),s=IDBKeyRange.lowerBound(u),c=GT(t).X({range:s},(function(t,r,a){var u=e(Vt)(t,3),s=u[0],c=u[1],l=u[2],f=Mb(c);s===o.userId&&n.path.isEqual(f)?i=i.add(l):a.done()}));a.push(c)})),mb.waitFor(a).next((function(){return r.Dn(t,i)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,n){var r=this,i=n.path,a=i.length+1,o=Fb(this.userId,i),u=IDBKeyRange.lowerBound(o),s=new v_(Qw);return GT(t).X({range:u},(function(t,n,o){var u=e(Vt)(t,3),c=u[0],l=u[1],f=u[2],h=Mb(l);c===r.userId&&i.isPrefixOf(h)?h.length===a&&(s=s.add(f)):o.done()})).next((function(){return r.Dn(t,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){var a=n;i.push(zT(e).get(t).next((function(e){if(null===e)throw Ow();Dw(e.userId===a.userId),r.push(XE(a.serializer,e))})))})),mb.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return VT(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),mb.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){var r=t;if(!n)return mb.resolve();var i=IDBKeyRange.lowerBound([t.userId]),a=[];return GT(e).X({range:i},(function(e,t,n){if(e[0]===r.userId){var i=Mb(e[1]);a.push(i)}else n.done()})).next((function(){Dw(0===a.length)}))}))}},{key:"containsKey",value:function(e,t){return qT(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return KT(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(e,n,r,i){return Dw(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)}}]),t}();function qT(t,n,r){var i=Fb(n,r.path),a=i[1],o=IDBKeyRange.lowerBound(i),u=!1;return GT(t).X({range:o,Y:!0},(function(t,r,i){var o=e(Vt)(t,3),s=o[0],c=o[1];o[2];s===n&&c===a&&(u=!0),i.done()})).next((function(){return u}))}function zT(e){return u_(e,"mutations")}function GT(e){return u_(e,"documentMutations")}function KT(e){return u_(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HT=function(){"use strict";function t(n){e(f)(this,t),this.Nn=n}return e(h)(t,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new t(0)}},{key:"Mn",value:function(){return new t(-1)}}]),t}(),WT=function(){"use strict";function t(n,r){e(f)(this,t),this.referenceDelegate=n,this.serializer=r}return e(h)(t,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new HT(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return $w.fromTimestamp(new Yw(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return QT(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Dw(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return QT(e).X((function(o,u){var s=YE(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return mb.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return QT(e).X((function(e,n){var r=YE(n);t(r)}))}},{key:"$n",value:function(e){return JT(e).get("targetGlobalKey").next((function(e){return Dw(null!==e),e}))}},{key:"On",value:function(e,t){return JT(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return QT(e).put($E(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Tx(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return QT(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=YE(n);Sx(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=XT(e);return t.forEach((function(t){var o=Db(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),mb.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=XT(e);return mb.forEach(t,(function(t){var a=Db(t.path);return mb.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=XT(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=XT(e),i=uI();return r.X({range:n,Y:!0},(function(e,t,n){var r=Mb(e[1]),a=new rb(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(t,n){var r=Db(n.path),i=IDBKeyRange.bound([r],[Xw(r)],!1,!0),a=0;return XT(t).X({index:"documentTargetsIndex",Y:!0,range:i},(function(t,n,r){var i=e(Vt)(t,2),o=i[0];i[1];0!==o&&(a++,r.done())})).next((function(){return a>0}))}},{key:"le",value:function(e,t){return QT(e).get(t).next((function(e){return e?YE(e):null}))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(e){return u_(e,"targets")}function JT(e){return u_(e,"targetGlobal")}function XT(e){return u_(e,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,n){var r=e(Vt)(t,2),i=r[0],a=r[1],o=e(Vt)(n,2),u=o[0],s=o[1],c=Qw(i,u);return 0===c?Qw(a,s):c}var $T=function(){"use strict";function t(n){e(f)(this,t),this.Ln=n,this.buffer=new v_(YT),this.qn=0}return e(h)(t,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();YT(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),t}(),ZT=function(){"use strict";function t(n,r,i){e(f)(this,t),this.garbageCollector=n,this.asyncQueue=r,this.localStore=i,this.Gn=null}return e(h)(t,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(t){var n=this;Aw("LruGarbageCollector","Garbage collection scheduled in ".concat(t,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.Gn=null,e.prev=1,e.next=4,n.localStore.collectGarbage(n.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!_b(e.t0)){e.next=12;break}Aw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,pb(e.t0);case 14:return e.next=16,n.Qn(3e5);case 16:case"end":return e.stop()}}),t,null,[[1,6]])}))))}}]),t}(),eS=function(){"use strict";function t(n,r){e(f)(this,t),this.jn=n,this.params=r}return e(h)(t,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return mb.resolve(Cb.ct);var r=new $T(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Aw("LruGarbageCollector","Garbage collection skipped; disabled"),mb.resolve(UT)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Aw("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),UT):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Aw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Sw()<=Mi.DEBUG&&Aw("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),mb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),t}();function tS(e,t){return new eS(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nS=function(){"use strict";function t(n,r){e(f)(this,t),this.db=n,this.garbageCollector=tS(this,r)}return e(h)(t,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return rS(e,n)}},{key:"removeReference",value:function(e,t,n){return rS(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return rS(e,t)}},{key:"Xn",value:function(e,t){return r=t,i=!1,KT(n=e).Z((function(e){return qT(n,e,r).next((function(e){return e&&(i=!0),mb.resolve(!e)}))})).next((function(){return i}));var n,r,i}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,$w.min()),XT(e).delete([0,Db(o.path)])}))}));i.push(s)}})).next((function(){return mb.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return rS(e,t)}},{key:"Yn",value:function(t,n){var r,i=XT(t),a=Cb.ct;return i.X({index:"documentTargetsIndex"},(function(t,i){var o=e(Vt)(t,2),u=o[0],s=(o[1],i.path),c=i.sequenceNumber;0===u?(a!==Cb.ct&&n(new rb(Mb(r)),a),a=c,r=s):a=Cb.ct})).next((function(){a!==Cb.ct&&n(new rb(Mb(r)),a)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),t}();function rS(e,t){return XT(e).put((n=t,r=e.currentSequenceNumber,{targetId:0,path:Db(n.path),sequenceNumber:r}));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iS=function(){"use strict";function t(){e(f)(this,t),this.changes=new Xx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e(h)(t,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Z_.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),t}(),aS=function(){"use strict";function t(n){e(f)(this,t),this.serializer=n}return e(h)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return cS(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return cS(e).delete((r=n,[(i=t.path.toArray()).slice(0,i.length-2),i[i.length-2],WE(r),i[i.length-1]]));var r,i}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Z_.newInvalidDocument(t);return cS(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lS(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Z_.newInvalidDocument(t)};return cS(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lS(t))},(function(e,i){r={document:n.ts(t,i),size:BT(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=$x();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=$x(),i=new f_(rb.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,BT(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(t,n,r){if(n.isEmpty())return mb.resolve();var i=new v_(hS);n.forEach((function(e){return i=i.add(e)}));var a=IDBKeyRange.bound(lS(i.first()),lS(i.last())),o=i.getIterator(),u=o.getNext();return cS(t).X({index:"documentKeyIndex",range:a},(function(t,n,i){for(var a=rb.fromSegments(e(Kt)(n.prefixPath).concat([n.collectionGroup,n.documentId]));u&&hS(u,a)<0;)r(u,null),u=o.getNext();u&&u.isEqual(a)&&(r(u,n),u=o.hasNext()?o.getNext():null),u?i.G(lS(u)):i.done()})).next((function(){for(;u;)r(u,null),u=o.hasNext()?o.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),WE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cS(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n=$x(),a=!0,o=!1,u=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=i.ts(rb.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);f.isFoundDocument()&&(Hx(t,f)||r.has(f.key))&&(n=n.insert(f.key,f))}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=$x(),o=fS(t,n),u=fS(t,fb.max());return cS(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(rb.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new uS(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return sS(e).get("remoteDocumentGlobalKey").next((function(e){return Dw(!!e),e}))}},{key:"Zn",value:function(e,t){return sS(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n,r,i;if(t.document)n=NE(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var a=rb.fromSegments(t.noDocument.path),o=JE(t.noDocument.readTime);n=Z_.newNoDocument(a,o),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ow();var u=rb.fromSegments(t.unknownDocument.path),s=JE(t.unknownDocument.version);n=Z_.newUnknownDocument(u,s)}return t.readTime&&n.setReadTime((r=t.readTime,i=new Yw(r[0],r[1]),$w.fromTimestamp(i))),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual($w.min()))return n}return Z_.newInvalidDocument(e)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(e){return new aS(e)}var uS=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).os=t,a.trackRemovals=i,a.us=new Xx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),e($p)(a)}return e(h)(r,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new v_((function(e,t){return Qw(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=HE(t.os.serializer,o);i=i.add(a.path.popLast());var c=BT(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=HE(t.os.serializer,o.convertToNoDocument($w.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),mb.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),r}(iS);function sS(e){return u_(e,"remoteDocumentGlobal")}function cS(e){return u_(e,"remoteDocumentsV14")}function lS(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fS(e,t){var n=t.documentKey.path.toArray();return[e,WE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hS(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Qw(n[a],r[a]))return i;return(i=Qw(n.length,r.length))||((i=Qw(n[n.length-2],r[r.length-2]))||Qw(n[n.length-1],r[r.length-1]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dS=function t(n,r){"use strict";e(f)(this,t),this.overlayedDocument=n,this.mutatedFields=r},vS=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.remoteDocumentCache=n,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=a}return e(h)(t,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&OI(r.mutation,e,m_.empty(),Yw.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,uI()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uI(),r=this,i=nI();return this.populateOverlays(e,i,t).next((function(){return r.computeViews(e,t,i,n).next((function(e){var t=eI();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=nI();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,uI())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=$x(),a=iI(),o=iI();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof MI)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),OI(o.mutation,t,o.mutation.getFieldMask(),Yw.now())):a.set(t.key,m_.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new dS(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=iI(),i=new f_((function(e,t){return e-t})),a=uI();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n=!0,a=!1,o=void 0;try{for(var u,s=function(e,n){var a=n.value;a.keys().forEach((function(e){var n=t.get(e);if(null!==n){var o=r.get(e)||m_.empty();o=a.applyToLocalView(n,o),r.set(e,o);var u=(i.get(a.batchId)||uI()).add(e);i=i.insert(a.batchId,u)}}))},c=e[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)s(0,u)}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}})).next((function(){for(var o=[],u=i.getReverseIterator();u.hasNext();){var s=u.getNext(),c=s.key,l=s.value,f=rI();l.forEach((function(e){if(!a.has(e)){var n=RI(t.get(e),r.get(e));null!==n&&f.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,c,f))}return mb.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return r=t,rb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n);var r}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=i,u=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):mb.resolve(nI()),s=-1,c=a;return u.next((function(t){return mb.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?mb.resolve():o.remoteDocumentCache.getEntry(e,t).next((function(e){c=c.insert(t,e)}))})).next((function(){return o.populateOverlays(e,t,a)})).next((function(){return o.computeViews(e,c,t,uI())})).next((function(e){return{batchId:s,changes:tI(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new rb(t)).next((function(e){var t=eI();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=eI();return this.indexManager.getCollectionParents(e,i).next((function(o){return mb.forEach(o,(function(o){var u,s,c=(u=t,s=o.child(i),new Ox(s,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return r.getDocumentsMatchingCollectionQuery(e,c,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Z_.newInvalidDocument(r)))}));var n=eI();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&OI(a.mutation,i,m_.empty(),Yw.now()),Hx(t,i)&&(n=n.insert(e,i))})),n}))}}]),t}(),pS=function(){"use strict";function t(n){e(f)(this,t),this.serializer=n,this.cs=new Map,this.hs=new Map}return e(h)(t,[{key:"getBundleMetadata",value:function(e,t){return mb.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:bE(n.createTime)}),mb.resolve()}},{key:"getNamedQuery",value:function(e,t){return mb.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,{name:(n=t).name,query:ZE(n.bundledQuery),readTime:bE(n.readTime)}),mb.resolve();var n}}]),t}(),yS=function(){"use strict";function t(){e(f)(this,t),this.overlays=new f_(rb.comparator),this.ls=new Map}return e(h)(t,[{key:"getOverlay",value:function(e,t){return mb.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=nI();return mb.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),mb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),mb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=nI(),i=t.length+1,a=new rb(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return mb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new f_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=nI(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=nI(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return mb.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new HI(t,n));var a=this.ls.get(t);void 0===a&&(a=uI(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),t}(),mS=function(){"use strict";function t(){e(f)(this,t),this.fs=new v_(gS.ds),this.ws=new v_(gS._s)}return e(h)(t,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new gS(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new gS(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new rb(new eb([])),r=new gS(n,e),i=new gS(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new rb(new eb([])),n=new gS(t,e),r=new gS(t,e+1),i=uI();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new gS(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),t}(),gS=function(){"use strict";function t(n,r){e(f)(this,t),this.key=n,this.As=r}return e(h)(t,null,[{key:"ds",value:function(e,t){return rb.comparator(e.key,t.key)||Qw(e.As,t.As)}},{key:"_s",value:function(e,t){return Qw(e.As,t.As)||rb.comparator(e.key,t.key)}}]),t}(),kS=function(){"use strict";function t(n,r){e(f)(this,t),this.indexManager=n,this.referenceDelegate=r,this.mutationQueue=[],this.vs=1,this.Rs=new v_(gS.ds)}return e(h)(t,[{key:"checkEmpty",value:function(e){return mb.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new GI(i,t,n,r);this.mutationQueue.push(a);var o=!0,u=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this.Rs=this.Rs.add(new gS(f.key,i)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return mb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return mb.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return mb.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return mb.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return mb.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new gS(t,0),i=new gS(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),mb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new v_(Qw);return t.forEach((function(e){var t=new gS(e,0),i=new gS(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),mb.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;rb.isDocumentKey(i)||(i=i.child(""));var a=new gS(new rb(i),0),o=new v_(Qw);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),mb.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Dw(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return mb.forEach(t.mutations,(function(i){var a=new gS(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new gS(t,0),r=this.Rs.firstAfterOrEqual(n);return mb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,mb.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),t}(),wS=function(){"use strict";function t(n){e(f)(this,t),this.Ds=n,this.docs=new f_(rb.comparator),this.size=0}return e(h)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return mb.resolve(n?n.document.mutableCopy():Z_.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=$x();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Z_.newInvalidDocument(e))})),mb.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=$x(),a=t.path,o=new rb(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hb(lb(l),n)<=0||(r.has(l.key)||Hx(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return mb.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ow()}},{key:"Cs",value:function(e,t){return mb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new bS(this)}},{key:"getSize",value:function(e){return mb.resolve(this.size)}}]),t}(),bS=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).os=t,e($p)(i)}return e(h)(r,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),mb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),r}(iS),_S=function(){"use strict";function t(n){e(f)(this,t),this.persistence=n,this.xs=new Xx((function(e){return Tx(e)}),Sx),this.lastRemoteSnapshotVersion=$w.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mS,this.targetCount=0,this.Ms=HT.kn()}return e(h)(t,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),mb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return mb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return mb.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),mb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),mb.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new HT(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,mb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),mb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,mb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),mb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return mb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return mb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),mb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),mb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),mb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return mb.resolve(n)}},{key:"containsKey",value:function(e,t){return mb.resolve(this.ks.containsKey(t))}}]),t}(),xS=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this.$s={},this.overlays={},this.Os=new Cb(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=n(this),this.Bs=new _S(this),this.indexManager=new AT,this.remoteDocumentCache=new wS((function(e){return i.referenceDelegate.Ls(e)})),this.serializer=new KE(r),this.qs=new pS(this.serializer)}return e(h)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new yS,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new kS(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Aw("MemoryPersistence","Starting transaction:",e);var i=new IS(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return mb.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),t}(),IS=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).currentSequenceNumber=t,e($p)(i)}return r}(vb),ES=function(){"use strict";function t(n){e(f)(this,t),this.persistence=n,this.Qs=new mS,this.js=null}return e(h)(t,[{key:"Ws",get:function(){if(this.js)return this.js;throw Ow()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),mb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),mb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),mb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){var t=n;e.forEach((function(e){return t.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mb.forEach(this.Ws,(function(r){var i=rb.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,$w.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return mb.or([function(){return mb.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(e){return new t(e)}}]),t}(),TS=function(){"use strict";function t(n){e(f)(this,t),this.serializer=n}return e(h)(t,[{key:"O",value:function(e,t,n,r){var i=this,a=new gb("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore("owner"),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ub,{unique:!0}),e.createObjectStore("documentMutations")}(e),SS(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=mb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),SS(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$w.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return t=e,(n=a).store("mutations").j().next((function(e){t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ub,{unique:!0});var r=n.store("mutations"),i=e.map((function(e){return r.put(e)}));return mb.waitFor(i)}));var t,n}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:$b});t.createIndex("collectionPathOverlayIndex",Zb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",e_,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:jb});t.createIndex("documentKeyIndex",qb),t.createIndex("collectionGroupIndex",zb)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qb}).createIndex("sequenceNumberIndex",Jb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Xb}).createIndex("documentKeyIndex",Yb,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=BT(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return mb.forEach(n,(function(n){var i=t,a=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next((function(t){return mb.forEach(t,(function(t){Dw(t.userId===n.userId);var r=XE(i.serializer,t);return VT(e,n.userId,r).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new eb(n),o=[0,Db(a)];r.push(t.get(o).next((function(n){return n?mb.resolve():(r=a,t.put({targetId:0,path:Db(r),sequenceNumber:e.highestListenSequenceNumber}));var r})))})).next((function(){return mb.waitFor(r)}))}))}},{key:"ti",value:function(t,n){t.createObjectStore("collectionParents",{keyPath:Wb});var r=n.store("collectionParents"),i=new CT,a=function(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Db(n)})}};return n.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new eb(e);return a(n.popLast())})).next((function(){return n.store("documentMutations").X({Y:!0},(function(t,n){var r=e(Vt)(t,3),i=(r[0],r[1]),o=(r[2],Mb(i));return a(o.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=YE(r),a=$E(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new rb(eb.fromString(i.document.name).popFirst(5)):i.noDocument?rb.fromSegments(i.noDocument.path):i.unknownDocument?rb.fromSegments(i.unknownDocument.path):Ow()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return mb.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=oS(this.serializer),a=new xS(ES.zs,this.serializer.fe);return r.j().next((function(e){var r=n,o=new Map;return e.forEach((function(e){var t,n=null!==(t=o.get(e.userId))&&void 0!==t?t:uI();XE(r.serializer,e).keys().forEach((function(e){return n=n.add(e)})),o.set(e.userId,n)})),mb.forEach(o,(function(e,n){var o=new Iw(n),u=oT.de(r.serializer,o),s=a.getIndexManager(o),c=jT.de(o,r.serializer,s,a.referenceDelegate);return new vS(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new o_(t,Cb.ct),e).next()}))}))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(e){e.createObjectStore("targetDocuments",{keyPath:Kb}).createIndex("documentTargetsIndex",Hb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gb,{unique:!0}),e.createObjectStore("targetGlobal")}var AS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CS=function(){"use strict";function t(n,r,i,a,o,u,s,c,l,h){var d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(e(f)(this,t),this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=i,this.ii=o,this.window=u,this.document=s,this.ri=l,this.oi=h,this.ui=d,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!t.D())throw new Mw(Lw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nS(this,a),this.di=r+"main",this.serializer=new KE(c),this.wi=new kb(this.di,this.ui,new TS(this.serializer)),this.Bs=new WT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oS(this.serializer),this.qs=new rT,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===h&&Cw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e(h)(t,[{key:"start",value:function(){var e=this;return this.mi().then((function(){var t=e;if(!e.isPrimary&&!e.allowTabSynchronization)throw new Mw(Lw.FAILED_PRECONDITION,AS);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Bs.getHighestSequenceNumber(e)}))})).then((function(t){e.Os=new Cb(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(t){var n=this;return this.fi=function(){var r=e(u)(e(c).mark((function r(i){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.started){e.next=2;break}return e.abrupt("return",t(i));case 2:case"end":return e.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(t){this.wi.B(function(){var n=e(u)(e(c).mark((function n(r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===r.newVersion,!e.t0){e.next=4;break}return e.next=4,t();case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.started,!e.t0){e.next=4;break}return e.next=4,n.mi();case 4:case"end":return e.stop()}}),t)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return NS(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){var n=e;if(e.isPrimary)return e.Ti(t).next((function(e){var t=n;e||(n.isPrimary=!1,n.ii.enqueueRetryable((function(){return t.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(_b(t))return Aw("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Aw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){var n=e;e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return n.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return RS(e).get("owner").next((function(e){return mb.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return NS(e).delete(this.clientId)}},{key:"bi",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isPrimary||t.Vi(t.li,18e5)){e.next=23;break}return t.li=Date.now(),e.next=4,t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=u_(e,"clientMetadata");return n.j().next((function(e){var r=t.Si(e,18e5),i=e.filter((function(e){return-1===r.indexOf(e)}));return mb.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}));case 4:if(r=e.sent,i=!0,a=!1,o=void 0,!t._i){e.next=23;break}for(e.prev=7,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)l=s.value,t._i.removeItem(t.Di(l.clientId));e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),a=!0,o=e.t0;case 15:e.prev=15,e.prev=16,i||null==u.return||u.return();case 18:if(e.prev=18,!a){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:case"end":return e.stop()}}),n,null,[[7,11,15,23],[16,,18,22]])})))()}},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?mb.resolve(!0):RS(e).get("owner").next((function(n){var r=t;if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Mw(Lw.FAILED_PRECONDITION,AS);return!1}}return!(!t.networkEnabled||!t.inForeground)||NS(e).j().next((function(e){return void 0===r.Si(e,5e3).find((function(e){if(r.clientId!==e.clientId){var t=!r.networkEnabled&&e.networkEnabled,n=!r.inForeground&&e.inForeground,i=r.networkEnabled===e.networkEnabled;if(t||n&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Aw("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),e.next=7,t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new o_(e,Cb.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:t.wi.close(),t.Mi();case 9:case"end":return e.stop()}}),n)})))()}},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return NS(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return jT.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new NT(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return oT.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Aw("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?a_:14===i?i_:13===i?r_:12===i?n_:11===i?t_:void Ow();return this.wi.runTransaction(e,o,u,(function(i){return a=new o_(i,r.Os?r.Os.next():Cb.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){var i=r;if(!t)throw Cw("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return i.fi(!1)})),new Mw(Lw.FAILED_PRECONDITION,db);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return RS(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Mw(Lw.FAILED_PRECONDITION,AS)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return RS(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=RS(e);return n.get("owner").next((function(e){return t.Ri(e)?(Aw("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):mb.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Cw("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){var t=e;e.ii.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){var e=t;t.xi();var n=/(?:Version|Mobile)\/1[456]/;!fi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Aw("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Cw("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Cw("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return kb.D()}}]),t}();function RS(e){return u_(e,"owner")}function NS(e){return u_(e,"clientMetadata")}function OS(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var DS=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.targetId=n,this.fromCache=r,this.Fi=i,this.Bi=a}return e(h)(t,null,[{key:"Li",value:function(e,n){var r=uI(),i=uI(),a=!0,o=!1,u=void 0;try{for(var s,c=n.docChanges[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return new t(e,n.fromCache,r,i)}}]),t}(),PS=function(){"use strict";function t(){e(f)(this,t),this.qi=!1}return e(h)(t,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(t,n){var r=this;if(Lx(n))return mb.resolve(null);var i=Bx(n);return this.indexManager.getIndexType(t,i).next((function(a){return 0===a?null:(null!==n.limit&&1===a&&(n=qx(n,null,"F"),i=Bx(n)),r.indexManager.getDocumentsMatchingTarget(t,i).next((function(a){var o=r,u=uI.apply(void 0,e(Kt)(a));return r.Ui.getDocuments(t,u).next((function(e){return o.indexManager.getMinOffset(t,i).next((function(r){var i=o.ji(n,e);return o.zi(n,i,u,r.readTime)?o.Ki(t,qx(n,null,"F")):o.Wi(t,i,n,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Lx(t)||r.isEqual($w.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Sw()<=Mi.DEBUG&&Aw("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kx(t)),i.Wi(e,o,t,cb(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new v_(Qx(e));return t.forEach((function(t,r){Hx(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Sw()<=Mi.DEBUG&&Aw("QueryEngine","Using full collection scan to execute query:",Kx(t)),this.Ui.getDocumentsMatchingQuery(e,t,fb.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),t}(),LS=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.persistence=n,this.Hi=r,this.serializer=a,this.Ji=new f_(Qw),this.Yi=new Xx((function(e){return Tx(e)}),Sx),this.Xi=new Map,this.Zi=n.getRemoteDocumentCache(),this.Bs=n.getTargetCache(),this.qs=n.getBundleCache(),this.tr(i)}return e(h)(t,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vS(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(e,t,n,r){return new LS(e,t,n,r)}function US(e,t){return FS.apply(this,arguments)}function FS(){return(FS=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(n){return t=n,i.tr(r),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r=[],a=[],o=uI(),u=!0,s=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;r.push(h.batchId);var d=!0,v=!1,p=void 0;try{for(var y,m=h.mutations[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value;o=o.add(g.key)}}catch(e){v=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(v)throw p}}}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}var k=!0,w=!1,b=void 0;try{for(var _,x=n[Symbol.iterator]();!(k=(_=x.next()).done);k=!0){var I=_.value;a.push(I.batchId);var E=!0,T=!1,S=void 0;try{for(var A,C=I.mutations[Symbol.iterator]();!(E=(A=C.next()).done);E=!0){var R=A.value;o=o.add(R.key)}}catch(e){T=!0,S=e}finally{try{E||null==C.return||C.return()}finally{if(T)throw S}}}}catch(e){w=!0,b=e}finally{try{k||null==x.return||x.return()}finally{if(w)throw b}}return i.localDocuments.getDocuments(e,o).next((function(e){return{er:e,removedBatchIds:r,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function VS(e,t){var n=Pw(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=mb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Dw(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=uI(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function BS(e){var t=Pw(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function jS(e,t){var n=Pw(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c,l,f,h=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?h=h.withResumeToken(w_.EMPTY_BYTE_STRING,$w.min()).withLastLimboFreeSnapshotVersion($w.min()):a.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(a.resumeToken,r)),i=i.insert(u,h),l=h,f=a,(0===(c=s).resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0)&&o.push(n.Bs.updateTargetData(e,h))}}));var u=$x(),s=uI();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(qS(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual($w.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return mb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function qS(e,t,n){var r=uI(),i=uI();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=$x();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual($w.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Aw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function zS(e,t){var n=Pw(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function GS(e,t){var n=Pw(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,mb.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new GE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function KS(e,t,n){return HS.apply(this,arguments)}function HS(){return(HS=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Pw(n),o=a.Ji.get(r),u=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",u,(function(e){return a.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_b(e.t1)){e.next=12;break}throw e.t1;case 12:Aw("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(e.t1));case 13:a.Ji=a.Ji.remove(r),a.Yi.delete(o.target);case 14:case"end":return e.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function WS(e,t,n){var r=Pw(e),i=$w.min(),a=uI();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Pw(e),i=r.Yi.get(n);return void 0!==i?mb.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Bx(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:$w.min(),n?a:uI())})).next((function(e){return XS(r,Wx(t),e),{documents:e,ir:a}}))}))}function QS(e,t){var n=Pw(e),r=Pw(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function JS(e,t){var n=Pw(e),r=n.Xi.get(t)||$w.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,cb(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return XS(n,t,e),e}))}function XS(e,t,n){var r=e.Xi.get(t)||$w.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function YS(e,t,n,r){return $S.apply(this,arguments)}function $S(){return($S=e(u)(e(c).mark((function t(n,r,i,a){var o,u,s,l,f,h,d,v,p,y,m,g,k;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=Pw(n),u=uI(),s=$x(),l=!0,f=!1,h=void 0,e.prev=3,d=i[Symbol.iterator]();!(l=(v=d.next()).done);l=!0)p=v.value,y=r.rr(p.metadata.name),p.document&&(u=u.add(y)),(m=r.ur(p)).setReadTime(r.cr(p.metadata.readTime)),s=s.insert(y,m);e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),f=!0,h=e.t0;case 11:e.prev=11,e.prev=12,l||null==d.return||d.return();case 14:if(e.prev=14,!f){e.next=17;break}throw h;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return g=o.Zi.newChangeBuffer({trackRemovals:!0}),e.next=22,GS(o,(t=a,Bx(Px(eb.fromString("__bundle__/docs/".concat(t))))));case 22:return k=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return qS(e,g,s).next((function(t){return g.apply(e),t})).next((function(t){return o.Bs.removeMatchingKeysForTargetId(e,k.targetId).next((function(){return o.Bs.addMatchingKeys(e,u,k.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 24:case"end":return e.stop()}var t}),t,null,[[3,7,11,19],[12,,14,18]])})))).apply(this,arguments)}function ZS(e,t){return eA.apply(this,arguments)}function eA(){return eA=e(u)(e(c).mark((function t(n,r){var i,a,o,u=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:uI(),e.next=3,GS(n,Bx(ZE(r.bundledQuery)));case 3:return a=e.sent,o=Pw(n),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=bE(r.readTime);if(a.snapshotVersion.compareTo(t)>=0)return o.qs.saveNamedQuery(e,r);var n=a.withResumeToken(w_.EMPTY_BYTE_STRING,t);return o.Ji=o.Ji.insert(n.targetId,n),o.Bs.updateTargetData(e,n).next((function(){return o.Bs.removeMatchingKeysForTargetId(e,a.targetId)})).next((function(){return o.Bs.addMatchingKeys(e,i,a.targetId)})).next((function(){return o.qs.saveNamedQuery(e,r)}))})));case 6:case"end":return e.stop()}}),t)}))),eA.apply(this,arguments)}function tA(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function nA(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function rA(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var iA=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this.user=n,this.batchId=r,this.state=i,this.error=a}return e(h)(t,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(e,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Mw(a.error.code,a.error.message))),o?new t(e,n,a.state,i):(Cw("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),t}(),aA=function(){"use strict";function t(n,r,i){e(f)(this,t),this.targetId=n,this.state=r,this.error=i}return e(h)(t,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(e,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mw(i.error.code,i.error.message))),a?new t(e,i.state,r):(Cw("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(n)),null)}}]),t}(),oA=function(){"use strict";function t(n,r){e(f)(this,t),this.clientId=n,this.activeTargetIds=r}return e(h)(t,null,[{key:"ar",value:function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=cI(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ob(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new t(e,a):(Cw("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(n)),null)}}]),t}(),uA=function(){"use strict";function t(n,r){e(f)(this,t),this.clientId=n,this.onlineState=r}return e(h)(t,null,[{key:"ar",value:function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Cw("SharedClientState","Failed to parse online state: ".concat(e)),null)}}]),t}(),sA=function(){"use strict";function t(){e(f)(this,t),this.activeTargetIds=cI()}return e(h)(t,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),t}(),cA=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.window=n,this.ii=r,this.persistenceKey=i,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new f_(Qw),this.started=!1,this.yr=[];var u,s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=tA(this.persistenceKey,this.wr),this.Ir=(u=this.persistenceKey,"firestore_sequence_number_".concat(u)),this.gr=this.gr.insert(this.wr,new sA),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return e(h)(t,[{key:"start",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o,u,s,l,f,h,d,v,p,y,m,g,k,w;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.syncEngine.$i();case 2:r=e.sent,i=!0,a=!1,o=void 0,e.prev=4,u=r[Symbol.iterator]();case 6:if(i=(s=u.next()).done){e.next=15;break}if((l=s.value)!==t.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(f=t.getItem(tA(t.persistenceKey,l)))&&(h=oA.ar(l,f))&&(t.gr=t.gr.insert(h.clientId,h));case 12:i=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),a=!0,o=e.t0;case 21:e.prev=21,e.prev=22,i||null==u.return||u.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(t.Pr(),(d=t.storage.getItem(t.vr))&&(v=t.br(d))&&t.Vr(v),p=!0,y=!1,m=void 0,e.prev=33,g=t.yr[Symbol.iterator]();!(p=(k=g.next()).done);p=!0)w=k.value,t.mr(w);e.next=41;break;case 37:e.prev=37,e.t1=e.catch(33),y=!0,m=e.t1;case 41:e.prev=41,e.prev=42,p||null==g.return||g.return();case 44:if(e.prev=44,!y){e.next=47;break}throw m;case 47:return e.finish(44);case 48:return e.finish(41);case 49:t.yr=[],t.window.addEventListener("pagehide",(function(){return t.shutdown()})),t.started=!0;case 50:case"end":return e.stop()}}),n,null,[[4,17,21,29],[22,,24,28],[33,37,41,49],[42,,44,48]])})))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(rA(this.persistenceKey,e));if(n){var r=aA.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(rA(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Aw("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Aw("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Aw("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(t){var n=t;if(n.storageArea===this.storage){if(Aw("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Cw("Received WebStorage notification for local change. Another client might have garbage-collected our state");var r=this;this.ii.enqueueRetryable(e(u)(e(c).mark((function t(){var i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.started){e.next=42;break}if(null===n.key){e.next=40;break}if(!r.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return i=r.Or(n.key),e.abrupt("return",r.Fr(i,null));case 6:if(!(a=r.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",r.Fr(a.clientId,a));case 9:e.next=40;break;case 11:if(!r.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=r.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",r.qr(o));case 16:e.next=40;break;case 18:if(!r.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=r.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",r.Kr(u));case 23:e.next=40;break;case 25:if(n.key!==r.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=r.br(n.newValue))){e.next=30;break}return e.abrupt("return",r.Vr(s));case 30:e.next=40;break;case 32:if(n.key!==r.Ir){e.next=36;break}(l=function(e){var t=Cb.ct;if(null!=e)try{var n=JSON.parse(e);Dw("number"==typeof n),t=n}catch(e){Cw("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Cb.ct&&r.sequenceNumberHandler(l),e.next=40;break;case 36:if(n.key!==r.Rr){e.next=40;break}return f=r.Gr(n.newValue),e.next=40,Promise.all(f.map((function(e){return r.syncEngine.Qr(e)})));case 40:e.next=43;break;case 42:r.yr.push(n);case 43:case"end":return e.stop()}}),t)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new iA(this.currentUser,e,t,n),i=nA(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=nA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=rA(this.persistenceKey,e),i=new aA(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return oA.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return iA.ar(new Iw(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return aA.ar(r,t)}},{key:"br",value:function(e){return uA.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==n.currentUser.uid){e.next=2;break}return e.abrupt("return",n.syncEngine.jr(t.batchId,t.state,t.error));case 2:Aw("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),r)})))()}},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=cI();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),t}(),lA=function(){"use strict";function t(){e(f)(this,t),this.Hr=new sA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e(h)(t,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new sA,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),t}(),fA=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),t}(),hA=function(){"use strict";function t(){var n=this;e(f)(this,t),this.Xr=function(){return n.Zr()},this.eo=function(){return n.no()},this.so=[],this.io()}return e(h)(t,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Aw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.so[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(0)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"no",value:function(){Aw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.so[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(1)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),dA=null;function vA(){return null===dA?dA=268435456+Math.round(2147483648*Math.random()):dA++,"0x"+dA.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var pA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},yA=function(){"use strict";function t(n){e(f)(this,t),this.ro=n.ro,this.oo=n.oo}return e(h)(t,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),t}(),mA="WebChannelConnection",gA=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,i.longPollingOptions=t.longPollingOptions,e($p)(i)}return e(h)(r,[{key:"Ao",value:function(e,t,n,r){var i=vA();return new Promise((function(a,o){var u=new ww;u.setWithCredentials(!0),u.listenOnce(pw.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case vw.NO_ERROR:var t=u.getResponseJson();Aw(mA,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case vw.TIMEOUT:Aw(mA,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Mw(Lw.DEADLINE_EXCEEDED,"Request time out"));break;case vw.HTTP_ERROR:var n=u.getStatus();if(Aw(mA,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=(l=s.status,f=l.toLowerCase().replace(/_/g,"-"),Object.values(Lw).indexOf(f)>=0?f:Lw.UNKNOWN);o(new Mw(c,s.message))}else o(new Mw(Lw.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Mw(Lw.UNAVAILABLE,"Connection failed."));break;default:Ow()}}finally{Aw(mA,"RPC '".concat(e,"' ").concat(i," completed."))}var l,f}));var s=JSON.stringify(r);Aw(mA,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=vA(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hw(),o=dw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new gw({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Aw(mA,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new yA({ro:function(t){h?Aw(mA,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Aw(mA,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Aw(mA,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(l,kw.EventType.OPEN,(function(){h||Aw(mA,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(l,kw.EventType.CLOSE,(function(){h||(h=!0,Aw(mA,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),v(l,kw.EventType.ERROR,(function(t){h||(h=!0,Rw(mA,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Mw(Lw.UNAVAILABLE,"The operation could not be completed")))})),v(l,kw.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Dw(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Aw(mA,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=BI[e];if(void 0!==t)return JI(t)}(u),c=o.message;void 0===s&&(s=Lw.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new Mw(s,c)),l.close()}else Aw(mA,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),v(o,yw.STAT_EVENT,(function(t){t.stat===mw.PROXY?Aw(mA,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===mw.NOPROXY&&Aw(mA,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),r}(function(){"use strict";function t(n){e(f)(this,t),this.databaseInfo=n,this.databaseId=n.databaseId;var r=n.ssl?"https":"http";this.mo=r+"://"+n.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e(h)(t,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=vA(),o=this.To(e,t);Aw("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Aw("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Rw("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ew,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=pA[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return"undefined"!=typeof window?window:null}function wA(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e){return new yE(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _A=function(){"use strict";function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;e(f)(this,t),this.ii=n,this.timerId=r,this.Po=i,this.bo=a,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return e(h)(t,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Aw("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),t}(),xA=function(){"use strict";function t(n,r,i,a,o,u,s,c){e(f)(this,t),this.ii=n,this.$o=i,this.Oo=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new _A(n,r)}return e(h)(t,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.Uo(),!e.t0){e.next=4;break}return e.next=4,t.close(0);case 4:case"end":return e.stop()}}),n)})))()}},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.Ko()){e.next=2;break}return e.abrupt("return",t.close(0));case 2:case"end":return e.stop()}}),n)})))()}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==t?r.qo.reset():n&&n.code===Lw.RESOURCE_EXHAUSTED?(Cw(n.toString()),Cw("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===Lw.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=t,e.next=9,r.listener.ao(n);case 9:case"end":return e.stop()}}),i)})))()}},{key:"Yo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var n=this.Xo(this.Fo),r=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(n){var i=e(Vt)(n,2),a=i[0],o=i[1];t.Fo===r&&t.Zo(a,o)}),(function(e){var r=t;n((function(){var t=new Mw(Lw.UNKNOWN,"Fetching auth token failed: "+e.message);return r.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){var e=n;r((function(){return e.state=2,e.Lo=e.ii.enqueueAfterDelay(e.Oo,1e4,(function(){return e.Ko()&&(e.state=3),Promise.resolve()})),e.listener.uo()}))})),this.stream.ao((function(e){var t=n;r((function(){return t.tu(e)}))})),this.stream.onMessage((function(e){var t=n;r((function(){return t.onMessage(e)}))}))}},{key:"Go",value:function(){var t=this;this.state=5,this.qo.No(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),n)}))))}},{key:"tu",value:function(e){return Aw("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){var r=t;t.ii.enqueueAndForget((function(){return r.Fo===e?n():(Aw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),IA=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o,u,s){var c;return e(f)(this,r),(c=n.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,s)).serializer=u,e($p)(c)}return e(h)(r,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Ow(),a=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Dw(void 0===t||"string"==typeof t),w_.fromBase64String(t||"")):(Dw(void 0===t||t instanceof Uint8Array),w_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),u=t.targetChange.cause,s=u&&function(e){var t=void 0===e.code?Lw.UNKNOWN:JI(e.code);return new Mw(t,e.message||"")}(u);n=new sE(i,a,o,s||null)}else if("documentChange"in t){t.documentChange;var c=t.documentChange;c.document,c.document.name,c.document.updateTime;var l=EE(e,c.document.name),f=bE(c.document.updateTime),h=c.document.createTime?bE(c.document.createTime):$w.min(),d=new Y_({mapValue:{fields:c.document.fields}}),v=Z_.newFoundDocument(l,f,h,d),p=c.targetIds||[],y=c.removedTargetIds||[];n=new oE(p,y,v.key,v)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=EE(e,m.document),k=m.readTime?bE(m.readTime):$w.min(),w=Z_.newNoDocument(g,k),b=m.removedTargetIds||[];n=new oE([],b,w.key,w)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var x=EE(e,_.document),I=_.removedTargetIds||[];n=new oE([],I,x,null)}else{if(!("filter"in t))return Ow();t.filter;var E=t.filter;E.targetId;var T=E.count,S=void 0===T?0:T,A=E.unchangedNames,C=new WI(S,A),R=E.targetId;n=new uE(R,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $w.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$w.min():t.readTime?bE(t.readTime):$w.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=AE(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Ax(r)?{documents:PE(e,r)}:{query:LE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kE(e,t.resumeToken);var i=mE(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo($w.min())>0){n.readTime=gE(e,t.snapshotVersion.toTimestamp());var a=mE(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n,r=(this.serializer,null==(n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ow()}}(e.purpose))?null:{"goog-listen-tags":n});r&&(t.labels=r),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=AE(this.serializer),t.removeTarget=e,this.Wo(t)}}]),r}(xA),EA=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o,u,s){var c;return e(f)(this,r),(c=n.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,s)).serializer=u,c.ru=!1,e($p)(c)}return e(h)(r,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,e(uo)(e(lo)(r.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Dw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(Dw(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?bE(t.updateTime):bE(n)).isEqual($w.min())&&(r=bE(n)),new TI(r,t.transformResults||[]);var t,n,r}))):[]),n=bE(e.commitTime);return this.listener.cu(n,t)}var r,i;return Dw(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=AE(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return OE(t.serializer,e)}))};this.Wo(n)}}]),r}(xA),TA=function(t){"use strict";e(ne)(r,(function t(){e(f)(this,t)}));var n=e(ae)(r);function r(t,i,a,o){var u;return e(f)(this,r),(u=n.call(this)).authCredentials=t,u.appCheckCredentials=i,u.connection=a,u.serializer=o,u.lu=!1,e($p)(u)}return e(h)(r,[{key:"fu",value:function(){if(this.lu)throw new Mw(Lw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=e(Vt)(a,2),u=o[0],s=o[1];return i.connection.Io(t,n,r,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lw.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Mw(Lw.UNKNOWN,e.toString())}))}},{key:"vo",value:function(t,n,r,i){var a=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=e(Vt)(o,2),s=u[0],c=u[1];return a.connection.vo(t,n,r,s,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lw.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Mw(Lw.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),r}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SA=function(){"use strict";function t(n,r){e(f)(this,t),this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return e(h)(t,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Cw(t),this.mu=!1):Aw("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),t}(),AA=function t(n,r,i,a,o){"use strict";var s=this;e(f)(this,t),this.localStore=n,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr((function(t){var n=s;i.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=VA(n),!t.t0){t.next=5;break}return Aw("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Pw(n)).vu.add(4),e.next=4,NA(r);case 4:return r.bu.set("Unknown"),r.vu.delete(4),e.next=8,CA(r);case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(n);case 5:case"end":return t.stop()}}),t)}))))})),this.bu=new SA(i,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(e){return RA.apply(this,arguments)}function RA(){return(RA=e(u)(e(c).mark((function t(n){var r,i,a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,i=!1,a=void 0,!VA(n)){e.next=25;break}e.prev=2,o=n.Ru[Symbol.iterator]();case 4:if(r=(u=o.next()).done){e.next=11;break}return s=u.value,e.next=8,s(!0);case 8:r=!0,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),t,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function NA(e){return OA.apply(this,arguments)}function OA(){return(OA=e(u)(e(c).mark((function t(n){var r,i,a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,a=void 0,e.prev=1,o=n.Ru[Symbol.iterator]();case 3:if(r=(u=o.next()).done){e.next=10;break}return s=u.value,e.next=7,s(!1);case 7:r=!0,e.next=3;break;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),i=!0,a=e.t0;case 16:e.prev=16,e.prev=17,r||null==o.return||o.return();case 19:if(e.prev=19,!i){e.next=22;break}throw a;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),t,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function DA(e,t){var n=Pw(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),FA(n)?UA(n):vC(n).Ko()&&LA(n,t))}function PA(e,t){var n=Pw(e),r=vC(n);n.Au.delete(t),r.Ko()&&MA(n,t),0===n.Au.size&&(r.Ko()?r.jo():VA(n)&&n.bu.set("Unknown"))}function LA(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($w.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vC(e).su(t)}function MA(e,t){e.Vu.qt(t),vC(e).iu(t)}function UA(e){e.Vu=new lE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),vC(e).start(),e.bu.gu()}function FA(e){return VA(e)&&!vC(e).Uo()&&e.Au.size>0}function VA(e){return 0===Pw(e).vu.size}function BA(e){e.Vu=void 0}function jA(e){return qA.apply(this,arguments)}function qA(){return(qA=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.Au.forEach((function(e,t){LA(n,e)}));case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zA(e,t){return GA.apply(this,arguments)}function GA(){return(GA=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:BA(n),FA(n)?(n.bu.Iu(r),UA(n)):n.bu.set("Unknown");case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function KA(e,t,n){return HA.apply(this,arguments)}function HA(){return HA=e(u)(e(c).mark((function t(n,r,i){var a;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.bu.set("Online"),!(r instanceof sE&&2===r.state&&r.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.cause,a=!0,o=!1,u=void 0,e.prev=2,s=r.targetIds[Symbol.iterator]();case 4:if(a=(l=s.next()).done){e.next=15;break}if(f=l.value,e.t0=n.Au.has(f),!e.t0){e.next=12;break}return e.next=10,n.remoteSyncer.rejectListen(f,i);case 10:n.Au.delete(f),n.Vu.removeTarget(f);case 12:a=!0,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),o=!0,u=e.t1;case 21:e.prev=21,e.prev=22,a||null==s.return||s.return();case 24:if(e.prev=24,!o){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),t,null,[[2,17,21,29],[22,,24,28]])})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Aw("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t.t0),t.next=11,WA(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(r instanceof oE?n.Vu.Ht(r):r instanceof uE?n.Vu.ne(r):n.Vu.Xt(r),i.isEqual($w.min())){t.next=29;break}return t.prev=14,t.next=17,BS(n.localStore);case 17:if(a=t.sent,t.t1=i.compareTo(a)>=0,!t.t1){t.next=22;break}return t.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(w_.EMPTY_BYTE_STRING,r.snapshotVersion)),MA(e,t);var i=new GE(r.target,t,n,r.sequenceNumber);LA(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(n,i);case 24:return t.prev=24,t.t2=t.catch(14),Aw("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,WA(n,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),HA.apply(this,arguments)}function WA(e,t,n){return QA.apply(this,arguments)}function QA(){return(QA=e(u)(e(c).mark((function t(n,r,i){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_b(r)){t.next=2;break}throw r;case 2:return n.vu.add(1),t.next=5,NA(n);case 5:n.bu.set("Offline"),i||(i=function(){return BS(n.localStore)}),n.asyncQueue.enqueueRetryable(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Aw("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return n.vu.delete(1),e.next=6,CA(n);case 6:case"end":return e.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function JA(e,t){return t().catch((function(n){return WA(e,n,t)}))}function XA(e){return YA.apply(this,arguments)}function YA(){return(YA=e(u)(e(c).mark((function t(n){var r,i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Pw(n),i=pC(r),a=r.Eu.length>0?r.Eu[r.Eu.length-1].batchId:-1;case 2:if(!$A(r)){e.next=19;break}return e.prev=3,e.next=6,zS(r.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===r.Eu.length&&i.jo(),e.abrupt("break",19);case 10:a=o.batchId,ZA(r,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,WA(r,e.t0);case 17:e.next=2;break;case 19:eC(r)&&tC(r);case 20:case"end":return e.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function $A(e){return VA(e)&&e.Eu.length<10}function ZA(e,t){e.Eu.push(t);var n=pC(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function eC(e){return VA(e)&&!pC(e).Uo()&&e.Eu.length>0}function tC(e){pC(e).start()}function nC(e){return rC.apply(this,arguments)}function rC(){return(rC=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pC(n).hu();case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function iC(e){return aC.apply(this,arguments)}function aC(){return(aC=e(u)(e(c).mark((function t(n){var r,i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=pC(n),i=!0,a=!1,o=void 0,e.prev=2,u=n.Eu[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)l=s.value,r.uu(l.mutations);e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,o=e.t0;case 10:e.prev=10,e.prev=11,i||null==u.return||u.return();case 13:if(e.prev=13,!a){e.next=16;break}throw o;case 16:return e.finish(13);case 17:return e.finish(10);case 18:case"end":return e.stop()}}),t,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function oC(e,t,n){return uC.apply(this,arguments)}function uC(){return(uC=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.Eu.shift(),o=KI.from(a,r,i),e.next=3,JA(n,(function(){return n.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,XA(n);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function sC(e,t){return cC.apply(this,arguments)}function cC(){return cC=e(u)(e(c).mark((function t(n,r){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r&&pC(n).ou,!t.t0){t.next=4;break}return t.next=4,function(){var t=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!QI(a=r.code)||a===Lw.ABORTED){e.next=7;break}return i=n.Eu.shift(),pC(n).Qo(),e.next=5,JA(n,(function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)}));case 5:return e.next=7,XA(n);case 7:case 8:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:eC(n)&&tC(n);case 5:case"end":return t.stop()}}),t)}))),cC.apply(this,arguments)}function lC(e,t){return fC.apply(this,arguments)}function fC(){return(fC=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=Pw(n)).asyncQueue.verifyOperationInProgress(),Aw("RemoteStore","RemoteStore received new credentials"),a=VA(i),i.vu.add(3),e.next=6,NA(i);case 6:return a&&i.bu.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.vu.delete(3),e.next=12,CA(i);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function hC(e,t){return dC.apply(this,arguments)}function dC(){return(dC=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pw(n),!r){e.next=7;break}return i.vu.delete(2),e.next=5,CA(i);case 5:e.next=13;break;case 7:if(e.t0=r,e.t0){e.next=13;break}return i.vu.add(2),e.next=12,NA(i);case 12:i.bu.set("Unknown");case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function vC(t){return t.Su||(t.Su=(n=t.datastore,r=t.asyncQueue,i={uo:jA.bind(null,t),ao:zA.bind(null,t),nu:KA.bind(null,t)},(a=Pw(n)).fu(),new IA(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)),t.Ru.push(function(){var n=e(u)(e(c).mark((function n(r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.Su.Qo(),FA(t)?UA(t):t.bu.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.Su.stop();case 6:BA(t);case 7:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())),t.Su;var n,r,i,a}function pC(t){return t.Du||(t.Du=(n=t.datastore,r=t.asyncQueue,i={uo:nC.bind(null,t),ao:sC.bind(null,t),au:iC.bind(null,t),cu:oC.bind(null,t)},(a=Pw(n)).fu(),new EA(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)),t.Ru.push(function(){var n=e(u)(e(c).mark((function n(r){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return t.Du.Qo(),e.next=4,XA(t);case 4:e.next=9;break;case 6:return e.next=8,t.Du.stop();case 8:t.Eu.length>0&&(Aw("RemoteStore","Stopping write stream with ".concat(t.Eu.length," pending writes")),t.Eu=[]);case 9:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())),t.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n,r,i,a}var yC=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.asyncQueue=n,this.timerId=r,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new Uw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e(h)(t,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mw(Lw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(e,n,r,i,a){var o=new t(e,n,Date.now()+r,i,a);return o.start(r),o}}]),t}();function mC(e,t){if(Cw("AsyncQueue","".concat(t,": ").concat(e)),_b(e))return new Mw(Lw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gC=function(){"use strict";function t(n){e(f)(this,t),this.comparator=n?function(e,t){return n(e,t)||rb.comparator(e.key,t.key)}:function(e,t){return rb.comparator(e.key,t.key)},this.keyedMap=eI(),this.sortedSet=new f_(this.comparator)}return e(h)(t,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),kC=function(){"use strict";function t(){e(f)(this,t),this.Cu=new f_(rb.comparator)}return e(h)(t,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ow():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),t}(),wC=function(){"use strict";function t(n,r,i,a,o,u,s,c,l){e(f)(this,t),this.query=n,this.docs=r,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=l}return e(h)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new t(e,n,gC.emptySet(n),o,r,i,!0,!1,a)}}]),t}(),bC=function t(){"use strict";e(f)(this,t),this.Nu=void 0,this.listeners=[]},_C=function t(){"use strict";e(f)(this,t),this.queries=new Xx((function(e){return Gx(e)}),zx),this.onlineState="Unknown",this.ku=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(e,t){return IC.apply(this,arguments)}function IC(){return(IC=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pw(n),a=r.query,o=!1,(u=i.queries.get(a))||(o=!0,u=new bC),!o){e.next=13;break}return e.prev=3,e.next=6,i.onListen(a);case 6:u.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=mC(e.t0,"Initialization of query '".concat(Kx(r.query),"' failed")),e.abrupt("return",void r.onError(s));case 13:i.queries.set(a,u),u.listeners.push(r),r.Mu(i.onlineState),u.Nu&&r.$u(u.Nu)&&CC(i);case 14:case"end":return e.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function EC(e,t){return TC.apply(this,arguments)}function TC(){return(TC=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pw(n),a=r.query,o=!1,(u=i.queries.get(a))&&(s=u.listeners.indexOf(r))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(i.queries.delete(a),i.onUnlisten(a)));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function SC(e,t){var n=Pw(e),r=!1,i=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,v=void 0;try{for(var p,y=f.listeners[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){p.value.$u(c)&&(r=!0)}}catch(e){d=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw v}}f.Nu=c}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}r&&CC(n)}function AC(e,t,n){var r=Pw(e),i=r.queries.get(t),a=!0,o=!1,u=void 0;if(i)try{for(var s,c=i.listeners[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){s.value.onError(n)}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}r.queries.delete(t)}function CC(e){e.ku.forEach((function(e){e.next()}))}var RC=function(){"use strict";function t(n,r,i){e(f)(this,t),this.query=n,this.Ou=r,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}return e(h)(t,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.docChanges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;3!==u.type&&t.push(u)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e=new wC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var s=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),s=!0):this.qu(e,this.onlineState)&&(this.Uu(e),s=!0),this.Bu=e,s}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=wC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),t}(),NC=function(){"use strict";function t(n,r){e(f)(this,t),this.Gu=n,this.byteLength=r}return e(h)(t,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),t}(),OC=function(){"use strict";function t(n){e(f)(this,t),this.serializer=n}return e(h)(t,[{key:"rr",value:function(e){return EE(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?NE(this.serializer,e.document,!1):Z_.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return bE(e)}}]),t}(),DC=function(){"use strict";function t(n,r,i){e(f)(this,t),this.ju=n,this.localStore=r,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PC(n)}return e(h)(t,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=eb.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t=new Map,n=new OC(this.serializer),r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s.metadata.queries){var c=n.rr(s.metadata.name),l=!0,f=!1,h=void 0;try{for(var d,v=s.metadata.queries[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value,y=(t.get(p)||uI()).add(c);t.set(p,y)}}catch(e){f=!0,h=e}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}}}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t}},{key:"complete",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YS(t.localStore,new OC(t.serializer),t.documents,t.ju.id);case 2:r=e.sent,i=t.Wu(t.documents),a=!0,o=!1,u=void 0,e.prev=5,s=t.queries[Symbol.iterator]();case 7:if(a=(l=s.next()).done){e.next=14;break}return f=l.value,e.next=11,ZS(t.localStore,f,i.get(f.name));case 11:a=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),o=!0,u=e.t0;case 20:e.prev=20,e.prev=21,a||null==s.return||s.return();case 23:if(e.prev=23,!o){e.next=26;break}throw u;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return e.abrupt("return",(t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:r}));case 29:case"end":return e.stop()}}),n,null,[[5,16,20,28],[21,,23,27]])})))()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LC=function t(n){"use strict";e(f)(this,t),this.key=n},MC=function t(n){"use strict";e(f)(this,t),this.key=n},UC=function(){"use strict";function t(n,r){e(f)(this,t),this.query=n,this.Yu=r,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=uI(),this.mutatedKeys=uI(),this.tc=Qx(n),this.ec=new gC(this.tc)}return e(h)(t,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new kC,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Hx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.rc(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ow()}})(n)-a(i)||r.tc(e.doc,t.doc);var n,i,a})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new wC(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new kC,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=uI(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new MC(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new LC(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=uI();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return wC.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),t}(),FC=function t(n,r,i){"use strict";e(f)(this,t),this.query=n,this.targetId=r,this.view=i},VC=function t(n){"use strict";e(f)(this,t),this.key=n,this.fc=!1},BC=function(){"use strict";function t(n,r,i,a,o,u){e(f)(this,t),this.localStore=n,this.remoteStore=r,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new Xx((function(e){return Gx(e)}),zx),this._c=new Map,this.mc=new Set,this.gc=new f_(rb.comparator),this.yc=new Map,this.Ic=new mS,this.Tc={},this.Ec=new Map,this.Ac=HT.Mn(),this.onlineState="Unknown",this.vc=void 0}return e(h)(t,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),t}();function jC(e,t){return qC.apply(this,arguments)}function qC(){return(qC=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=PR(n),!(u=i.wc.get(r))){e.next=7;break}a=u.targetId,i.sharedClientState.addLocalQueryTarget(a),o=u.view.lc(),e.next=16;break;case 7:return e.next=9,GS(i.localStore,Bx(r));case 9:return s=e.sent,l=i.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,zC(i,r,a,"current"===l,s.resumeToken);case 14:o=e.sent,i.isPrimaryClient&&DA(i.remoteStore,s);case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function zC(e,t,n,r,i){return GC.apply(this,arguments)}function GC(){return GC=e(u)(e(c).mark((function t(n,r,i,a,o){var s,l,f,h,d,v;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.Rc=function(t,r,i){return function(){var t=e(u)(e(c).mark((function t(n,r,i,a){var o,u,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.view.sc(i),e.t0=o.zi,!e.t0){e.next=6;break}return e.next=5,WS(n.localStore,r.query,!1).then((function(e){var t=e.documents;return r.view.sc(t,o)}));case 5:o=e.sent;case 6:return u=a&&a.targetChanges.get(r.targetId),s=r.view.applyChanges(o,n.isPrimaryClient,u),e.abrupt("return",(lR(n,r.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()(n,t,r,i)},t.next=3,WS(n.localStore,r,!0);case 3:return s=t.sent,l=new UC(r,s.ir),f=l.sc(s.documents),h=aE.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==n.onlineState,o),d=l.applyChanges(f,n.isPrimaryClient,h),lR(n,i,d.cc),v=new FC(r,i,l),t.abrupt("return",(n.wc.set(r,v),n._c.has(i)?n._c.get(i).push(r):n._c.set(i,[r]),d.snapshot));case 11:case"end":return t.stop()}}),t)}))),GC.apply(this,arguments)}function KC(e,t){return HC.apply(this,arguments)}function HC(){return(HC=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pw(n),a=i.wc.get(r),!((o=i._c.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i._c.set(a.targetId,o.filter((function(e){return!zx(e,r)}))),void i.wc.delete(r)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,KS(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),PA(i.remoteStore,a.targetId),sR(i,a.targetId)})).catch(pb);case 9:e.next=14;break;case 11:return sR(i,a.targetId),e.next=14,KS(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function WC(e,t,n){return QC.apply(this,arguments)}function QC(){return(QC=e(u)(e(c).mark((function t(n,r,i){var a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=LR(n),e.prev=1,e.next=4,function(e,t){var n,r,i=Pw(e),a=Yw.now(),o=t.reduce((function(e,t){return e.add(t.key)}),uI());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=$x(),s=uI();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o=[],u=!0,s=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value,d=DI(h,n.get(h.key).overlayedDocument);null!=d&&o.push(new MI(h.key,d,$_(d.value.mapValue),SI.exists(!0)))}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}return i.mutationQueue.addMutationBatch(e,a,o,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:tI(n)}}))}(a.localStore,r);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),t=a,s=o.batchId,c=i,l=void 0,(l=t.Tc[t.currentUser.toKey()])||(l=new f_(Qw)),l=l.insert(s,c),t.Tc[t.currentUser.toKey()]=l,e.next=9,dR(a,o.changes);case 9:return e.next=11,XA(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=mC(e.t0,"Failed to persist write"),i.reject(u);case 17:case"end":return e.stop()}var t,s,c,l}),t,null,[[1,13]])})))).apply(this,arguments)}function JC(e,t){return XC.apply(this,arguments)}function XC(){return(XC=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),e.prev=1,e.next=4,jS(i.localStore,r);case 4:return a=e.sent,r.targetChanges.forEach((function(e,t){var n=i.yc.get(t);n&&(Dw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Dw(n.fc):e.removedDocuments.size>0&&(Dw(n.fc),n.fc=!1))})),e.next=8,dR(i,a,r);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,pb(e.t0);case 14:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function YC(e,t,n){var r=Pw(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Pw(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i=!0,a=!1,o=void 0;try{for(var u,s=n.listeners[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){u.value.Mu(t)&&(r=!0)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}})),r&&CC(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function $C(e,t,n){return ZC.apply(this,arguments)}function ZC(){return(ZC=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l,f;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Pw(n)).sharedClientState.updateQueryState(r,"rejected",i),o=a.yc.get(r),!(u=o&&o.key)){e.next=14;break}return s=(s=new f_(rb.comparator)).insert(u,Z_.newNoDocument(u,$w.min())),l=uI().add(u),f=new iE($w.min(),new Map,new f_(Qw),s,l),e.next=9,JC(a,f);case 9:a.gc=a.gc.remove(u),a.yc.delete(r),hR(a),e.next=16;break;case 14:return e.next=16,KS(a.localStore,r,!1).then((function(){return sR(a,r,i)})).catch(pb);case 16:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function eR(e,t){return tR.apply(this,arguments)}function tR(){return(tR=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),a=r.batch.batchId,e.prev=1,e.next=4,VS(i.localStore,r);case 4:return o=e.sent,uR(i,a,null),oR(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,dR(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pb(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function nR(e,t,n){return rR.apply(this,arguments)}function rR(){return(rR=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pw(n),e.prev=1,e.next=4,function(e,t){var n=Pw(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Dw(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,r);case 4:return o=e.sent,uR(a,r,i),oR(a,r),a.sharedClientState.updateMutationState(r,"rejected",i),e.next=10,dR(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pb(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function iR(e,t){return aR.apply(this,arguments)}function aR(){return(aR=e(u)(e(c).mark((function t(n,r){var i,a,o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VA((i=Pw(n)).remoteStore)||Aw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Pw(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(i.localStore);case 5:if(-1!==(a=e.sent)){e.next=8;break}return e.abrupt("return",void r.resolve());case 8:(o=i.Ec.get(a)||[]).push(r),i.Ec.set(a,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=mC(e.t0,"Initialization of waitForPendingWrites() operation failed"),r.reject(u);case 16:case"end":return e.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function oR(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function uR(e,t,n){var r=Pw(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function sR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r=!0,i=!1,a=void 0;try{for(var o,u=e._c.get(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;e.wc.delete(s),n&&e.dc.Pc(s,n)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||cR(e,t)}))}function cR(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(PA(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),hR(e))}function lR(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;s instanceof LC?(e.Ic.addReference(s.key,t),fR(e,s)):s instanceof MC?(Aw("SyncEngine","Document no longer in limbo: "+s.key),e.Ic.removeReference(s.key,t),e.Ic.containsKey(s.key)||cR(e,s.key)):Ow()}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}function fR(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Aw("SyncEngine","New document in limbo: "+n),e.mc.add(r),hR(e))}function hR(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new rb(eb.fromString(t)),r=e.Ac.next();e.yc.set(r,new VC(n)),e.gc=e.gc.insert(n,r),DA(e.remoteStore,new GE(Bx(Px(n.path)),r,"TargetPurposeLimboResolution",Cb.ct))}}function dR(e,t,n){return vR.apply(this,arguments)}function vR(){return vR=e(u)(e(c).mark((function t(n,r,i){var a,o,s,l;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Pw(n),o=[],s=[],l=[],t.t0=a.wc.isEmpty(),t.t0){t.next=9;break}return a.wc.forEach((function(e,t){l.push(a.Rc(t,r,i).then((function(e){if((e||i)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=DS.Li(t.targetId,e);s.push(n)}})))})),t.next=6,Promise.all(l);case 6:return a.dc.nu(o),t.next=9,function(){var t=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l,f,h,d,v,p;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return mb.forEach(r,(function(t){return mb.forEach(t.Fi,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return mb.forEach(t.Bi,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_b(e.t0)){e.next=10;break}throw e.t0;case 10:Aw("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:for(a=!0,o=!1,u=void 0,e.prev=12,s=r[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)f=l.value,h=f.targetId,f.fromCache||(d=i.Ji.get(h),v=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(v),i.Ji=i.Ji.insert(h,p));e.next=20;break;case 16:e.prev=16,e.t1=e.catch(12),o=!0,u=e.t1;case 20:e.prev=20,e.prev=21,a||null==s.return||s.return();case 23:if(e.prev=23,!o){e.next=26;break}throw u;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),t,null,[[1,6],[12,16,20,28],[21,,23,27]])})));return function(e,n){return t.apply(this,arguments)}}()(a.localStore,s);case 9:case"end":return t.stop()}}),t)}))),vR.apply(this,arguments)}function pR(e,t){return yR.apply(this,arguments)}function yR(){return(yR=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Pw(n)).currentUser.isEqual(r)){e.next=11;break}return Aw("SyncEngine","User change. New user:",r.toKey()),e.next=5,US(i.localStore,r);case 5:return a=e.sent,i.currentUser=r,(t=i).Ec.forEach((function(e){e.forEach((function(e){e.reject(new Mw(Lw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ec.clear(),i.sharedClientState.handleUserChange(r,a.removedBatchIds,a.addedBatchIds),e.next=11,dR(i,a.er);case 11:case"end":return e.stop()}var t}),t)})))).apply(this,arguments)}function mR(e,t){var n=Pw(e),r=n.yc.get(t);if(r&&r.fc)return uI().add(r.key);var i=uI(),a=n._c.get(t);if(!a)return i;var o=!0,u=!1,s=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.wc.get(f);i=i.unionWith(h.view.nc)}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return i}function gR(e,t){return kR.apply(this,arguments)}function kR(){return(kR=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),e.next=3,WS(i.localStore,r.query,!0);case 3:return a=e.sent,o=r.view.hc(a),e.abrupt("return",(i.isPrimaryClient&&lR(i,r.targetId,o.cc),o));case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function wR(e,t){return bR.apply(this,arguments)}function bR(){return(bR=e(u)(e(c).mark((function t(n,r){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),e.abrupt("return",JS(i.localStore,r).then((function(e){return dR(i,e)})));case 2:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _R(e,t,n,r){return xR.apply(this,arguments)}function xR(){return(xR=e(u)(e(c).mark((function t(n,r,i,a){var o,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Pw(n),e.next=3,function(e,t){var n=Pw(e),r=Pw(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):mb.resolve(null)}))}))}(o.localStore,r);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==i){e.next=10;break}return e.next=8,XA(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===i||"rejected"===i?(uR(o,r,a||null),oR(o,r),t=o.localStore,s=r,Pw(Pw(t).mutationQueue).Cn(s)):Ow();case 11:return e.next=13,dR(o,u);case 13:e.next=16;break;case 15:Aw("SyncEngine","Cannot apply mutation batch with id: "+r);case 16:case"end":return e.stop()}var t,s}),t)})))).apply(this,arguments)}function IR(e,t){return ER.apply(this,arguments)}function ER(){return(ER=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l,f,h,d,v,p;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(PR(i=Pw(n)),LR(i),!0!==r||!0===i.vc){e.next=28;break}return a=i.sharedClientState.getAllActiveQueryTargets(),e.next=5,TR(i,a.toArray());case 5:return o=e.sent,i.vc=!0,e.next=9,hC(i.remoteStore,!0);case 9:for(u=!0,s=!1,l=void 0,e.prev=10,f=o[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)d=h.value,DA(i.remoteStore,d);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,l=e.t0;case 18:e.prev=18,e.prev=19,u||null==f.return||f.return();case 21:if(e.prev=21,!s){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:e.next=40;break;case 28:if(!1!==r||!1===i.vc){e.next=40;break}return v=[],p=Promise.resolve(),i._c.forEach((function(e,t){i.sharedClientState.isLocalQueryTarget(t)?v.push(t):p=p.then((function(){return sR(i,t),KS(i.localStore,t,!0)})),PA(i.remoteStore,t)})),e.next=34,p;case 34:return e.next=36,TR(i,v);case 36:return function(e){var t=Pw(e);t.yc.forEach((function(e,n){PA(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new f_(rb.comparator)}(i),i.vc=!1,e.next=40,hC(i.remoteStore,!1);case 40:case"end":return e.stop()}}),t,null,[[10,14,18,26],[19,,21,25]])})))).apply(this,arguments)}function TR(e,t,n){return SR.apply(this,arguments)}function SR(){return(SR=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l,f,h,d,v,p,y,m,g,k,w,b,_,x,I,E;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Pw(n),o=[],u=[],s=!0,l=!1,f=void 0,e.prev=2,h=r[Symbol.iterator]();case 4:if(s=(d=h.next()).done){e.next=53;break}if(v=d.value,!(y=a._c.get(v))||0===y.length){e.next=41;break}return e.next=11,GS(a.localStore,Bx(y[0]));case 11:p=e.sent,m=!0,g=!1,k=void 0,e.prev=13,w=y[Symbol.iterator]();case 15:if(m=(b=w.next()).done){e.next=25;break}return _=b.value,x=a.wc.get(_),e.next=20,gR(a,x);case 20:(I=e.sent).snapshot&&u.push(I.snapshot);case 22:m=!0,e.next=15;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(13),g=!0,k=e.t0;case 31:e.prev=31,e.prev=32,m||null==w.return||w.return();case 34:if(e.prev=34,!g){e.next=37;break}throw k;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.next=49;break;case 41:return e.next=43,QS(a.localStore,v);case 43:return E=e.sent,e.next=46,GS(a.localStore,E);case 46:return p=e.sent,e.next=49,zC(a,AR(E),v,!1,p.resumeToken);case 49:o.push(p);case 50:s=!0,e.next=4;break;case 53:e.next=59;break;case 55:e.prev=55,e.t1=e.catch(2),l=!0,f=e.t1;case 59:e.prev=59,e.prev=60,s||null==h.return||h.return();case 62:if(e.prev=62,!l){e.next=65;break}throw f;case 65:return e.finish(62);case 66:return e.finish(59);case 67:return e.abrupt("return",(a.dc.nu(u),o));case 68:case"end":return e.stop()}}),t,null,[[2,55,59,67],[13,27,31,39],[32,,34,38],[60,,62,66]])})))).apply(this,arguments)}function AR(e){return Dx(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function CR(e){var t=Pw(e);return Pw(Pw(t.localStore).persistence).$i()}function RR(e,t,n,r){return NR.apply(this,arguments)}function NR(){return(NR=e(u)(e(c).mark((function t(n,r,i,a){var o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Pw(n)).vc){e.next=3;break}return e.abrupt("return",void Aw("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o._c.get(r))&&u.length>0)){e.next=20;break}e.t0=i,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,JS(o.localStore,Wx(u[0]));case 10:return s=e.sent,l=iE.createSynthesizedRemoteEventForCurrentChange(r,"current"===i,w_.EMPTY_BYTE_STRING),e.next=14,dR(o,s,l);case 14:return e.abrupt("break",20);case 15:return e.next=17,KS(o.localStore,r,!0);case 17:return sR(o,r,a),e.abrupt("break",20);case 19:Ow();case 20:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function OR(e,t,n){return DR.apply(this,arguments)}function DR(){return(DR=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l,f,h,d,v,p,y,m,g,k,w;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=PR(n)).vc){e.next=62;break}o=!0,u=!1,s=void 0,e.prev=3,l=r[Symbol.iterator]();case 5:if(o=(f=l.next()).done){e.next=22;break}if(h=f.value,!a._c.has(h)){e.next=10;break}return Aw("SyncEngine","Adding an already active target "+h),e.abrupt("continue",19);case 10:return e.next=12,QS(a.localStore,h);case 12:return d=e.sent,e.next=15,GS(a.localStore,d);case 15:return v=e.sent,e.next=18,zC(a,AR(d),v.targetId,!1,v.resumeToken);case 18:DA(a.remoteStore,v);case 19:o=!0,e.next=5;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(3),u=!0,s=e.t0;case 28:e.prev=28,e.prev=29,o||null==l.return||l.return();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:p=!0,y=!1,m=void 0,e.prev=37,g=i[Symbol.iterator]();case 39:if(p=(k=g.next()).done){e.next=48;break}if(w=k.value,e.t1=a._c.has(w),!e.t1){e.next=45;break}return e.next=45,KS(a.localStore,w,!1).then((function(){PA(a.remoteStore,w),sR(a,w)})).catch(pb);case 45:p=!0,e.next=39;break;case 48:e.next=54;break;case 50:e.prev=50,e.t2=e.catch(37),y=!0,m=e.t2;case 54:e.prev=54,e.prev=55,p||null==g.return||g.return();case 57:if(e.prev=57,!y){e.next=60;break}throw m;case 60:return e.finish(57);case 61:return e.finish(54);case 62:case"end":return e.stop()}}),t,null,[[3,24,28,36],[29,,31,35],[37,50,54,62],[55,,57,61]])})))).apply(this,arguments)}function PR(e){var t=Pw(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$C.bind(null,t),t.dc.nu=SC.bind(null,t.eventManager),t.dc.Pc=AC.bind(null,t.eventManager),t}function LR(e){var t=Pw(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nR.bind(null,t),t}function MR(t,n,r){var i=Pw(t);(function(){var t=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getMetadata();case 3:return a=e.sent,e.next=6,function(e,t){var n=Pw(e),r=bE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(n.localStore,a);case 6:if(!e.sent){e.next=11;break}return e.next=9,r.close();case 9:return i._completeWith({taskState:"Success",documentsLoaded:(t=a).totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}),e.abrupt("return",(e.sent,Promise.resolve(new Set)));case 11:return i._updateProgress(PC(a)),o=new DC(a,n.localStore,r.serializer),e.next=15,r.bc();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.zu(u);case 19:return(s=e.sent)&&i._updateProgress(s),e.next=23,r.bc();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return l=e.sent,e.next=31,dR(n,l.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Pw(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(n.localStore,a);case 33:return i._completeWith(l.progress),e.abrupt("return",(e.sent,e.sent,Promise.resolve(l.Hu)));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Rw("SyncEngine","Loading bundle failed with ".concat(e.t0)),i._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}var t}),t,null,[[0,37]])})));return function(e,n,r){return t.apply(this,arguments)}})()(i,n,r).then((function(e){i.sharedClientState.notifyBundleLoaded(e)}))}var UR=function(){"use strict";function t(){e(f)(this,t),this.synchronizeTabs=!1}return e(h)(t,[{key:"initialize",value:function(t){var n=this;return e(u)(e(c).mark((function r(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.serializer=bA(t.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(t),n.persistence=n.createPersistence(t),e.next=5,n.persistence.start();case 5:n.localStore=n.createLocalStore(t),n.gcScheduler=n.createGarbageCollectionScheduler(t,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(t,n.localStore);case 8:case"end":return e.stop()}}),r)})))()}},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return MS(this.persistence,new PS,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new xS(ES.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new lA}},{key:"terminate",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.gcScheduler&&t.gcScheduler.stop(),e.next=3,t.sharedClientState.shutdown();case 3:return e.next=5,t.persistence.shutdown();case 5:case"end":return e.stop()}}),n)})))()}}]),t}(),FR=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this)).Vc=t,o.cacheSizeBytes=i,o.forceOwnership=a,o.synchronizeTabs=!1,e($p)(o)}return e(h)(r,[{key:"initialize",value:function(t){var n=this,i=this;return e(u)(e(c).mark((function a(){return e(c).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(uo)(e(lo)(r.prototype),"initialize",n).call(i,t);case 2:return a.next=4,i.Vc.initialize(i,t);case 4:return a.next=6,LR(i.Vc.syncEngine);case 6:return a.next=8,XA(i.Vc.remoteStore);case 8:return a.next=10,i.persistence.Ii((function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return a.stop()}}),a)})))()}},{key:"createLocalStore",value:function(e){return MS(this.persistence,new PS,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new ZT(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Ab(t,this.persistence);return new Sb(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?FT.withCacheSize(this.cacheSizeBytes):FT.DEFAULT;return new CS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kA(),wA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new lA}}]),r}(UR),VR=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,i,!1)).Vc=t,a.cacheSizeBytes=i,a.synchronizeTabs=!0,e($p)(a)}return e(h)(r,[{key:"initialize",value:function(t){var n=this,i=this;return e(u)(e(c).mark((function a(){var o;return e(c).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(uo)(e(lo)(r.prototype),"initialize",n).call(i,t);case 2:if(o=i.Vc.syncEngine,a.t0=i.sharedClientState instanceof cA,!a.t0){a.next=8;break}return i.sharedClientState.syncEngine={jr:_R.bind(null,o),zr:RR.bind(null,o),Wr:OR.bind(null,o),$i:CR.bind(null,o),Qr:wR.bind(null,o)},a.next=8,i.sharedClientState.start();case 8:return a.next=10,i.persistence.Ii(function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IR(i.Vc.syncEngine,n);case 2:i.gcScheduler&&(n&&!i.gcScheduler.started?i.gcScheduler.start():n||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(n&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():n||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return a.stop()}}),a)})))()}},{key:"createSharedClientState",value:function(e){var t=kA();if(!cA.D(t))throw new Mw(Lw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),r}(FR),BR=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"initialize",value:function(t,n){var r=this;return e(u)(e(c).mark((function i(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.localStore,e.t0){e.next=12;break}return r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(e){return YC(r.syncEngine,e,1)},r.remoteStore.remoteSyncer.handleCredentialChange=pR.bind(null,r.syncEngine),e.next=12,hC(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),i)})))()}},{key:"createEventManager",value:function(e){return new _C}},{key:"createDatastore",value:function(e){var t,n,r,i=bA(e.databaseInfo.databaseId),a=(t=e.databaseInfo,new gA(t));return n=e.authCredentials,r=e.appCheckCredentials,new TA(n,r,a,i)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return YC(o.syncEngine,e,0)},a=hA.D()?new hA:new fA,new AA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new BC(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pw(n),Aw("RemoteStore","RemoteStore shutting down."),r.vu.add(5),e.next=5,NA(r);case 5:r.Pu.shutdown(),r.bu.set("Unknown");case 7:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jR(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,r=0;return{read:function(){return e(u)(e(c).mark((function i(){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<t.byteLength)){e.next=3;break}return a={value:t.slice(r,r+n),done:!1},e.abrupt("return",(r+=n,a));case 3:return e.abrupt("return",{done:!0});case 4:case"end":return e.stop()}}),i)})))()},cancel:function(){return e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})))()},releaseLock:function(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qR=function(){"use strict";function t(n){e(f)(this,t),this.observer=n,this.muted=!1}return e(h)(t,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Cw("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),t}(),zR=function(){"use strict";function t(n,r){var i=this;e(f)(this,t),this.Cc=n,this.serializer=r,this.metadata=new Uw,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?i.metadata.resolve(e.Gu.metadata):i.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return i.metadata.reject(e)}))}return e(h)(t,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.metadata.promise);case 1:case"end":return e.stop()}}),n)})))()}},{key:"bc",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMetadata();case 2:return e.abrupt("return",(e.sent,t.Nc()));case 3:case"end":return e.stop()}}),n)})))()}},{key:"Nc",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.kc();case 2:if(null!==(r=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return i=t.xc.decode(r),a=Number(i),isNaN(a)&&t.Mc("length string (".concat(i,") is not valid number")),e.next=9,t.$c(a);case 9:return o=e.sent,e.abrupt("return",new NC(JSON.parse(o),r.length+a));case 11:case"end":return e.stop()}}),n)})))()}},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.Oc()<0)){e.next=7;break}return e.next=3,t.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==t.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(r=t.Oc())<0&&t.Mc("Reached the end of bundle when a length string is expected."),i=t.buffer.slice(0,r),e.abrupt("return",(t.buffer=t.buffer.slice(r),i));case 13:case"end":return e.stop()}}),n)})))()}},{key:"$c",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.buffer.length<t)){e.next=8;break}return e.next=3,n.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}n.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return i=n.xc.decode(n.buffer.slice(0,t)),e.abrupt("return",(n.buffer=n.buffer.slice(t),i));case 10:case"end":return e.stop()}}),r)})))()}},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Cc.read();case 2:return(r=e.sent).done||((i=new Uint8Array(t.buffer.length+r.value.length)).set(t.buffer),i.set(r.value,t.buffer.length),t.buffer=i),e.abrupt("return",r.done);case 5:case"end":return e.stop()}}),n)})))()}}]),t}(),GR=function(){"use strict";function t(n){e(f)(this,t),this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e(h)(t,[{key:"lookup",value:function(t){var n=this;return e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.ensureCommitNotCalled(),!(n.mutations.length>0)){r.next=2;break}throw new Mw(Lw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return r.next=4,function(){var t=e(u)(e(c).mark((function t(n,r){var i,a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),a=AE(i.serializer)+"/documents",o={documents:r.map((function(e){return IE(i.serializer,e)}))},e.next=5,i.vo("BatchGetDocuments",a,o,r.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t,n,r=(t=i.serializer,"found"in(n=e)?function(e,t){Dw(!!t.found),t.found.name,t.found.updateTime;var n=EE(e,t.found.name),r=bE(t.found.updateTime),i=t.found.createTime?bE(t.found.createTime):$w.min(),a=new Y_({mapValue:{fields:t.found.fields}});return Z_.newFoundDocument(n,r,i,a)}(t,n):"missing"in n?function(e,t){Dw(!!t.missing),Dw(!!t.readTime);var n=EE(e,t.missing),r=bE(t.readTime);return Z_.newNoDocument(n,r)}(t,n):Ow());s.set(r.key.toString(),r)})),l=[],e.abrupt("return",(r.forEach((function(e){var t=s.get(e.toString());Dw(!!t),l.push(t)})),l));case 10:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n.datastore,t);case 4:return i=r.sent,r.abrupt("return",(i.forEach((function(e){return n.recordVersion(e)})),i));case 6:case"end":return r.stop()}}),r)})))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new qI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!t.lastWriteError){n.next=2;break}throw t.lastWriteError;case 2:return r=t.readVersions,t.mutations.forEach((function(e){r.delete(e.key.toString())})),r.forEach((function(e,n){var r=rb.fromPath(n);t.mutations.push(new zI(r,t.precondition(r)))})),n.next=7,function(){var t=e(u)(e(c).mark((function t(n,r){var i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(n),a=AE(i.serializer)+"/documents",o={writes:r.map((function(e){return OE(i.serializer,e)}))},e.next=3,i.Io("Commit",a,o);case 3:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(t.datastore,t.mutations);case 7:t.committed=!0;case 8:case"end":return n.stop()}}),n)})))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ow();t=$w.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Mw(Lw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($w.min())?SI.exists(!1):SI.updateTime(t):SI.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($w.min()))throw new Mw(Lw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return SI.updateTime(t)}return SI.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),t}(),KR=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this.asyncQueue=n,this.datastore=r,this.options=i,this.updateFunction=a,this.deferred=o,this.Bc=i.maxAttempts,this.qo=new _A(this.asyncQueue,"transaction_retry")}return e(h)(t,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var t=this;this.qo.No(e(u)(e(c).mark((function n(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new GR(t.datastore),(i=t.qc(r))&&i.then((function(e){t.asyncQueue.enqueueAndForget((function(){return r.commit().then((function(){t.deferred.resolve(e)})).catch((function(e){t.Uc(e)}))}))})).catch((function(e){t.Uc(e)}));case 2:case"end":return e.stop()}}),n)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Rb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!QI(t)}return!1}}]),t}(),HR=function(){"use strict";function t(n,r,i,a){var o=this;e(f)(this,t);var s=this;this.authCredentials=n,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=a,this.user=Iw.UNAUTHENTICATED,this.clientId=Ww.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Aw("FirestoreClient","Received user=",n.uid),e.next=3,s.authCredentialListener(n);case 3:s.user=n;case 4:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(i,(function(e){return Aw("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return e(h)(t,[{key:"getConfiguration",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),n)})))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Mw(Lw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){this.asyncQueue.enterRestrictedMode();var t=new Uw,n=this;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(e(u)(e(c).mark((function r(){var i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=n._onlineComponents,!e.t0){e.next=5;break}return e.next=5,n._onlineComponents.terminate();case 5:if(e.t1=n._offlineComponents,!e.t1){e.next=9;break}return e.next=9,n._offlineComponents.terminate();case 9:n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve(),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),i=mC(e.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return e.stop()}}),r,null,[[0,14]])})))),t.promise}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(e,t){return QR.apply(this,arguments)}function QR(){return QR=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),Aw("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return i=t.sent,t.next=6,r.initialize(i);case 6:a=i.initialUser,n.setCredentialChangeListener(function(){var t=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(n),e.t0){e.next=5;break}return e.next=4,US(r.localStore,n);case 4:a=n;case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n._offlineComponents=r;case 8:case"end":return t.stop()}}),t)}))),QR.apply(this,arguments)}function JR(e,t){return XR.apply(this,arguments)}function XR(){return(XR=e(u)(e(c).mark((function t(n,r){var i,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncQueue.verifyOperationInProgress(),e.next=3,$R(n);case 3:return i=e.sent,Aw("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.getConfiguration();case 7:return a=e.sent,e.next=10,r.initialize(i,a);case 10:n.setCredentialChangeListener((function(e){return lC(r.remoteStore,e)})),n.setAppCheckTokenChangeListener((function(e,t){return lC(r.remoteStore,t)})),n._onlineComponents=r;case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function YR(e){return"FirebaseError"===e.name?e.code===Lw.FAILED_PRECONDITION||e.code===Lw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function $R(e){return ZR.apply(this,arguments)}function ZR(){return(ZR=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._offlineComponents){e.next=21;break}if(!n._uninitializedComponentsProvider){e.next=18;break}return Aw("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,WR(n,n._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),YR(r=e.t0)){e.next=13;break}throw r;case 13:return Rw("Error using user provided cache. Falling back to memory cache: "+r),e.next=16,WR(n,new UR);case 16:e.next=21;break;case 18:return Aw("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,WR(n,new UR);case 21:return e.abrupt("return",n._offlineComponents);case 22:case"end":return e.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function eN(e){return tN.apply(this,arguments)}function tN(){return(tN=e(u)(e(c).mark((function t(n){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n._onlineComponents,e.t0){e.next=11;break}if(!n._uninitializedComponentsProvider){e.next=8;break}return Aw("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,JR(n,n._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Aw("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,JR(n,new BR);case 11:return e.abrupt("return",(e.t0,n._onlineComponents));case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function nN(e){return $R(e).then((function(e){return e.persistence}))}function rN(e){return $R(e).then((function(e){return e.localStore}))}function iN(e){return eN(e).then((function(e){return e.remoteStore}))}function aN(e){return eN(e).then((function(e){return e.syncEngine}))}function oN(e){return eN(e).then((function(e){return e.datastore}))}function uN(e){return sN.apply(this,arguments)}function sN(){return(sN=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eN(n);case 2:return r=e.sent,i=r.eventManager,e.abrupt("return",(i.onListen=jC.bind(null,r.syncEngine),i.onUnlisten=KC.bind(null,r.syncEngine),i));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function cN(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Uw;return t.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function a(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var a=new qR({next:function(a){t.enqueueAndForget((function(){return EC(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Mw(Lw.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Mw(Lw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new RC(Px(n.path),a,{includeMetadataChanges:!0,Ku:!0});return xC(e,o)},e.next=3,uN(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),a)})))),i.promise}function lN(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Uw;return t.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function a(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var a=new qR({next:function(n){t.enqueueAndForget((function(){return EC(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Mw(Lw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new RC(n,a,{includeMetadataChanges:!0,Ku:!0});return xC(e,o)},e.next=3,uN(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),a)})))),i.promise}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fN(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var hN=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(e,t,n){if(!n)throw new Mw(Lw.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vN(e,t,n,r){if(!0===t&&!0===r)throw new Mw(Lw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pN(e){if(!rb.isDocumentKey(e))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yN(e){if(rb.isDocumentKey(e))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":Ow()}function gN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mw(Lw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mN(e);throw new Mw(Lw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function kN(e,t){if(t<=0)throw new Mw(Lw.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wN=function(){"use strict";function t(n){var r,i;if(e(f)(this,t),void 0===n.host){if(void 0!==n.ssl)throw new Mw(Lw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.cache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Mw(Lw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}vN("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===n.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fN(null!==(i=n.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Mw(Lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Mw(Lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Mw(Lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}return e(h)(t,[{key:"isEqual",value:function(e){var t,n;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),t}(),bN=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this._authCredentials=n,this._appCheckCredentials=r,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wN({}),this._settingsFrozen=!1}return e(h)(t,[{key:"app",get:function(){if(!this._app)throw new Mw(Lw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Mw(Lw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wN(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vw;switch(e.type){case"firstParty":return new zw(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mw(Lw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=hN.get(e))&&(Aw("ComponentProvider","Removing Datastore"),hN.delete(e),t.terminate()),Promise.resolve();var e,t}}]),t}();function _N(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=gN(e,bN))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Rw("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Iw.MOCK_USER;else{o=ci(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Mw(Lw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Iw(s)}e._authCredentials=new Bw(new Fw(o,u))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xN=function(){"use strict";function t(n,r,i){e(f)(this,t),this.converter=r,this._key=i,this.type="document",this.firestore=n}return e(h)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new EN(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),IN=function(){"use strict";function t(n,r,i){e(f)(this,t),this.converter=r,this._query=i,this.type="query",this.firestore=n}return e(h)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),EN=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this,t,i,Px(a)))._path=a,o.type="collection",e($p)(o)}return e(h)(r,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xN(this.firestore,null,new rb(e))}},{key:"withConverter",value:function(e){return new r(this.firestore,e,this._path)}}]),r}(IN);function TN(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(t=Ri(t),dN("collection","path",n),t instanceof bN){var o,u=(o=eb).fromString.apply(o,[n].concat(e(Kt)(i)));return yN(u),new EN(t,null,u)}var s;if(!(t instanceof xN||t instanceof EN))throw new Mw(Lw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=t._path.child((s=eb).fromString.apply(s,[n].concat(e(Kt)(i))));return yN(c),new EN(t.firestore,null,c)}function SN(e,t){if(e=gN(e,bN),dN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new IN(e,null,(n=t,new Ox(eb.emptyPath(),n)));var n}function AN(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(t=Ri(t),1===arguments.length&&(n=Ww.A()),dN("doc","path",n),t instanceof bN){var o,u=(o=eb).fromString.apply(o,[n].concat(e(Kt)(i)));return pN(u),new xN(t,null,new rb(u))}var s;if(!(t instanceof xN||t instanceof EN))throw new Mw(Lw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=t._path.child((s=eb).fromString.apply(s,[n].concat(e(Kt)(i))));return pN(c),new xN(t.firestore,t instanceof EN?t.converter:null,new rb(c))}function CN(e,t){return e=Ri(e),t=Ri(t),(e instanceof xN||e instanceof EN)&&(t instanceof xN||t instanceof EN)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function RN(e,t){return e=Ri(e),t=Ri(t),e instanceof IN&&t instanceof IN&&e.firestore===t.firestore&&zx(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var NN=function(){"use strict";function t(){var n=this;e(f)(this,t),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new _A(this,"async_queue_retry"),this.Xc=function(){var e=wA();e&&Aw("AsyncQueue","Visibility state changed to "+e.visibilityState),n.qo.Mo()};var r=wA();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Xc)}return e(h)(t,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=wA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Uw;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var t=this;return e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.Qc.length){e.next=14;break}return e.prev=1,e.next=4,t.Qc[0]();case 4:t.Qc.shift(),t.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_b(e.t0)){e.next=12;break}throw e.t0;case 12:Aw("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:t.Qc.length>0&&t.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){var n,r;throw t.Wc=e,t.Hc=!1,Cw("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=yC.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Ow()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var t=this;return e(u)(e(c).mark((function n(){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:return r=t.Gc,e.next=4,r;case 4:if(r!==t.Gc){e.next=1;break}case 5:case"end":return e.stop()}}),n)})))()}},{key:"ia",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.zc[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.timerId===e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n=!0,r=!1,i=void 0;try{for(var a,o=t.zc[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(u.skipDelay(),"all"!==e&&u.timerId===e)break}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),t}();function ON(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n=e,r=!0,i=!1,a=void 0;try{for(var o,u=["next","error","complete"][Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s in n&&"function"==typeof n[s])return!0}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return!1}(e)}var DN=function(){"use strict";function t(){e(f)(this,t),this._progressObserver={},this._taskCompletionResolver=new Uw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e(h)(t,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),t}(),PN=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o){var u;return e(f)(this,r),(u=n.call(this,t,i,a,o)).type="firestore",u._queue=new NN,u._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",e($p)(u)}return e(h)(r,[{key:"_terminate",value:function(){return this._firestoreClient||MN(this),this._firestoreClient.terminate()}}]),r}(bN);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(e){return e._firestoreClient||MN(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function MN(e){var t,n,r,i,a,o,u,s=e._freezeSettings(),c=(i=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new A_(i,a,o,(u=s).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fN(u.experimentalLongPollingOptions),u.useFetchStreams));e._firestoreClient=new HR(e._authCredentials,e._appCheckCredentials,e._queue,c),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function UN(e,t){KN(e=gN(e,PN));var n=LN(e);if(n._uninitializedComponentsProvider)throw new Mw(Lw.FAILED_PRECONDITION,"SDK cache is already specified.");Rw("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new BR;return VN(n,i,new FR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function FN(e){KN(e=gN(e,PN));var t=LN(e);if(t._uninitializedComponentsProvider)throw new Mw(Lw.FAILED_PRECONDITION,"SDK cache is already specified.");Rw("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new BR;return VN(t,r,new VR(r,n.cacheSizeBytes))}function VN(t,n,r){var i=new Uw;return t.asyncQueue.enqueue(e(u)(e(c).mark((function a(){var o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WR(t,r);case 3:return e.next=5,JR(t,n);case 5:i.resolve(),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),YR(o=e.t0)){e.next=13;break}throw o;case 13:Rw("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o);case 14:case"end":return e.stop()}}),a,null,[[0,8]])})))).then((function(){return i.promise}))}function BN(t){if(t._initialized&&!t._terminated)throw new Mw(Lw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Uw;return t._queue.enqueueAndForgetEvenWhileRestricted(e(u)(e(c).mark((function r(){return e(c).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kb.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return r=n+"main",e.next=5,kb.delete(r);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(OS(t._databaseId,t._persistenceKey));case 3:n.resolve(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n.reject(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))),n.promise}function jN(t){return(n=LN(t=gN(t,PN))).asyncQueue.enqueue(e(u)(e(c).mark((function t(){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nN(n);case 2:return r=e.sent,e.next=5,iN(n);case 5:return i=e.sent,e.abrupt("return",(r.setNetworkEnabled(!0),t=void 0,(t=Pw(i)).vu.delete(0),CA(t)));case 7:case"end":return e.stop()}var t}),t)}))));var n}function qN(t){return(n=LN(t=gN(t,PN))).asyncQueue.enqueue(e(u)(e(c).mark((function t(){var r,i;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nN(n);case 2:return r=t.sent,t.next=5,iN(n);case 5:return i=t.sent,t.abrupt("return",(r.setNetworkEnabled(!1),function(){var t=e(u)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Pw(n)).vu.add(0),e.next=4,NA(r);case 4:r.bu.set("Offline");case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(i)));case 7:case"end":return t.stop()}}),t)}))));var n}function zN(t,n){var r=LN(t=gN(t,PN)),i=new DN;return function(t,n,r,i){var a,o,s,l,f=(a=r,o=bA(n),s="string"==typeof a?$I().encode(a):a,l=function(e,t){if(e instanceof Uint8Array)return jR(e,t);if(e instanceof ArrayBuffer)return jR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(s),new zR(l,o));t.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=MR,e.next=3,aN(t);case 3:e.t1=e.sent,e.t2=f,e.t3=i,(0,e.t0)(e.t1,e.t2,e.t3);case 7:case"end":return e.stop()}}),n)}))))}(r,t._databaseId,n,i),i}function GN(t,n){return(r=LN(t=gN(t,PN)),i=n,r.asyncQueue.enqueue(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n=Pw(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},e.next=3,rN(r);case 3:return e.t1=e.sent,e.t2=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),t)}))))).then((function(e){return e?new IN(t,null,e.query):null}));var r,i}function KN(e){if(e._initialized||e._terminated)throw new Mw(Lw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HN=function(){"use strict";function t(n){e(f)(this,t),this._byteString=n}return e(h)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(w_.fromBase64String(e))}catch(e){throw new Mw(Lw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t(w_.fromUint8Array(e))}}]),t}(),WN=function(){"use strict";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e(f)(this,t);for(var a=0;a<r.length;++a)if(0===r[a].length)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nb(r)}return e(h)(t,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QN=function t(n){"use strict";e(f)(this,t),this._methodName=n},JN=function(){"use strict";function t(n,r){if(e(f)(this,t),!isFinite(n)||n<-90||n>90)throw new Mw(Lw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Mw(Lw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}return e(h)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qw(this._lat,e._lat)||Qw(this._long,e._long)}}]),t}(),XN=/^__.*__$/,YN=function(){"use strict";function t(n,r,i){e(f)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(h)(t,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new MI(e,this.data,this.fieldMask,t,this.fieldTransforms):new LI(e,this.data,t,this.fieldTransforms)}}]),t}(),$N=function(){"use strict";function t(n,r,i){e(f)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(h)(t,[{key:"toMutation",value:function(e,t){return new MI(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ow()}}var eO=function(){"use strict";function t(n,r,i,a,o,u){e(f)(this,t),this.settings=n,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return e(h)(t,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return wO(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ZN(this.ca)&&XN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),t}(),tO=function(){"use strict";function t(n,r,i){e(f)(this,t),this.databaseId=n,this.ignoreUndefinedProperties=r,this.serializer=i||bA(n)}return e(h)(t,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new eO({ca:e,methodName:t,ga:n,path:nb.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),t}();function nO(e){var t=e._freezeSettings(),n=bA(e._databaseId);return new tO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rO(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);yO("Data must be an object, but it was:",o,r);var u,s,c=vO(r,o);if(a.merge)u=new m_(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var v,p=a.mergeFields[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value,m=mO(t,y,n);if(!o.contains(m))throw new Mw(Lw.INVALID_ARGUMENT,"Field '".concat(m,"' is specified in your field mask but missing from your input data."));bO(l,m)||l.push(m)}}catch(e){h=!0,d=e}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}u=new m_(l),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new YN(new Y_(c),u,s)}var iO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof r}}]),r}(QN);function aO(e,t,n){return new eO({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var oO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"_toFieldTransform",value:function(e){return new EI(e.path,new mI)}},{key:"isEqual",value:function(e){return e instanceof r}}]),r}(QN),uO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t)).pa=i,e($p)(a)}return e(h)(r,[{key:"_toFieldTransform",value:function(e){var t=aO(this,e,!0),n=this.pa.map((function(e){return dO(e,t)})),r=new gI(n);return new EI(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),r}(QN),sO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t)).pa=i,e($p)(a)}return e(h)(r,[{key:"_toFieldTransform",value:function(e){var t=aO(this,e,!0),n=this.pa.map((function(e){return dO(e,t)})),r=new wI(n);return new EI(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),r}(QN),cO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t)).Ia=i,e($p)(a)}return e(h)(r,[{key:"_toFieldTransform",value:function(e){var t=new _I(e.serializer,hI(e.serializer,this.Ia));return new EI(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),r}(QN);function lO(e,t,n,r){var i=e.ya(1,t,n);yO("Data must be an object, but it was:",i,r);var a=[],o=Y_.empty();c_(r,(function(e,r){var u=kO(t,e,n);r=Ri(r);var s=i.da(u);if(r instanceof iO)a.push(u);else{var c=dO(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new m_(a);return new $N(o,u,i.fieldTransforms)}function fO(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[mO(t,r,n)],s=[i];if(a.length%2!=0)throw new Mw(Lw.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(mO(t,a[c])),s.push(a[c+1]);for(var l=[],f=Y_.empty(),h=u.length-1;h>=0;--h)if(!bO(l,u[h])){var d=u[h],v=s[h];v=Ri(v);var p=o.da(d);if(v instanceof iO)l.push(d);else{var y=dO(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new m_(l);return new $N(f,m,o.fieldTransforms)}function hO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return dO(n,e.ya(r?4:3,t))}function dO(e,t){if(pO(e=Ri(e)))return yO("Unsupported field value:",t,e),vO(e,t);if(e instanceof QN)return function(e,t){if(!ZN(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n=[],r=0,i=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=dO(u.value,t.wa(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ri(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hI(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Yw.fromDate(e);return{timestampValue:gE(t.serializer,n)}}if(e instanceof Yw){var r=new Yw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gE(t.serializer,r)}}if(e instanceof JN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof HN)return{bytesValue:kE(t.serializer,e._byteString)};if(e instanceof xN){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:_E(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(mN(e)))}(e,t)}function vO(e,t){var n={};return l_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):c_(e,(function(e,r){var i=dO(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function pO(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yw||e instanceof JN||e instanceof HN||e instanceof xN||e instanceof QN)}function yO(e,t,n){if(!pO(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=mN(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}var i}function mO(e,t,n){if((t=Ri(t))instanceof WN)return t._internalPath;if("string"==typeof t)return kO(e,t);throw wO("Field path arguments must be of type string or ",e,!1,void 0,n)}var gO=new RegExp("[~\\*/\\[\\]]");function kO(t,n,r){if(n.search(gO)>=0)throw wO("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,r);try{return e(Yp)(WN,e(Kt)(n.split(".")))._internalPath}catch(e){throw wO("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,r)}}function wO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Mw(Lw.INVALID_ARGUMENT,u+e+s)}function bO(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _O=function(){"use strict";function t(n,r,i,a,o){e(f)(this,t),this._firestore=n,this._userDataWriter=r,this._key=i,this._document=a,this._converter=o}return e(h)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new xN(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new xO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(IO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),t}(),xO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"data",value:function(){return e(uo)(e(lo)(r.prototype),"data",this).call(this)}}]),r}(_O);function IO(e,t){return"string"==typeof t?kO(e,t):t instanceof WN?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Mw(Lw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var TO=function t(){"use strict";e(f)(this,t)},SO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return r}(TO);function AO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=[];t instanceof TO&&a.push(t),function(e){var t=e.filter((function(e){return e instanceof NO})).length,n=e.filter((function(e){return e instanceof CO})).length;if(t>1||t>0&&n>0)throw new Mw(Lw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a=a.concat(r));var o=!0,u=!1,s=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;e=f._apply(e)}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return e}var CO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this))._field=t,o._op=i,o._value=a,o.type="where",e($p)(o)}return e(h)(r,[{key:"_apply",value:function(e){var t=this._parse(e);return GO(e._query,t),new IN(e.firestore,e.converter,jx(e._query,t))}},{key:"_parse",value:function(e){var t=nO(e.firestore);return function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){zO(o,a);var s=[],c=!0,l=!1,f=void 0;try{for(var h,d=o[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;s.push(qO(r,e,v))}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}u={arrayValue:{values:s}}}else u=qO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||zO(o,a),u=hO(n,"where",o,"in"===a||"not-in"===a);return ox.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,t,n){return new r(e,t,n)}}]),r}(SO);function RO(e,t,n){var r=t,i=IO("where",e);return CO._create(i,r,n)}var NO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this)).type=t,a._queryConstraints=i,e($p)(a)}return e(h)(r,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ux.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n=e,r=t.getFlattenedFilters(),i=!0,a=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;GO(n,c),n=jx(n,c)}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}(e._query,t),new IN(e.firestore,e.converter,jx(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new r(e,t)}}]),r}(TO);var OO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this))._field=t,a._direction=i,a.type="orderBy",e($p)(a)}return e(h)(r,[{key:"_apply",value:function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rx(t,n);return function(e,t){if(null===Mx(e)){var n=Ux(e);null!==n&&KO(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new IN(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Ox(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}],[{key:"_create",value:function(e,t){return new r(e,t)}}]),r}(SO);function DO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=IO("orderBy",e);return OO._create(r,n)}var PO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this)).type=t,o._limit=i,o._limitType=a,e($p)(o)}return e(h)(r,[{key:"_apply",value:function(e){return new IN(e.firestore,e.converter,qx(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,n){return new r(e,t,n)}}]),r}(SO);var LO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this)).type=t,o._docOrFields=i,o._inclusive=a,e($p)(o)}return e(h)(r,[{key:"_apply",value:function(e){var t,n,r=jO(e,this.type,this._docOrFields,this._inclusive);return new IN(e.firestore,e.converter,(t=e._query,n=r,new Ox(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))}}],[{key:"_create",value:function(e,t,n){return new r(e,t,n)}}]),r}(SO);function MO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return LO._create("startAt",t,!0)}function UO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return LO._create("startAfter",t,!1)}var FO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a){var o;return e(f)(this,r),(o=n.call(this)).type=t,o._docOrFields=i,o._inclusive=a,e($p)(o)}return e(h)(r,[{key:"_apply",value:function(e){var t,n,r=jO(e,this.type,this._docOrFields,this._inclusive);return new IN(e.firestore,e.converter,(t=e._query,n=r,new Ox(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))}}],[{key:"_create",value:function(e,t,n){return new r(e,t,n)}}]),r}(SO);function VO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return FO._create("endBefore",t,!1)}function BO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return FO._create("endAt",t,!0)}function jO(t,n,r,i){if(r[0]=Ri(r[0]),r[0]instanceof _O)return function(e,t,n,r,i){if(!r)throw new Mw(Lw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a=[],o=!0,u=!1,s=void 0;try{for(var c,l=Vx(e)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;if(f.field.isKeyField())a.push(V_(t,r.key));else{var h=r.data.field(f.field);if(E_(h))throw new Mw(Lw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var d=f.field.canonicalString();throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(d,"' (used as the orderBy) does not exist."))}a.push(h)}}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return new ex(a,i)}(t._query,t.firestore._databaseId,n,r[0]._document,i);var a=nO(t.firestore);return function(t,n,r,i,a,o){var u=t.explicitOrderBy;if(a.length>u.length)throw new Mw(Lw.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],c=0;c<a.length;c++){var l=a[c];if(u[c].field.isKeyField()){if("string"!=typeof l)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(void 0===l?"undefined":e(v)(l)));if(!Fx(t)&&-1!==l.indexOf("/"))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var f=t.path.child(eb.fromString(l));if(!rb.isDocumentKey(f))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(f,"' is not because it contains an odd number of segments."));var h=new rb(f);s.push(V_(n,h))}else{var d=hO(r,i,l);s.push(d)}}return new ex(s,o)}(t._query,t.firestore._databaseId,a,n,r,i)}function qO(e,t,n){if("string"==typeof(n=Ri(n))){if(""===n)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fx(t)&&-1!==n.indexOf("/"))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(eb.fromString(n));if(!rb.isDocumentKey(r))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return V_(e,new rb(r))}if(n instanceof xN)return V_(e,n._key);throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mN(n),"."))}function zO(e,t){if(!Array.isArray(e)||0===e.length)throw new Mw(Lw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function GO(e,t){if(t.isInequality()){var n=Ux(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Mx(e);null!==i&&KO(e,r,i)}var a=function(e,t){var n=!0,r=!1,i=void 0,a=!0,o=!1,u=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;try{for(var f,h=l.getFlattenedFilters()[Symbol.iterator]();!(n=(f=h.next()).done);n=!0){var d=f.value;if(t.indexOf(d.op)>=0)return d.op}}catch(e){r=!0,i=e}finally{try{n||null==h.return||h.return()}finally{if(r)throw i}}}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function KO(e,t,n){if(!n.isEqual(t))throw new Mw(Lw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var HO=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(O_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return x_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(I_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ow()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=this,r={};return c_(e,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new JN(x_(e.latitude),x_(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=T_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(S_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=__(e);return new Yw(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=eb.fromString(e);Dw(zE(n));var r=new C_(n.get(1),n.get(3)),i=new rb(n.popFirst(5));return r.isEqual(t)||Cw("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var QO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).firestore=t,e($p)(i)}return e(h)(r,[{key:"convertBytes",value:function(e){return new HN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xN(this.firestore,null,t)}}]),r}(HO);
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var JO=function(){"use strict";function t(n,r){e(f)(this,t),this.hasPendingWrites=n,this.fromCache=r}return e(h)(t,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),t}(),XO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i,a,o,u,s){var c;return e(f)(this,r),(c=n.call(this,t,i,a,o,s))._firestore=t,c._firestoreImpl=t,c.metadata=u,e($p)(c)}return e(h)(r,[{key:"exists",value:function(){return e(uo)(e(lo)(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new YO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(IO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),r}(_O),YO=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(uo)(e(lo)(r.prototype),"data",this).call(this,t)}}]),r}(XO),$O=function(){"use strict";function t(n,r,i,a){e(f)(this,t),this._firestore=n,this._userDataWriter=r,this._snapshot=a,this.metadata=new JO(a.hasPendingWrites,a.fromCache),this.query=i}return e(h)(t,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new YO(n._firestore,n._userDataWriter,r.key,r,new JO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Mw(Lw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new YO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new YO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ZO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),t}();function ZO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ow()}}function eD(e,t){return e instanceof XO&&t instanceof XO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $O&&t instanceof $O&&e._firestore===t._firestore&&RN(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(e){e=gN(e,xN);var t=gN(e.firestore,PN);return cN(LN(t),e._key).then((function(n){return vD(t,e,n)}))}var nD=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).firestore=t,e($p)(i)}return e(h)(r,[{key:"convertBytes",value:function(e){return new HN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xN(this.firestore,null,t)}}]),r}(HO);function rD(t){t=gN(t,xN);var n,r,i,a=gN(t.firestore,PN),o=LN(a),s=new nD(a);return(n=o,r=t._key,i=new Uw,n.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(){var t=e(u)(e(c).mark((function t(n,r,i){var a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Pw(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(n,r);case 3:(a=e.sent).isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new Mw(Lw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=mC(e.t0,"Failed to get document '".concat(r," from cache")),i.reject(o);case 11:case"end":return e.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}(),t.next=3,rN(n);case 3:return t.t1=t.sent,t.t2=r,t.t3=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})))),i.promise).then((function(e){return new XO(a,s,t._key,e,new JO(null!==e&&e.hasLocalMutations,!0),t.converter)}))}function iD(e){e=gN(e,xN);var t=gN(e.firestore,PN);return cN(LN(t),e._key,{source:"server"}).then((function(n){return vD(t,e,n)}))}function aD(e){e=gN(e,IN);var t=gN(e.firestore,PN),n=LN(t),r=new nD(t);return EO(e._query),lN(n,e._query).then((function(n){return new $O(t,r,e,n)}))}function oD(t){t=gN(t,IN);var n,r,i,a=gN(t.firestore,PN),o=LN(a),s=new nD(a);return(n=o,r=t._query,i=new Uw,n.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(){var t=e(u)(e(c).mark((function t(n,r,i){var a,o,u,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WS(n,r,!0);case 3:a=e.sent,o=new UC(r,a.ir),u=o.sc(a.documents),s=o.applyChanges(u,!1),i.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l=mC(e.t0,"Failed to execute query '".concat(r," against cache")),i.reject(l);case 14:case"end":return e.stop()}}),t,null,[[0,10]])})));return function(e,n,r){return t.apply(this,arguments)}}(),t.next=3,rN(n);case 3:return t.t1=t.sent,t.t2=r,t.t3=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})))),i.promise).then((function(e){return new $O(a,s,t,e)}))}function uD(e){e=gN(e,IN);var t=gN(e.firestore,PN),n=LN(t),r=new nD(t);return lN(n,e._query,{source:"server"}).then((function(n){return new $O(t,r,e,n)}))}function sD(e,t,n){e=gN(e,xN);var r=gN(e.firestore,PN),i=WO(e.converter,t,n);return dD(r,[rO(nO(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,SI.none())])}function cD(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];e=gN(e,xN);var o=gN(e.firestore,PN),u=nO(o);return dD(o,[("string"==typeof(t=Ri(t))||t instanceof WN?fO(u,"updateDoc",e._key,t,n,i):lO(u,"updateDoc",e._key,t)).toMutation(e._key,SI.exists(!0))])}function lD(e,t){var n=gN(e.firestore,PN),r=AN(e),i=WO(e.converter,t);return dD(n,[rO(nO(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,SI.exists(!1))]).then((function(){return r}))}function fD(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o,s;t=Ri(t);var l={includeMetadataChanges:!1},f=0;"object"!=typeof r[f]||ON(r[f])||(l=r[f],f++);var h,d,v,p={includeMetadataChanges:l.includeMetadataChanges};if(ON(r[f])){var y=r[f];r[f]=null===(a=y.next)||void 0===a?void 0:a.bind(y),r[f+1]=null===(o=y.error)||void 0===o?void 0:o.bind(y),r[f+2]=null===(s=y.complete)||void 0===s?void 0:s.bind(y)}if(t instanceof xN)d=gN(t.firestore,PN),v=Px(t._key.path),h={next:function(e){r[f]&&r[f](vD(d,t,e))},error:r[f+1],complete:r[f+2]};else{var m=gN(t,IN);d=gN(m.firestore,PN),v=m._query;var g=new nD(d);h={next:function(e){r[f]&&r[f](new $O(d,g,m,e))},error:r[f+1],complete:r[f+2]},EO(t._query)}return function(t,n,r,i){var a=new qR(i),o=new RC(n,a,r);return t.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=xC,e.next=3,uN(t);case 3:return e.t1=e.sent,e.t2=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),n)})))),function(){a.Dc(),t.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function n(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=EC,e.next=3,uN(t);case 3:return e.t1=e.sent,e.t2=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),n)}))))}}(LN(d),v,p,h)}function hD(t,n){return r=LN(t=gN(t,PN)),i=ON(n)?n:{next:n},a=new qR(i),r.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){Pw(e).ku.add(t),t.next()},e.next=3,uN(r);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),t)})))),function(){a.Dc(),r.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){Pw(e).ku.delete(t)},e.next=3,uN(r);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),t)}))))};var r,i,a}function dD(t,n){return r=LN(t),i=n,a=new Uw,r.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=WC,e.next=3,aN(r);case 3:return e.t1=e.sent,e.t2=i,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),t)})))),a.promise;var r,i,a}function vD(e,t,n){var r=n.docs.get(t._key),i=new nD(e);return new XO(e,i,t._key,r,new JO(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pD={maxAttempts:5},yD=function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=nO(n)}return e(h)(t,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=mD(e,this._firestore),i=WO(r.converter,t,n),a=rO(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,SI.none())),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];this._verifyNotCommitted();var o,u=mD(e,this._firestore);return o="string"==typeof(t=Ri(t))||t instanceof WN?fO(this._dataReader,"WriteBatch.update",u._key,t,n,i):lO(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(o.toMutation(u._key,SI.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=mD(e,this._firestore);return this._mutations=this._mutations.concat(new qI(t._key,SI.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Mw(Lw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(e,t){if((e=Ri(e)).firestore!==t)throw new Mw(Lw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gD=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,i))._firestore=t,e($p)(a)}return e(h)(r,[{key:"get",value:function(t){var n=this,i=mD(t,this._firestore),a=new nD(this._firestore);return e(uo)(e(lo)(r.prototype),"get",this).call(this,t).then((function(e){return new XO(n._firestore,a,i._key,e._document,new JO(!1,!1),i.converter)}))}}]),r}(function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._transaction=r,this._dataReader=nO(n)}return e(h)(t,[{key:"get",value:function(e){var t=this,n=mD(e,this._firestore),r=new QO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ow();var i=e[0];if(i.isFoundDocument())return new _O(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new _O(t._firestore,r,n._key,null,n.converter);throw Ow()}))}},{key:"set",value:function(e,t,n){var r=mD(e,this._firestore),i=WO(r.converter,t,n),a=rO(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=mD(e,this._firestore);return o="string"==typeof(t=Ri(t))||t instanceof WN?fO(this._dataReader,"Transaction.update",u._key,t,n,i):lO(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,o),this}},{key:"delete",value:function(e){var t=mD(e,this._firestore);return this._transaction.delete(t._key),this}}]),t}());function kD(t,n,r){t=gN(t,PN);var i,a,o,s,l=Object.assign(Object.assign({},pD),r);return function(e){if(e.maxAttempts<1)throw new Mw(Lw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),i=LN(t),a=function(e){return n(new gD(t,e))},o=l,s=new Uw,i.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oN(i);case 2:n=e.sent,new KR(i.asyncQueue,n,o,a,s).run();case 4:case"end":return e.stop()}}),t)})))),s.promise}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uO("arrayUnion",t)}function bD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sO("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ew=Ra,xa(new Ni("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new PN(new jw(e.getProvider("auth-internal")),new Kw(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mw(Lw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new C_(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ma(xw,"3.12.0",e),Ma(xw,"3.12.0","esm2017")}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _D(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mw("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){if("undefined"==typeof Uint8Array)throw new Mw("unimplemented","Uint8Arrays are not available in this environment.")}function ID(){if("undefined"==typeof atob)throw new Mw("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ED=function(){"use strict";function t(n){e(f)(this,t),this._delegate=n}return e(h)(t,[{key:"toBase64",value:function(){return ID(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return xD(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(e){return ID(),new t(HN.fromBase64String(e))}},{key:"fromUint8Array",value:function(e){return xD(),new t(HN.fromUint8Array(e))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n=e,r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s in n&&"function"==typeof n[s])return!0}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}var SD=function(){"use strict";function t(){e(f)(this,t)}return e(h)(t,[{key:"enableIndexedDbPersistence",value:function(e,t){return UN(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return FN(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return BN(e._delegate)}}]),t}(),AD=function(){"use strict";function t(n,r,i){var a=this;e(f)(this,t),this._delegate=r,this._persistenceProvider=i,this.INTERNAL={delete:function(){return a.terminate()}},n instanceof C_||(this._appCompat=n)}return e(h)(t,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Rw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_N(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return jN(this._delegate)}},{key:"disableNetwork",value:function(){return qN(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&vN("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return t=this._delegate,n=LN(t=gN(t,PN)),r=new Uw,n.asyncQueue.enqueueAndForget(e(u)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=iR,e.next=3,aN(n);case 3:return e.t1=e.sent,e.t2=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),t)})))),r.promise;var t,n,r}},{key:"onSnapshotsInSync",value:function(e){return hD(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Mw("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new qD(this,TN(this._delegate,e))}catch(e){throw PD(e,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new DD(this,AN(this._delegate,e))}catch(e){throw PD(e,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new VD(this,SN(this._delegate,e))}catch(e){throw PD(e,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return kD(this._delegate,(function(n){return e(new RD(t,n))}))}},{key:"batch",value:function(){var e=this;return LN(this._delegate),new ND(new yD(this._delegate,(function(t){return dD(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return zN(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return GN(this._delegate,e).then((function(e){return e?new VD(t,e):null}))}}]),t}(),CD=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t){var i;return e(f)(this,r),(i=n.call(this)).firestore=t,i}return e(h)(r,[{key:"convertBytes",value:function(e){return new ED(new HN(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return DD.forKey(t,this.firestore,null)}}]),r}(HO);var RD=function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._delegate=r,this._userDataWriter=new CD(n)}return e(h)(t,[{key:"get",value:function(e){var t=this,n=zD(e);return this._delegate.get(n).then((function(e){return new UD(t._firestore,new XO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=zD(e);return n?(_D("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(t,n,r){for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u,s=zD(t);return 2===arguments.length?this._delegate.update(s,n):(u=this._delegate).update.apply(u,[s,n,r].concat(e(Kt)(a))),this}},{key:"delete",value:function(e){var t=zD(e);return this._delegate.delete(t),this}}]),t}(),ND=function(){"use strict";function t(n){e(f)(this,t),this._delegate=n}return e(h)(t,[{key:"set",value:function(e,t,n){var r=zD(e);return n?(_D("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(t,n,r){for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u,s=zD(t);return 2===arguments.length?this._delegate.update(s,n):(u=this._delegate).update.apply(u,[s,n,r].concat(e(Kt)(a))),this}},{key:"delete",value:function(e){var t=zD(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),t}(),OD=function(){"use strict";function t(n,r,i){e(f)(this,t),this._firestore=n,this._userDataWriter=r,this._delegate=i}return e(h)(t,[{key:"fromFirestore",value:function(e,t){var n=new YO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new FD(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(e,n){var r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var a=i.get(n);return a||(a=new t(e,new CD(e),n),i.set(n,a)),a}}]),t}();OD.INSTANCES=new WeakMap;var DD=function(){"use strict";function t(n,r){e(f)(this,t),this.firestore=n,this._delegate=r,this._userDataWriter=new CD(n)}return e(h)(t,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new qD(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new qD(this.firestore,TN(this._delegate,e))}catch(e){throw PD(e,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ri(e))instanceof xN&&CN(this._delegate,e)}},{key:"set",value:function(e,t){t=_D("DocumentReference.set",t);try{return t?sD(this._delegate,e,t):sD(this._delegate,e)}catch(e){throw PD(e,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];try{return 1===arguments.length?cD(this._delegate,t):cD.apply(void 0,[this._delegate,t,n].concat(e(Kt)(i)))}catch(e){throw PD(e,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return dD(gN((e=this._delegate).firestore,PN),[new qI(e._key,SI.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this,i=LD(t),a=MD(t,(function(e){return new UD(r.firestore,new XO(r.firestore._delegate,r._userDataWriter,e._key,e._document,e.metadata,r._delegate.converter))}));return fD(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?rD(this._delegate):"server"===(null==e?void 0:e.source)?iD(this._delegate):tD(this._delegate)).then((function(e){return new UD(t.firestore,new XO(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(e){return new t(this.firestore,e?this._delegate.withConverter(OD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(e,n,r){if(e.length%2!=0)throw new Mw("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new t(n,new xN(n._delegate,r,new rb(e)))}},{key:"forKey",value:function(e,n,r){return new t(n,new xN(n._delegate,r,e))}}]),t}();function PD(e,t,n){return e.message=e.message.replace(t,n),e}function LD(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if("object"==typeof o&&!TD(o))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return{}}function MD(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=TD(e[0])?e[0]:TD(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var UD=function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._delegate=r}return e(h)(t,[{key:"ref",get:function(){return new DD(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return eD(this._delegate,e._delegate)}}]),t}(),FD=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(){return e(f)(this,r),n.apply(this,arguments)}return e(h)(r,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Ow(),t}}]),r}(UD),VD=function(){"use strict";function t(n,r){e(f)(this,t),this.firestore=n,this._delegate=r,this._userDataWriter=new CD(n)}return e(h)(t,[{key:"where",value:function(e,n,r){try{return new t(this.firestore,AO(this._delegate,RO(e,n,r)))}catch(e){throw PD(e,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(e,n){try{return new t(this.firestore,AO(this._delegate,DO(e,n)))}catch(e){throw PD(e,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(e){try{return new t(this.firestore,AO(this._delegate,(kN("limit",n=e),PO._create("limit",n,"F"))))}catch(e){throw PD(e,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(e){try{return new t(this.firestore,AO(this._delegate,(kN("limitToLast",n=e),PO._create("limitToLast",n,"L"))))}catch(e){throw PD(e,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];try{return new t(this.firestore,AO(this._delegate,MO.apply(void 0,e(Kt)(r))))}catch(e){throw PD(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];try{return new t(this.firestore,AO(this._delegate,UO.apply(void 0,e(Kt)(r))))}catch(e){throw PD(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];try{return new t(this.firestore,AO(this._delegate,VO.apply(void 0,e(Kt)(r))))}catch(e){throw PD(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];try{return new t(this.firestore,AO(this._delegate,BO.apply(void 0,e(Kt)(r))))}catch(e){throw PD(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return RN(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?oD(this._delegate):"server"===(null==e?void 0:e.source)?uD(this._delegate):aD(this._delegate)).then((function(e){return new jD(t.firestore,new $O(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this,i=LD(t),a=MD(t,(function(e){return new jD(r.firestore,new $O(r.firestore._delegate,r._userDataWriter,r._delegate,e._snapshot))}));return fD(this._delegate,i,a)}},{key:"withConverter",value:function(e){return new t(this.firestore,e?this._delegate.withConverter(OD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),t}(),BD=function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._delegate=r}return e(h)(t,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new FD(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),t}(),jD=function(){"use strict";function t(n,r){e(f)(this,t),this._firestore=n,this._delegate=r}return e(h)(t,[{key:"query",get:function(){return new VD(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new FD(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new BD(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new FD(n._firestore,r))}))}},{key:"isEqual",value:function(e){return eD(this._delegate,e._delegate)}}]),t}(),qD=function(t){"use strict";e(ne)(r,t);var n=e(ae)(r);function r(t,i){var a;return e(f)(this,r),(a=n.call(this,t,i)).firestore=t,a._delegate=i,a}return e(h)(r,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new DD(this.firestore,e):null}},{key:"doc",value:function(e){try{return new DD(this.firestore,void 0===e?AN(this._delegate):AN(this._delegate,e))}catch(e){throw PD(e,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return lD(this._delegate,e).then((function(e){return new DD(t.firestore,e)}))}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new r(this.firestore,e?this._delegate.withConverter(OD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),r}(VD);function zD(e){return gN(e,xN)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GD=function(){"use strict";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e(f)(this,t),this._delegate=e(Yp)(WN,e(Kt)(r))}return e(h)(t,[{key:"isEqual",value:function(e){return(e=Ri(e))instanceof WN&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new t(nb.keyField().canonicalString())}}]),t}(),KD=function(){"use strict";function t(n){e(f)(this,t),this._delegate=n}return e(h)(t,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var e=new oO("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)}},{key:"delete",value:function(){var e=new iO("deleteField");return e._methodName="FieldValue.delete",new t(e)}},{key:"arrayUnion",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=wD.apply(void 0,e(Kt)(r));return a._methodName="FieldValue.arrayUnion",new t(a)}},{key:"arrayRemove",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=bD.apply(void 0,e(Kt)(r));return a._methodName="FieldValue.arrayRemove",new t(a)}},{key:"increment",value:function(e){var n=new cO("increment",e);return n._methodName="FieldValue.increment",new t(n)}}]),t}(),HD={Firestore:AD,GeoPoint:JN,Timestamp:Yw,Blob:ED,Transaction:RD,WriteBatch:ND,DocumentReference:DD,DocumentSnapshot:UD,Query:VD,QueryDocumentSnapshot:FD,QuerySnapshot:jD,CollectionReference:qD,FieldPath:GD,FieldValue:KD,setLogLevel:function(e){var t;t=e,Tw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t;t=function(e,t){return new AD(e,t,new SD)},e.INTERNAL.registerComponent(new Ni("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},HD))),e.registerVersion("@firebase/firestore-compat","0.3.9")}(oo);var WD=oo.initializeApp({apiKey:"AIzaSyCgjEFXQidkD_gtSEs09jDck9M1Ax9vjRc",authDomain:"the-error-masters.firebaseapp.com",databaseURL:"https://the-error-masters-default-rtdb.europe-west1.firebasedatabase.app",projectId:"the-error-masters",storageBucket:"the-error-masters.appspot.com",messagingSenderId:"926729610661",appId:"1:926729610661:web:60731048c7f8671080744c"});function QD(){return(QD=e(u)(e(c).mark((function t(n){var r,i,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,i=n.username,a=n.password,console.log(WD),e.prev=2,e.next=5,WD.auth().createUserWithEmailAndPassword(r,i,a);case 5:return e.next=7,WD.auth().currentUser;case 7:return o=e.sent,e.next=10,o.updateProfile({displayName:i});case 10:console.log(o.displayName),console.log(o.email),console.log(o.uid),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),t,null,[[2,15]])})))).apply(this,arguments)}function JD(){return(JD=e(u)(e(c).mark((function t(n){var r,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,i=n.password,e.prev=1,e.next=4,WD.auth().signInWithEmailAndPassword(r,i);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}!function(e){QD.apply(this,arguments)}({email:"f3@f.com",username:"gergreg",password:"gferager"}),function(e){JD.apply(this,arguments)}({email:"f2@f.com",username:"gergreg",password:"gferager"})}();
//# sourceMappingURL=shopping-list.a5b9646b.js.map
